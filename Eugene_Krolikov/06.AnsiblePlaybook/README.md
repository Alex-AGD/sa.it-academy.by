# 06.AnsibleWorkshop

## Result playbook

```Shell
root@05lesson:/home/devops# ansible-playbook -i inv.yaml setupnginx.yaml

PLAY [all_workers] **************************************************************************************************************************************************************************************

TASK [Gathering Facts] **********************************************************************************************************************************************************************************
Monday 27 March 2023  11:16:02 +0000 (0:00:00.010)       0:00:00.010 **********
ok: [hostXX]
ok: [hostYY]

TASK [Install packages] *********************************************************************************************************************************************************************************
Monday 27 March 2023  11:16:04 +0000 (0:00:02.074)       0:00:02.085 **********
changed: [hostXX]
changed: [hostYY]

TASK [Create a directory if it does not exist] **********************************************************************************************************************************************************
Monday 27 March 2023  11:18:33 +0000 (0:02:29.110)       0:02:31.196 **********
changed: [hostYY] => (item=site1.by)
changed: [hostXX] => (item=site1.by)
changed: [hostYY] => (item=site2.by)
changed: [hostXX] => (item=site2.by)

TASK [Permissions] **************************************************************************************************************************************************************************************
Monday 27 March 2023  11:18:34 +0000 (0:00:01.200)       0:02:32.396 **********
changed: [hostXX]
changed: [hostYY]

TASK [Template a file to /var/www/host/html/] ***********************************************************************************************************************************************************
Monday 27 March 2023  11:18:35 +0000 (0:00:00.574)       0:02:32.971 **********
changed: [hostXX] => (item=site1.by)
changed: [hostYY] => (item=site1.by)
changed: [hostXX] => (item=site2.by)
changed: [hostYY] => (item=site2.by)

TASK [Template a file to /etc/nginx/sites-available/host] ***********************************************************************************************************************************************
Monday 27 March 2023  11:18:37 +0000 (0:00:02.264)       0:02:35.235 **********
changed: [hostXX] => (item=site1.by)
changed: [hostYY] => (item=site1.by)
changed: [hostXX] => (item=site2.by)
changed: [hostYY] => (item=site2.by)

TASK [Create symbolic links] ****************************************************************************************************************************************************************************
Monday 27 March 2023  11:18:39 +0000 (0:00:02.534)       0:02:37.770 **********
changed: [hostXX] => (item=site1.by)
changed: [hostYY] => (item=site1.by)
changed: [hostXX] => (item=site2.by)
changed: [hostYY] => (item=site2.by)

TASK [Add in hosts] *************************************************************************************************************************************************************************************
Monday 27 March 2023  11:18:41 +0000 (0:00:01.245)       0:02:39.015 **********
changed: [hostXX] => (item=site1.by)
changed: [hostYY] => (item=site1.by)
changed: [hostYY] => (item=site2.by)
changed: [hostXX] => (item=site2.by)

TASK [Restart nginx] ************************************************************************************************************************************************************************************
Monday 27 March 2023  11:18:42 +0000 (0:00:01.453)       0:02:40.468 **********
changed: [hostYY]
changed: [hostXX]

TASK [Check that a page returns a status 200] ***********************************************************************************************************************************************************
Monday 27 March 2023  11:18:43 +0000 (0:00:01.418)       0:02:41.887 **********
ok: [hostYY] => (item=site1.by)
ok: [hostXX] => (item=site1.by)
ok: [hostXX] => (item=site2.by)
ok: [hostYY] => (item=site2.by)

PLAY RECAP **********************************************************************************************************************************************************************************************
hostXX                     : ok=10   changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0
hostYY                     : ok=10   changed=8    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

Monday 27 March 2023  11:18:45 +0000 (0:00:01.389)       0:02:43.276 **********
===============================================================================
Install packages ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 149.11s
Template a file to /etc/nginx/sites-available/host ----------------------------------------------------------------------------------------------------------------------------------------------- 2.53s
Template a file to /var/www/host/html/ ----------------------------------------------------------------------------------------------------------------------------------------------------------- 2.26s
Gathering Facts ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 2.07s
Add in hosts ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.45s
Restart nginx ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 1.42s
Check that a page returns a status 200 ----------------------------------------------------------------------------------------------------------------------------------------------------------- 1.39s
Create symbolic links ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.25s
Create a directory if it does not exist ---------------------------------------------------------------------------------------------------------------------------------------------------------- 1.20s
Permissions -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.57s
Playbook run took 0 days, 0 hours, 2 minutes, 43 seconds
```