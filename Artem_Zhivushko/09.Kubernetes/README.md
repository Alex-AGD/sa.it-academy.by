## After lecture

```bash
ssh-copy-id -p 32510 jump_sa@178.124.206.53
ssh-copy-id root@192.168.208.5
ssh-copy-id root@192.168.208.6

sudo pip install -U -r requirements.txt

cp -rfp inventory/sample inventory/zhiv
declare -a IPS=(192.168.208.5 192.168.208.6)
```

```yaml
# hosts.yaml

all:
  hosts:
    node1:
      ansible_host: 192.168.208.5
      ip: 192.168.208.5
      access_ip: 192.168.208.5
    node2:
      ansible_host: 192.168.208.6
      ip: 192.168.208.6
      access_ip: 192.168.208.6
  children:
    kube_control_plane:
      hosts:
        node1:
        node2:
    kube_node:
      hosts:
        node1:
        node2:
    etcd:
      hosts:
        node1:
    k8s_cluster:
      children:
        kube_control_plane:
        kube_node:
    calico_rr:
      hosts: {}

```

```bash
CONFIG_FILE=inventory/zhiv/hosts.yaml python3 contrib/inventory_builder/inventory.py ${IPS[@]}
```

```bash
zhivushko@DESKTOP-NGTG70N:/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray$ ansible-playbook -i inventory/zhiv/hosts.yaml  -u root cluster.yml
[WARNING]: Ansible is being run in a world writable directory (/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray), ignoring it as an ansible.cfg source. For more information see https://docs.ansible.com/ansible/devel/reference_appendices/config.html#cfg-in-world-writable-dir
ERROR! the role 'kubespray-defaults' was not found in /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles:/home/zhivushko/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks

The error appears to be in '/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/boilerplate.yml': line 57, column 7, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

  roles:
    - { role: kubespray-defaults }
      ^ here
```

```bash
zhivushko@DESKTOP-NGTG70N:/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray$ mkdir -p playbooks/roles && cp roles/ playbooks/roles
zhivushko@DESKTOP-NGTG70N:/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray$ ansible-playbook -i inventory/zhiv/hosts.yaml  -u root cluster.yml
```

```bash
# OUTPUT

[WARNING]: Ansible is being run in a world writable directory (/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray), ignoring it as an ansible.cfg source. For more information see https://docs.ansible.com/ansible/devel/reference_appendices/config.html#cfg-in-world-writable-dir

PLAY [Check Ansible version] ***********************************************************************************************************************************************************************************************************************************************************************************************

TASK [Check 2.15.5 <= Ansible version < 2.17.0] ****************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Check that python netaddr is installed] ******************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [Check that jinja is not too old (install via pip)] *******************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}
[WARNING]: Could not match supplied host pattern, ignoring: kube-master

PLAY [Add kube-master nodes to kube_control_plane] *************************************************************************************************************************************************************************************************************************************************************************
skipping: no hosts matched
[WARNING]: Could not match supplied host pattern, ignoring: kube-node

PLAY [Add kube-node nodes to kube_node] ************************************************************************************************************************************************************************************************************************************************************************************
skipping: no hosts matched
[WARNING]: Could not match supplied host pattern, ignoring: k8s-cluster

PLAY [Add k8s-cluster nodes to k8s_cluster] ********************************************************************************************************************************************************************************************************************************************************************************
skipping: no hosts matched
[WARNING]: Could not match supplied host pattern, ignoring: calico-rr

PLAY [Add calico-rr nodes to calico_rr] ************************************************************************************************************************************************************************************************************************************************************************************
skipping: no hosts matched
[WARNING]: Could not match supplied host pattern, ignoring: no-floating

PLAY [Add no-floating nodes to no_floating] ********************************************************************************************************************************************************************************************************************************************************************************
skipping: no hosts matched
[WARNING]: Could not match supplied host pattern, ignoring: bastion

PLAY [Install bastion ssh config] ******************************************************************************************************************************************************************************************************************************************************************************************
skipping: no hosts matched

PLAY [Bootstrap hosts for Ansible] *****************************************************************************************************************************************************************************************************************************************************************************************

TASK [kubespray-defaults : Gather ansible_default_ipv4 from all hosts] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=node1)
skipping: [node1] => (item=node2)
skipping: [node1]

TASK [kubespray-defaults : Create fallback_ips_base] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Set fallback_ips] *******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubespray-defaults : Set no_proxy to all assigned cluster IPs and hostnames] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Populates no_proxy to all hosts] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubespray-defaults : Set `etcd_deployment_type` to "kubeadm" if `etcd_kubeadm_enabled` is true] **********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [bootstrap-os : Fetch /etc/os-release] ********************************************************************************************************************************************************************************************************************************************************************************
[WARNING]: raw module does not support the environment keyword
[WARNING]: raw module does not support the environment keyword
ok: [node1]
ok: [node2]

TASK [bootstrap-os : Bootstrap CentOS] *************************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [bootstrap-os : Bootstrap Amazon] *************************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [bootstrap-os : Bootstrap RedHat] *************************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [bootstrap-os : Bootstrap Clear Linux] ********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [bootstrap-os : Bootstrap Fedora CoreOS] ******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [bootstrap-os : Bootstrap Flatcar] ************************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [bootstrap-os : Bootstrap Debian] *************************************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/bootstrap-os/tasks/bootstrap-debian.yml for node1, node2

TASK [bootstrap-os : Check if bootstrap is needed] *************************************************************************************************************************************************************************************************************************************************************************
[WARNING]: raw module does not support the environment keyword
[WARNING]: raw module does not support the environment keyword
ok: [node1]
ok: [node2]

TASK [bootstrap-os : Check http::proxy in apt configuration files] *********************************************************************************************************************************************************************************************************************************************************
[WARNING]: raw module does not support the environment keyword
[WARNING]: raw module does not support the environment keyword
ok: [node1]
ok: [node2]

TASK [bootstrap-os : Add http_proxy to /etc/apt/apt.conf if http_proxy is defined] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [bootstrap-os : Check https::proxy in apt configuration files] ********************************************************************************************************************************************************************************************************************************************************
[WARNING]: raw module does not support the environment keyword
[WARNING]: raw module does not support the environment keyword
ok: [node1]
ok: [node2]

TASK [bootstrap-os : Add https_proxy to /etc/apt/apt.conf if https_proxy is defined] ***************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [bootstrap-os : Install python3] **************************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [bootstrap-os : Update Apt cache] *************************************************************************************************************************************************************************************************************************************************************************************
[WARNING]: raw module does not support the environment keyword
[WARNING]: raw module does not support the environment keyword
changed: [node2]
changed: [node1]

TASK [bootstrap-os : Set the ansible_python_interpreter fact] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [bootstrap-os : Install dbus for the hostname module] *****************************************************************************************************************************************************************************************************************************************************************
ok: [node2]
ok: [node1]

TASK [bootstrap-os : Boostrap Fedora] **************************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [bootstrap-os : Bootstrap OpenSUSE] ***********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [bootstrap-os : Create remote_tmp for it is used by another module] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [bootstrap-os : Gather host facts to get ansible_os_family] ***********************************************************************************************************************************************************************************************************************************************************
ok: [node2]
ok: [node1]

TASK [bootstrap-os : Assign inventory name to unconfigured hostnames (non-CoreOS, non-Flatcar, Suse and ClearLinux, non-Fedora)] *******************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [bootstrap-os : Assign inventory name to unconfigured hostnames (CoreOS, Flatcar, Suse, ClearLinux and Fedora only)] **************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [bootstrap-os : Update hostname fact (CoreOS, Flatcar, Suse, ClearLinux and Fedora only)] *****************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [bootstrap-os : Install ceph-commmon package] *************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [bootstrap-os : Ensure bash_completion.d folder exists] ***************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

PLAY [Gather facts] ********************************************************************************************************************************************************************************************************************************************************************************************************

TASK [Gather minimal facts] ************************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [Gather necessary facts (network)] ************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [Gather necessary facts (hardware)] ***********************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

PLAY [Prepare for etcd install] ********************************************************************************************************************************************************************************************************************************************************************************************

TASK [kubespray-defaults : Gather ansible_default_ipv4 from all hosts] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=node1)
skipping: [node1] => (item=node2)
skipping: [node1]

TASK [kubespray-defaults : Create fallback_ips_base] ***********************************************************************************************************************************************************************************************************************************************************************
ok: [node1 -> localhost]

TASK [kubespray-defaults : Set fallback_ips] *******************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubespray-defaults : Set no_proxy to all assigned cluster IPs and hostnames] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Populates no_proxy to all hosts] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubespray-defaults : Set `etcd_deployment_type` to "kubeadm" if `etcd_kubeadm_enabled` is true] **********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [adduser : User | Create User Group] **********************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [adduser : User | Create User] ****************************************************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [kubernetes/preinstall : Check if /etc/fstab exists] ******************************************************************************************************************************************************************************************************************************************************************
ok: [node2]
ok: [node1]

TASK [kubernetes/preinstall : Remove swapfile from /etc/fstab] *************************************************************************************************************************************************************************************************************************************************************
ok: [node2] => (item=swap)
ok: [node1] => (item=swap)
ok: [node2] => (item=none)
ok: [node1] => (item=none)

TASK [kubernetes/preinstall : Mask swap.target (persist swapoff)] **********************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [kubernetes/preinstall : Disable swap] ********************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/preinstall : Force binaries directory for Flatcar Container Linux by Kinvolk] *****************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Set os_family fact for other redhat-based operating systems] *********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Set os_family fact for other debian-based operating systems] *********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Check if booted with ostree] *****************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Set is_fedora_coreos] ************************************************************************************************************************************************************************************************************************************************************************
ok: [node2]
ok: [node1]

TASK [kubernetes/preinstall : Set is_fedora_coreos] ************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Check resolvconf] ****************************************************************************************************************************************************************************************************************************************************************************
ok: [node2]
ok: [node1]

TASK [kubernetes/preinstall : Check existence of /etc/resolvconf/resolv.conf.d] ********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Check status of /etc/resolv.conf] ************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Get content of /etc/resolv.conf] *************************************************************************************************************************************************************************************************************************************************************
ok: [node2]
ok: [node1]

TASK [kubernetes/preinstall : Get currently configured nameservers] ********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Stop if /etc/resolv.conf not configured nameservers] *****************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}
ok: [node2] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : NetworkManager | Check if host has NetworkManager] *******************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Check systemd-resolved] **********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Set default dns if remove_default_searchdomains is false] ************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Set dns facts] *******************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Check if kubelet is configured] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Check if early DNS configuration stage] ******************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Target resolv.conf files] ********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Target temporary resolvconf cloud init file (Flatcar Container Linux by Kinvolk / Fedora CoreOS)] ********************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Check if /etc/dhclient.conf exists] **********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Target dhclient conf file for /etc/dhclient.conf] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Check if /etc/dhcp/dhclient.conf exists] *****************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Target dhclient conf file for /etc/dhcp/dhclient.conf] ***************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Target dhclient hook file for Red Hat family] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Target dhclient hook file for Debian family] *************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Generate search domains to resolvconf] *******************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Pick coredns cluster IP or default resolver] *************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Generate nameservers for resolvconf, including cluster DNS] **********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Generate nameservers for resolvconf, not including cluster DNS] ******************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Gather os specific variables] ****************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/kubernetes/preinstall/vars/../vars/debian.yml)
ok: [node2] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/kubernetes/preinstall/vars/../vars/debian.yml)

TASK [kubernetes/preinstall : Set etcd vars if using kubeadm mode] *********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Check /usr readonly] *************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Set alternate flexvolume path] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if either kube_control_plane or kube_node group is empty] *******************************************************************************************************************************************************************************************************************************
ok: [node1] => (item=kube_control_plane) => {
    "ansible_loop_var": "item",
    "changed": false,
    "item": "kube_control_plane",
    "msg": "All assertions passed"
}
ok: [node1] => (item=kube_node) => {
    "ansible_loop_var": "item",
    "changed": false,
    "item": "kube_node",
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Stop if etcd group is empty in external etcd mode] *******************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Stop if non systemd OS type] *****************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}
ok: [node2] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Stop if the os does not support] *************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}
ok: [node2] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Stop if unknown network plugin] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}
ok: [node2] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Stop if unsupported version of Kubernetes] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}
ok: [node2] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Stop if known booleans are set as strings (Use JSON format on CLI: -e "{'key': true }")] *****************************************************************************************************************************************************************************************************
ok: [node1] => (item={'name': 'download_run_once', 'value': False}) => {
    "ansible_loop_var": "item",
    "changed": false,
    "item": {
        "name": "download_run_once",
        "value": false
    },
    "msg": "All assertions passed"
}
ok: [node1] => (item={'name': 'deploy_netchecker', 'value': False}) => {
    "ansible_loop_var": "item",
    "changed": false,
    "item": {
        "name": "deploy_netchecker",
        "value": false
    },
    "msg": "All assertions passed"
}
ok: [node1] => (item={'name': 'download_always_pull', 'value': False}) => {
    "ansible_loop_var": "item",
    "changed": false,
    "item": {
        "name": "download_always_pull",
        "value": false
    },
    "msg": "All assertions passed"
}
ok: [node1] => (item={'name': 'helm_enabled', 'value': False}) => {
    "ansible_loop_var": "item",
    "changed": false,
    "item": {
        "name": "helm_enabled",
        "value": false
    },
    "msg": "All assertions passed"
}
ok: [node1] => (item={'name': 'openstack_lbaas_enabled', 'value': False}) => {
    "ansible_loop_var": "item",
    "changed": false,
    "item": {
        "name": "openstack_lbaas_enabled",
        "value": false
    },
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Stop if even number of etcd hosts] ***********************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}
skipping: [node2]

TASK [kubernetes/preinstall : Stop if memory is too small for masters] *****************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}
ok: [node2] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Stop if memory is too small for nodes] *******************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}
ok: [node2] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Guarantee that enough network address space is available for all pods] ***********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if ip var does not match local ips] *****************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}
ok: [node2] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Ensure ping package] *************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Stop if access_ip is not pingable] ***********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Stop if RBAC is not enabled when dashboard is enabled] ***************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if RBAC is not enabled when OCI cloud controller is enabled] ****************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if kernel version is too low] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if bad hostname] ************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}
ok: [node2] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Check cloud_provider value] ******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Check that kube_service_addresses is a network range] ****************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Check that kube_pods_subnet is a network range] **********************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Check that kube_pods_subnet does not collide with kube_service_addresses] ********************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Check that IP range is enough for the nodes] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/preinstall : Stop if unknown dns mode] ********************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Stop if unknown kube proxy mode] *************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Stop if unknown cert_management] *************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Stop if unknown resolvconf_mode] *************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Stop if etcd deployment type is not host, docker or kubeadm] *********************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}
skipping: [node2]

TASK [kubernetes/preinstall : Stop if container manager is not docker, crio or containerd] *********************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Stop if etcd deployment type is not host or kubeadm when container_manager != docker] ********************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}
skipping: [node2]

TASK [kubernetes/preinstall : Warn the user if they are still using `etcd_kubeadm_enabled`] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/preinstall : Stop if `etcd_kubeadm_enabled` is defined and `etcd_deployment_type` is not `kubeadm` or `host`] *********************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/preinstall : Stop if download_localhost is enabled but download_run_once is not] **************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if kata_containers_enabled is enabled when container_manager is docker] *****************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if gvisor_enabled is enabled when container_manager is not containerd] ******************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if download_localhost is enabled for Flatcar Container Linux] ***************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Ensure minimum containerd version] ***********************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : Stop if using deprecated containerd_config variable] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if auto_renew_certificates is enabled when certificates are managed externally (kube_external_ca_mode is true)] *************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if using deprecated comma separated list for admission plugins] *************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Create kubernetes directories] ***************************************************************************************************************************************************************************************************************************************************************
changed: [node1] => (item=/etc/kubernetes)
changed: [node2] => (item=/etc/kubernetes)
changed: [node1] => (item=/etc/kubernetes/manifests)
changed: [node2] => (item=/etc/kubernetes/manifests)
changed: [node2] => (item=/usr/local/bin/kubernetes-scripts)
changed: [node1] => (item=/usr/local/bin/kubernetes-scripts)
changed: [node2] => (item=/usr/libexec/kubernetes/kubelet-plugins/volume/exec)
changed: [node1] => (item=/usr/libexec/kubernetes/kubelet-plugins/volume/exec)

TASK [kubernetes/preinstall : Create other directories of root owner] ******************************************************************************************************************************************************************************************************************************************************
changed: [node1] => (item=/etc/kubernetes/ssl)
changed: [node2] => (item=/etc/kubernetes/ssl)
ok: [node1] => (item=/usr/local/bin)
ok: [node2] => (item=/usr/local/bin)

TASK [kubernetes/preinstall : Check if kubernetes kubeadm compat cert dir exists] ******************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Create kubernetes kubeadm compat cert dir (kubernetes/kubeadm issue 1498)] *******************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/preinstall : Create cni directories] **********************************************************************************************************************************************************************************************************************************************************************
changed: [node1] => (item=/etc/cni/net.d)
changed: [node2] => (item=/etc/cni/net.d)
changed: [node1] => (item=/opt/cni/bin)
changed: [node2] => (item=/opt/cni/bin)

TASK [kubernetes/preinstall : Create calico cni directories] ***************************************************************************************************************************************************************************************************************************************************************
changed: [node1] => (item=/var/lib/calico)
changed: [node2] => (item=/var/lib/calico)

TASK [kubernetes/preinstall : Create local volume provisioner directories] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=local-storage)
skipping: [node1]
skipping: [node2] => (item=local-storage)
skipping: [node2]

TASK [kubernetes/preinstall : Create temporary resolveconf cloud init file] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Add domain/search/nameservers/options to resolv.conf] ****************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/preinstall : Remove search/domain/nameserver options before block] ****************************************************************************************************************************************************************************************************************************************
ok: [node1] => (item=['/etc/resolv.conf', 'search\\s'])
ok: [node2] => (item=['/etc/resolv.conf', 'search\\s'])
ok: [node2] => (item=['/etc/resolv.conf', 'nameserver\\s'])
ok: [node1] => (item=['/etc/resolv.conf', 'nameserver\\s'])
ok: [node2] => (item=['/etc/resolv.conf', 'domain\\s'])
ok: [node1] => (item=['/etc/resolv.conf', 'domain\\s'])
ok: [node2] => (item=['/etc/resolv.conf', 'options\\s'])
ok: [node1] => (item=['/etc/resolv.conf', 'options\\s'])

TASK [kubernetes/preinstall : Remove search/domain/nameserver options after block] *****************************************************************************************************************************************************************************************************************************************
changed: [node1] => (item=['/etc/resolv.conf', 'search\\s'])
changed: [node2] => (item=['/etc/resolv.conf', 'search\\s'])
changed: [node1] => (item=['/etc/resolv.conf', 'nameserver\\s'])
changed: [node2] => (item=['/etc/resolv.conf', 'nameserver\\s'])
changed: [node2] => (item=['/etc/resolv.conf', 'domain\\s'])
changed: [node1] => (item=['/etc/resolv.conf', 'domain\\s'])
ok: [node2] => (item=['/etc/resolv.conf', 'options\\s'])
ok: [node1] => (item=['/etc/resolv.conf', 'options\\s'])

TASK [kubernetes/preinstall : Get temporary resolveconf cloud init file content] *******************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Persist resolvconf cloud init file] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Create systemd-resolved drop-in directory] ***************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Write Kubespray DNS settings to systemd-resolved] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : NetworkManager | Ensure NetworkManager conf.d dir] *******************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : NetworkManager | Prevent NetworkManager from managing Calico interfaces (cali*/tunl*/vxlan.calico)] ******************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : NetworkManager | Prevent NetworkManager from managing K8S interfaces (kube-ipvs0/nodelocaldns)] **********************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : NetworkManager | Add nameservers to NM configuration] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Set default dns if remove_default_searchdomains is false] ************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : NetworkManager | Add DNS search to NM configuration] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : NetworkManager | Add DNS options to NM configuration] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Update package management cache (zypper) - SUSE] *********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Add Debian Backports apt repo] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Set libseccomp2 pin priority to apt_preferences on Debian buster] ****************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Update package management cache (APT)] *******************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Remove legacy docker repo file] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Install python3-dnf for latest RedHat versions] **********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Install epel-release on RHEL derivatives] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Update common_required_pkgs with ipvsadm when kube_proxy_mode is ipvs] ***********************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Install packages requirements] ***************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/preinstall : Install ipvsadm for ClearLinux] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Confirm selinux deployed] ********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Set selinux policy] **************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Disable IPv6 DNS lookup] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Clean previously used sysctl file locations] *************************************************************************************************************************************************************************************************************************************************
ok: [node1] => (item=ipv4-ip_forward.conf)
ok: [node2] => (item=ipv4-ip_forward.conf)
ok: [node1] => (item=bridge-nf-call.conf)
ok: [node2] => (item=bridge-nf-call.conf)

TASK [kubernetes/preinstall : Stat sysctl file configuration] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Change sysctl file path to link source if linked] ********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Make sure sysctl file path folder exists] ****************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Enable ip forwarding] ************************************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [kubernetes/preinstall : Enable ipv6 forwarding] **********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Check if we need to set fs.may_detach_mounts] ************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Set fs.may_detach_mounts if needed] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Ensure kube-bench parameters are set] ********************************************************************************************************************************************************************************************************************************************************
changed: [node1] => (item={'name': 'kernel.keys.root_maxbytes', 'value': 25000000})
changed: [node2] => (item={'name': 'kernel.keys.root_maxbytes', 'value': 25000000})
changed: [node1] => (item={'name': 'kernel.keys.root_maxkeys', 'value': 1000000})
changed: [node2] => (item={'name': 'kernel.keys.root_maxkeys', 'value': 1000000})
changed: [node1] => (item={'name': 'kernel.panic', 'value': 10})
changed: [node2] => (item={'name': 'kernel.panic', 'value': 10})
changed: [node1] => (item={'name': 'kernel.panic_on_oops', 'value': 1})
changed: [node2] => (item={'name': 'kernel.panic_on_oops', 'value': 1})
changed: [node2] => (item={'name': 'vm.overcommit_memory', 'value': 1})
changed: [node1] => (item={'name': 'vm.overcommit_memory', 'value': 1})
changed: [node2] => (item={'name': 'vm.panic_on_oom', 'value': 0})
changed: [node1] => (item={'name': 'vm.panic_on_oom', 'value': 0})

TASK [kubernetes/preinstall : Check dummy module] **************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/preinstall : Set additional sysctl variables] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Disable fapolicyd service] *******************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Ensure NTP package] **************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Disable systemd-timesyncd] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Set fact NTP settings] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Generate NTP configuration file.] ************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop the NTP Deamon For Sync Immediately] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Force Sync NTP Immediately] ******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Ensure NTP service is started and enabled] ***************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Ensure tzdata package] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Set timezone] ********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Hosts | create hosts list from inventory] ****************************************************************************************************************************************************************************************************************************************************
ok: [node1 -> localhost]

TASK [kubernetes/preinstall : Hosts | populate inventory into hosts file] **************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/preinstall : Hosts | populate kubernetes loadbalancer address into hosts file] ****************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Hosts | Retrieve hosts file content] *********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Hosts | Extract existing entries for localhost from hosts file] ******************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=127.0.0.1    localhost)
skipping: [node1] => (item=127.0.1.1    debian10.it-academy.by  debian10)
skipping: [node1] => (item=)
skipping: [node1] => (item=# The following lines are desirable for IPv6 capable hosts)
ok: [node1] => (item=::1     localhost ip6-localhost ip6-loopback)
skipping: [node1] => (item=ff02::1 ip6-allnodes)
skipping: [node1] => (item=ff02::2 ip6-allrouters)
skipping: [node1] => (item=# Ansible inventory hosts BEGIN)
skipping: [node2] => (item=127.0.0.1    localhost)
skipping: [node1] => (item=192.168.208.5 node1.cluster.local node1 )
skipping: [node2] => (item=127.0.1.1    debian10.it-academy.by  debian10)
skipping: [node1] => (item=192.168.208.6 node2.cluster.local node2 )
skipping: [node1] => (item=# Ansible inventory hosts END)
skipping: [node2] => (item=)
skipping: [node2] => (item=# The following lines are desirable for IPv6 capable hosts)
ok: [node2] => (item=::1     localhost ip6-localhost ip6-loopback)
skipping: [node2] => (item=ff02::1 ip6-allnodes)
skipping: [node2] => (item=ff02::2 ip6-allrouters)
skipping: [node2] => (item=# Ansible inventory hosts BEGIN)
skipping: [node2] => (item=192.168.208.5 node1.cluster.local node1 )
skipping: [node2] => (item=192.168.208.6 node2.cluster.local node2 )
skipping: [node2] => (item=# Ansible inventory hosts END)

TASK [kubernetes/preinstall : Hosts | Update target hosts file entries dict with required entries] *************************************************************************************************************************************************************************************************************************
ok: [node1] => (item={'key': '127.0.0.1', 'value': {'expected': ['localhost', 'localhost.localdomain']}})
ok: [node1] => (item={'key': '::1', 'value': {'expected': ['localhost6', 'localhost6.localdomain'], 'unexpected': ['localhost', 'localhost.localdomain']}})
ok: [node2] => (item={'key': '127.0.0.1', 'value': {'expected': ['localhost', 'localhost.localdomain']}})
ok: [node2] => (item={'key': '::1', 'value': {'expected': ['localhost6', 'localhost6.localdomain'], 'unexpected': ['localhost', 'localhost.localdomain']}})

TASK [kubernetes/preinstall : Hosts | Update (if necessary) hosts file] ****************************************************************************************************************************************************************************************************************************************************
changed: [node1] => (item={'key': '127.0.0.1', 'value': ['localhost', 'localhost.localdomain']})
changed: [node2] => (item={'key': '127.0.0.1', 'value': ['localhost', 'localhost.localdomain']})
changed: [node1] => (item={'key': '::1', 'value': ['ip6-localhost', 'ip6-loopback', 'localhost6', 'localhost6.localdomain']})
changed: [node2] => (item={'key': '::1', 'value': ['ip6-localhost', 'ip6-loopback', 'localhost6', 'localhost6.localdomain']})

TASK [kubernetes/preinstall : Update facts] ********************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Configure dhclient to supersede search/domain/nameservers] ***********************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/preinstall : Configure dhclient hooks for resolv.conf (non-RH)] *******************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/preinstall : Configure dhclient hooks for resolv.conf (RH-only)] ******************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Remove kubespray specific config from dhclient config] ***************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Remove kubespray specific dhclient hook] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Flush handlers] ******************************************************************************************************************************************************************************************************************************************************************************

TASK [kubernetes/preinstall : Flush handlers] ******************************************************************************************************************************************************************************************************************************************************************************

RUNNING HANDLER [kubernetes/preinstall : Preinstall | reload kubelet] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

RUNNING HANDLER [kubernetes/preinstall : Preinstall | kube-apiserver configured] *******************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

RUNNING HANDLER [kubernetes/preinstall : Preinstall | kube-controller configured] ******************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

RUNNING HANDLER [kubernetes/preinstall : Preinstall | restart kube-controller-manager docker] ******************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

RUNNING HANDLER [kubernetes/preinstall : Preinstall | restart kube-controller-manager crio/containerd] *********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

RUNNING HANDLER [kubernetes/preinstall : Preinstall | restart kube-apiserver docker] ***************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

RUNNING HANDLER [kubernetes/preinstall : Preinstall | restart kube-apiserver crio/containerd] ******************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

RUNNING HANDLER [kubernetes/preinstall : Preinstall | wait for the apiserver to be running] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Check if we are running inside a Azure VM] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Install growpart] ****************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Gather mounts facts] *************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Search root filesystem device] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Check if growpart needs to be run] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Check fs type] *******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Run growpart] ********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Run xfs_growfs] ******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [Run calico checks] ***************************************************************************************************************************************************************************************************************************************************************************************************

TASK [network_plugin/calico : Stop if legacy encapsulation variables are detected (ipip)] **********************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [network_plugin/calico : Stop if legacy encapsulation variables are detected (ipip_mode)] *****************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [network_plugin/calico : Stop if legacy encapsulation variables are detected (calcio_ipam_autoallocateblocks)] ********************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [network_plugin/calico : Stop if incompatible network plugin and cloudprovider] ***************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Stop if supported Calico versions] ***********************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [network_plugin/calico : Check if calicoctl.sh exists] ****************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [network_plugin/calico : Check if calico ready] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Get current calico version] ******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Assert that current calico version is enough for upgrade] ************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Check that cluster_id is set if calico_rr enabled] *******************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Check that calico_rr nodes are in k8s_cluster group] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Check vars defined correctly] ****************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [network_plugin/calico : Check calico network backend defined correctly] **********************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [network_plugin/calico : Check ipip and vxlan mode defined correctly] *************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [network_plugin/calico : Check ipip and vxlan mode if simultaneously enabled] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Check ipip and vxlan mode if simultaneously enabled] *****************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [network_plugin/calico : Get Calico default-pool configuration] *******************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [network_plugin/calico : Set calico_pool_conf] ************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Check if inventory match current cluster configuration] **************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Check kdd calico_datastore if calico_apiserver_enabled] **************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Check kdd calico_datastore if typha_enabled] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Check ipip mode is Never for calico ipv6] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [container-engine/validate-container-engine : Validate-container-engine | check if fedora coreos] *********************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/validate-container-engine : Validate-container-engine | set is_ostree] ******************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/validate-container-engine : Ensure kubelet systemd unit exists] *************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/validate-container-engine : Populate service facts] *************************************************************************************************************************************************************************************************************************************************
ok: [node2]
ok: [node1]

TASK [container-engine/validate-container-engine : Check if containerd is installed] ***************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/validate-container-engine : Check if docker is installed] *******************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/validate-container-engine : Check if crio is installed] *********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [Drain node] **********************************************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/validate-container-engine : Stop kubelet] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd-common : Containerd-common | check if fedora coreos] *************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd-common : Containerd-common | set is_ostree] **********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd-common : Containerd-common | gather os specific variables] *******************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/container-engine/containerd/vars/../vars/debian.yml)
skipping: [node1]
skipping: [node2] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/container-engine/containerd/vars/../vars/debian.yml)
skipping: [node2]

TASK [container-engine/runc : Runc | check if fedora coreos] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Runc | set is_ostree] ************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Runc | Uninstall runc package managed by package manager] ************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Runc | Download runc binary] *****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Copy runc binary from download dir] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Runc | Remove orphaned binary] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/crictl : Install crictl] ****************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/nerdctl : Nerdctl | Download nerdctl] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/nerdctl : Nerdctl | Copy nerdctl binary from download dir] ******************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/nerdctl : Nerdctl | Create configuration dir] *******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/nerdctl : Nerdctl | Install nerdctl configuration] **************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd : Containerd | Remove containerd repository for RedHat os family] ************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd : Containerd | Remove containerd repository for Debian os family] ************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=)
skipping: [node1]
skipping: [node2] => (item=)
skipping: [node2]

TASK [container-engine/containerd : Containerd | Stop containerd service] **************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd : Containerd | Remove configuration files] ***********************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/etc/systemd/system/containerd.service)
skipping: [node1] => (item=/etc/systemd/system/containerd.service.d)
skipping: [node1] => (item=/etc/containerd)
skipping: [node1] => (item=/var/lib/containerd)
skipping: [node1] => (item=/run/containerd)
skipping: [node1]
skipping: [node2] => (item=/etc/systemd/system/containerd.service)
skipping: [node2] => (item=/etc/systemd/system/containerd.service.d)
skipping: [node2] => (item=/etc/containerd)
skipping: [node2] => (item=/var/lib/containerd)
skipping: [node2] => (item=/run/containerd)
skipping: [node2]

TASK [Drain node] **********************************************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/validate-container-engine : Stop kubelet] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd-common : Containerd-common | check if fedora coreos] *************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd-common : Containerd-common | set is_ostree] **********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd-common : Containerd-common | gather os specific variables] *******************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/container-engine/docker/vars/../vars/debian.yml)
skipping: [node1]
skipping: [node2] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/container-engine/docker/vars/../vars/debian.yml)
skipping: [node2]

TASK [container-engine/docker-storage : Docker-storage-setup | install git and make] ***************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=git)
skipping: [node1] => (item=make)
skipping: [node1]
skipping: [node2] => (item=git)
skipping: [node2] => (item=make)
skipping: [node2]

TASK [container-engine/docker-storage : Docker-storage-setup | docker-storage-setup sysconfig template] ********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker-storage : Docker-storage-override-directory | docker service storage-setup override dir] *****************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker-storage : Docker-storage-override | docker service storage-setup override file] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker-storage : Docker-storage-setup | install lvm2] ***********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker-storage : Docker-storage-setup | install and run container-storage-setup] ********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Docker | Get package facts] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Docker | Find docker packages] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Docker | Stop all running container] *******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Reset | remove all containers] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Docker | Stop docker service] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=docker)
skipping: [node1] => (item=docker.socket)
skipping: [node1] => (item=containerd)
skipping: [node1]
skipping: [node2] => (item=docker)
skipping: [node2] => (item=docker.socket)
skipping: [node2] => (item=containerd)
skipping: [node2]

TASK [container-engine/docker : Docker | Remove dpkg hold] *****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Docker | Remove docker package] ************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Docker | ensure docker-ce repository is removed] *******************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=)
skipping: [node1]
skipping: [node2] => (item=)
skipping: [node2]

TASK [container-engine/docker : Docker | Remove docker repository on Fedora] ***********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Docker | Remove docker repository on RedHat/CentOS/Oracle/AlmaLinux Linux] *****************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Docker | Remove docker configuration files] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/etc/systemd/system/docker.service.d/)
skipping: [node1] => (item=/etc/systemd/system/docker.socket)
skipping: [node1] => (item=/etc/systemd/system/docker.service)
skipping: [node1] => (item=/etc/systemd/system/containerd.service)
skipping: [node1] => (item=/etc/systemd/system/containerd.service.d)
skipping: [node1] => (item=/var/lib/docker)
skipping: [node1] => (item=/etc/docker)
skipping: [node1]
skipping: [node2] => (item=/etc/systemd/system/docker.service.d/)
skipping: [node2] => (item=/etc/systemd/system/docker.socket)
skipping: [node2] => (item=/etc/systemd/system/docker.service)
skipping: [node2] => (item=/etc/systemd/system/containerd.service)
skipping: [node2] => (item=/etc/systemd/system/containerd.service.d)
skipping: [node2] => (item=/var/lib/docker)
skipping: [node2] => (item=/etc/docker)
skipping: [node2]

TASK [container-engine/docker : Docker | systemctl daemon-reload] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [Drain node] **********************************************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/validate-container-engine : Stop kubelet] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Runc | check if fedora coreos] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Runc | set is_ostree] ************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Runc | Uninstall runc package managed by package manager] ************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Runc | Download runc binary] *****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Copy runc binary from download dir] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Runc | Remove orphaned binary] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/crictl : Install crictl] ****************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/skopeo : Skopeo | check if fedora coreos] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/skopeo : Skopeo | set is_ostree] ********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/skopeo : Skopeo | Uninstall skopeo package managed by package manager] ******************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/skopeo : Skopeo | Download skopeo binary] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/skopeo : Copy skopeo binary from download dir] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | include vars/v1.28.yml] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | include vars/v1.29.yml] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : CRI-O | Kubic repo name for debian os family] ***********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : CRI-O | Remove kubic apt repo] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : CRI-O | Remove cri-o apt repo] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : CRI-O | Remove CRI-O kubic yum repo] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : CRI-O | Remove CRI-O kubic yum repo] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : CRI-O | Run yum-clean-metadata] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : CRI-O | Remove crictl] **********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/etc/crictl.yaml)
skipping: [node1] => (item=/usr/local/bin/crictl)
skipping: [node1]
skipping: [node2] => (item=/etc/crictl.yaml)
skipping: [node2] => (item=/usr/local/bin/crictl)
skipping: [node2]

TASK [container-engine/cri-o : CRI-O | Stop crio service] ******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : CRI-O | Remove CRI-O configuration files] ***************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/etc/crio)
skipping: [node1] => (item=/etc/containers)
skipping: [node1] => (item=/etc/systemd/system/crio.service.d)
skipping: [node1]
skipping: [node2] => (item=/etc/crio)
skipping: [node2] => (item=/etc/containers)
skipping: [node2] => (item=/etc/systemd/system/crio.service.d)
skipping: [node2]

TASK [container-engine/cri-o : CRI-O | Remove CRI-O binaries] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/kata-containers : Kata-containers | Download kata binary] *******************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/kata-containers : Kata-containers | Copy kata-containers binary] ************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/kata-containers : Kata-containers | Create config directory] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/kata-containers : Kata-containers | Set configuration] **********************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=configuration-qemu.toml)
skipping: [node1]
skipping: [node2] => (item=configuration-qemu.toml)
skipping: [node2]

TASK [container-engine/kata-containers : Kata-containers | Set containerd bin] *********************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=qemu)
skipping: [node1]
skipping: [node2] => (item=qemu)
skipping: [node2]

TASK [container-engine/kata-containers : Kata-containers | Load vhost kernel modules] **************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=vhost_vsock)
skipping: [node1] => (item=vhost_net)
skipping: [node1]
skipping: [node2] => (item=vhost_vsock)
skipping: [node2] => (item=vhost_net)
skipping: [node2]

TASK [container-engine/kata-containers : Kata-containers | Persist vhost kernel modules] ***********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/gvisor : GVisor | Download runsc binary] ************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/gvisor : GVisor | Download containerd-shim-runsc-v1 binary] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/gvisor : GVisor | Copy binaries] ********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'src': '/tmp/releases/gvisor-runsc-20230807-x86_64', 'dest': 'runsc'})
skipping: [node1] => (item={'src': '/tmp/releases/gvisor-containerd-shim-runsc-v1-20230807-x86_64', 'dest': 'containerd-shim-runsc-v1'})
skipping: [node1]
skipping: [node2] => (item={'src': '/tmp/releases/gvisor-runsc-20230807-x86_64', 'dest': 'runsc'})
skipping: [node2] => (item={'src': '/tmp/releases/gvisor-containerd-shim-runsc-v1-20230807-x86_64', 'dest': 'containerd-shim-runsc-v1'})
skipping: [node2]

TASK [container-engine/crun : Crun | Download crun binary] *****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/crun : Copy crun binary from download dir] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/youki : Youki | Download youki] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/youki : Youki | Copy youki binary from download dir] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Runc | check if fedora coreos] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Runc | set is_ostree] ************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Runc | Uninstall runc package managed by package manager] ************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Runc | Download runc binary] *****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Copy runc binary from download dir] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Runc | Remove orphaned binary] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/crictl : Install crictl] ****************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/skopeo : Skopeo | check if fedora coreos] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/skopeo : Skopeo | set is_ostree] ********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/skopeo : Skopeo | Uninstall skopeo package managed by package manager] ******************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/skopeo : Skopeo | Download skopeo binary] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/skopeo : Copy skopeo binary from download dir] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | include vars/v1.28.yml] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | include vars/v1.29.yml] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | check if fedora coreos] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | set is_ostree] **********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | get ostree version] *****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | Download cri-o] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Check that amzn2-extras.repo exists] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Find docker repo in amzn2-extras.repo file] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Remove docker repository] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Add container-selinux yum repo] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | build a list of crio runtimes with Katacontainers runtimes] *************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | build a list of crio runtimes with crun runtime] ************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | build a list of crio runtimes with youki runtime] ***********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | make sure needed folders exist in the system] ***************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/etc/crio)
skipping: [node1] => (item=/etc/containers)
skipping: [node1] => (item=/etc/systemd/system/crio.service.d)
skipping: [node1]
skipping: [node2] => (item=/etc/crio)
skipping: [node2] => (item=/etc/containers)
skipping: [node2] => (item=/etc/systemd/system/crio.service.d)
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | install cri-o config] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | install config.json] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | copy binaries] **********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | copy service file] ******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | update the bin dir for crio.service file] *******************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | copy default policy] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | copy mounts.conf] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | create directory for oci hooks] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | set overlay driver] *****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'option': 'driver', 'value': '"overlay"'})
skipping: [node1] => (item={'option': 'graphroot', 'value': '"/var/lib/containers/storage"'})
skipping: [node1] => (item={'option': 'runroot', 'value': '"/var/run/containers/storage"'})
skipping: [node1]
skipping: [node2] => (item={'option': 'driver', 'value': '"overlay"'})
skipping: [node2] => (item={'option': 'graphroot', 'value': '"/var/lib/containers/storage"'})
skipping: [node2] => (item={'option': 'runroot', 'value': '"/var/run/containers/storage"'})
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | set metacopy mount options correctly] ***********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | create directory registries configs] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | write registries configs] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | configure unqualified registry settings] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | write cri-o proxy drop-in] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | configure the uid/gid space for user namespaces] ************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/etc/subuid)
skipping: [node1] => (item=/etc/subgid)
skipping: [node1]
skipping: [node2] => (item=/etc/subuid)
skipping: [node2] => (item=/etc/subgid)
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | ensure crio service is started and enabled] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | trigger service restart only when needed] *******************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-o : Cri-o | verify that crio is running] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd-common : Containerd-common | check if fedora coreos] *************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/containerd-common : Containerd-common | set is_ostree] **********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/containerd-common : Containerd-common | gather os specific variables] *******************************************************************************************************************************************************************************************************************************
ok: [node1] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/container-engine/containerd/vars/../vars/debian.yml)
ok: [node2] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/container-engine/containerd/vars/../vars/debian.yml)

TASK [container-engine/runc : Runc | check if fedora coreos] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/runc : Runc | set is_ostree] ************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/runc : Runc | Uninstall runc package managed by package manager] ************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/runc : Runc | Download runc binary] *****************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/container-engine/runc/tasks/../../../download/tasks/download_file.yml for node1, node2

TASK [container-engine/runc : Prep_download | Set a few facts] *************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/runc : Download_file | Show url of file to dowload] *************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "https://github.com/opencontainers/runc/releases/download/v1.1.12/runc.amd64"
}
ok: [node2] => {
    "msg": "https://github.com/opencontainers/runc/releases/download/v1.1.12/runc.amd64"
}

TASK [container-engine/runc : Download_file | Set pathname of cached file] *************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/runc : Download_file | Create dest directory on node] ***********************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [container-engine/runc : Download_file | Create local cache directory] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [container-engine/runc : Download_file | Create cache directory on download_delegate host] ****************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [container-engine/runc : Download_file | Download item] ***************************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [container-engine/runc : Download_file | Copy file back to ansible host file cache] ***********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Download_file | Copy file from cache to nodes, if it is available] ***************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Download_file | Set mode and owner] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Download_file | Extract file archives] *******************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/extract_file.yml for node1, node2

TASK [container-engine/runc : Extract_file | Unpacking archive] ************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/runc : Copy runc binary from download dir] **********************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [container-engine/runc : Runc | Remove orphaned binary] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/crictl : Install crictl] ****************************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/container-engine/crictl/tasks/crictl.yml for node1, node2

TASK [container-engine/crictl : Crictl | Download crictl] ******************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/container-engine/crictl/tasks/../../../download/tasks/download_file.yml for node1, node2

TASK [container-engine/crictl : Prep_download | Set a few facts] ***********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/crictl : Download_file | Show url of file to dowload] ***********************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "https://github.com/kubernetes-sigs/cri-tools/releases/download/v1.29.0/crictl-v1.29.0-linux-amd64.tar.gz"
}
ok: [node2] => {
    "msg": "https://github.com/kubernetes-sigs/cri-tools/releases/download/v1.29.0/crictl-v1.29.0-linux-amd64.tar.gz"
}

TASK [container-engine/crictl : Download_file | Set pathname of cached file] ***********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/crictl : Download_file | Create dest directory on node] *********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/crictl : Download_file | Create local cache directory] **********************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [container-engine/crictl : Download_file | Create cache directory on download_delegate host] **************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [container-engine/crictl : Download_file | Download item] *************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [container-engine/crictl : Download_file | Copy file back to ansible host file cache] *********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/crictl : Download_file | Copy file from cache to nodes, if it is available] *************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/crictl : Download_file | Set mode and owner] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/crictl : Download_file | Extract file archives] *****************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/extract_file.yml for node1, node2

TASK [container-engine/crictl : Extract_file | Unpacking archive] **********************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [container-engine/crictl : Install crictl config] *********************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [container-engine/crictl : Copy crictl binary from download dir] ******************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [container-engine/nerdctl : Nerdctl | Download nerdctl] ***************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/container-engine/nerdctl/tasks/../../../download/tasks/download_file.yml for node1, node2

TASK [container-engine/nerdctl : Prep_download | Set a few facts] **********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/nerdctl : Download_file | Show url of file to dowload] **********************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "https://github.com/containerd/nerdctl/releases/download/v1.7.1/nerdctl-1.7.1-linux-amd64.tar.gz"
}
ok: [node2] => {
    "msg": "https://github.com/containerd/nerdctl/releases/download/v1.7.1/nerdctl-1.7.1-linux-amd64.tar.gz"
}

TASK [container-engine/nerdctl : Download_file | Set pathname of cached file] **********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/nerdctl : Download_file | Create dest directory on node] ********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/nerdctl : Download_file | Create local cache directory] *********************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [container-engine/nerdctl : Download_file | Create cache directory on download_delegate host] *************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [container-engine/nerdctl : Download_file | Download item] ************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [container-engine/nerdctl : Download_file | Copy file back to ansible host file cache] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/nerdctl : Download_file | Copy file from cache to nodes, if it is available] ************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/nerdctl : Download_file | Set mode and owner] *******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/nerdctl : Download_file | Extract file archives] ****************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/extract_file.yml for node1, node2

TASK [container-engine/nerdctl : Extract_file | Unpacking archive] *********************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [container-engine/nerdctl : Nerdctl | Copy nerdctl binary from download dir] ******************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [container-engine/nerdctl : Nerdctl | Create configuration dir] *******************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [container-engine/nerdctl : Nerdctl | Install nerdctl configuration] **************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [container-engine/containerd : Fail containerd setup if distribution is not supported] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd : Containerd | Remove any package manager controlled containerd package] *****************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/containerd : Containerd | Remove containerd repository] *********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd : Containerd | Remove containerd repository] *********************************************************************************************************************************************************************************************************************************************
ok: [node2] => (item=deb https://download.docker.com/linux/debian buster stable
)
ok: [node1] => (item=deb https://download.docker.com/linux/debian buster stable
)

TASK [container-engine/containerd : Containerd | Download containerd] ******************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/container-engine/containerd/tasks/../../../download/tasks/download_file.yml for node1, node2

TASK [container-engine/containerd : Prep_download | Set a few facts] *******************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/containerd : Download_file | Show url of file to dowload] *******************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "https://github.com/containerd/containerd/releases/download/v1.7.13/containerd-1.7.13-linux-amd64.tar.gz"
}
ok: [node2] => {
    "msg": "https://github.com/containerd/containerd/releases/download/v1.7.13/containerd-1.7.13-linux-amd64.tar.gz"
}

TASK [container-engine/containerd : Download_file | Set pathname of cached file] *******************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/containerd : Download_file | Create dest directory on node] *****************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/containerd : Download_file | Create local cache directory] ******************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [container-engine/containerd : Download_file | Create cache directory on download_delegate host] **********************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [container-engine/containerd : Download_file | Download item] *********************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [container-engine/containerd : Download_file | Copy file back to ansible host file cache] *****************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd : Download_file | Copy file from cache to nodes, if it is available] *********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd : Download_file | Set mode and owner] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd : Download_file | Extract file archives] *************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/extract_file.yml for node1, node2

TASK [container-engine/containerd : Extract_file | Unpacking archive] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd : Containerd | Unpack containerd archive] ************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [container-engine/containerd : Containerd | Remove orphaned binary] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1] => (item=containerd)
ok: [node2] => (item=containerd)
ok: [node1] => (item=containerd-shim)
ok: [node2] => (item=containerd-shim)
ok: [node1] => (item=containerd-shim-runc-v1)
ok: [node2] => (item=containerd-shim-runc-v1)
ok: [node1] => (item=containerd-shim-runc-v2)
ok: [node2] => (item=containerd-shim-runc-v2)
ok: [node1] => (item=ctr)
ok: [node2] => (item=ctr)

TASK [container-engine/containerd : Containerd | Generate systemd service for containerd] **********************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [container-engine/containerd : Containerd | Ensure containerd directories exist] **************************************************************************************************************************************************************************************************************************************
changed: [node1] => (item=/etc/systemd/system/containerd.service.d)
changed: [node2] => (item=/etc/systemd/system/containerd.service.d)
changed: [node1] => (item=/etc/containerd)
changed: [node2] => (item=/etc/containerd)
changed: [node1] => (item=/var/lib/containerd)
changed: [node2] => (item=/var/lib/containerd)
changed: [node1] => (item=/run/containerd)
changed: [node2] => (item=/run/containerd)

TASK [container-engine/containerd : Containerd | Write containerd proxy drop-in] *******************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd : Containerd | Generate default base_runtime_spec] ***************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/containerd : Containerd | Store generated default base_runtime_spec] ********************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/containerd : Containerd | Write base_runtime_specs] *************************************************************************************************************************************************************************************************************************************************
changed: [node1] => (item={'key': 'cri-base.json', 'value': {'ociVersion': '1.1.0', 'process': {'user': {'uid': 0, 'gid': 0}, 'cwd': '/', 'capabilities': {'bounding': ['CAP_CHOWN', 'CAP_DAC_OVERRIDE', 'CAP_FSETID', 'CAP_FOWNER', 'CAP_MKNOD', 'CAP_NET_RAW', 'CAP_SETGID', 'CAP_SETUID', 'CAP_SETFCAP', 'CAP_SETPCAP', 'CAP_NET_BIND_SERVICE', 'CAP_SYS_CHROOT', 'CAP_KILL', 'CAP_AUDIT_WRITE'], 'effective': ['CAP_CHOWN', 'CAP_DAC_OVERRIDE', 'CAP_FSETID', 'CAP_FOWNER', 'CAP_MKNOD', 'CAP_NET_RAW', 'CAP_SETGID', 'CAP_SETUID', 'CAP_SETFCAP', 'CAP_SETPCAP', 'CAP_NET_BIND_SERVICE', 'CAP_SYS_CHROOT', 'CAP_KILL', 'CAP_AUDIT_WRITE'], 'permitted': ['CAP_CHOWN', 'CAP_DAC_OVERRIDE', 'CAP_FSETID', 'CAP_FOWNER', 'CAP_MKNOD', 'CAP_NET_RAW', 'CAP_SETGID', 'CAP_SETUID', 'CAP_SETFCAP', 'CAP_SETPCAP', 'CAP_NET_BIND_SERVICE', 'CAP_SYS_CHROOT', 'CAP_KILL', 'CAP_AUDIT_WRITE']}, 'rlimits': [{'type': 'RLIMIT_NOFILE', 'hard': 65535, 'soft': 65535}], 'noNewPrivileges': True}, 'root': {'path': 'rootfs'}, 'mounts': [{'destination': '/proc', 'type': 'proc', 'source': 'proc', 'options': ['nosuid', 'noexec', 'nodev']}, {'destination': '/dev', 'type': 'tmpfs', 'source': 'tmpfs', 'options': ['nosuid', 'strictatime', 'mode=755', 'size=65536k']}, {'destination': '/dev/pts', 'type': 'devpts', 'source': 'devpts', 'options': ['nosuid', 'noexec', 'newinstance', 'ptmxmode=0666', 'mode=0620', 'gid=5']}, {'destination': '/dev/shm', 'type': 'tmpfs', 'source': 'shm', 'options': ['nosuid', 'noexec', 'nodev', 'mode=1777', 'size=65536k']}, {'destination': '/dev/mqueue', 'type': 'mqueue', 'source': 'mqueue', 'options': ['nosuid', 'noexec', 'nodev']}, {'destination': '/sys', 'type': 'sysfs', 'source': 'sysfs', 'options': ['nosuid', 'noexec', 'nodev', 'ro']}, {'destination': '/run', 'type': 'tmpfs', 'source': 'tmpfs', 'options': ['nosuid', 'strictatime', 'mode=755', 'size=65536k']}], 'linux': {'resources': {'devices': [{'allow': False, 'access': 'rwm'}]}, 'cgroupsPath': '/default', 'namespaces': [{'type': 'pid'}, {'type': 'ipc'}, {'type': 'uts'}, {'type': 'mount'}, {'type': 'network'}], 'maskedPaths': ['/proc/acpi', '/proc/asound', '/proc/kcore', '/proc/keys', '/proc/latency_stats', '/proc/timer_list', '/proc/timer_stats', '/proc/sched_debug', '/sys/firmware', '/sys/devices/virtual/powercap', '/proc/scsi'], 'readonlyPaths': ['/proc/bus', '/proc/fs', '/proc/irq', '/proc/sys', '/proc/sysrq-trigger']}}})
changed: [node2] => (item={'key': 'cri-base.json', 'value': {'ociVersion': '1.1.0', 'process': {'user': {'uid': 0, 'gid': 0}, 'cwd': '/', 'capabilities': {'bounding': ['CAP_CHOWN', 'CAP_DAC_OVERRIDE', 'CAP_FSETID', 'CAP_FOWNER', 'CAP_MKNOD', 'CAP_NET_RAW', 'CAP_SETGID', 'CAP_SETUID', 'CAP_SETFCAP', 'CAP_SETPCAP', 'CAP_NET_BIND_SERVICE', 'CAP_SYS_CHROOT', 'CAP_KILL', 'CAP_AUDIT_WRITE'], 'effective': ['CAP_CHOWN', 'CAP_DAC_OVERRIDE', 'CAP_FSETID', 'CAP_FOWNER', 'CAP_MKNOD', 'CAP_NET_RAW', 'CAP_SETGID', 'CAP_SETUID', 'CAP_SETFCAP', 'CAP_SETPCAP', 'CAP_NET_BIND_SERVICE', 'CAP_SYS_CHROOT', 'CAP_KILL', 'CAP_AUDIT_WRITE'], 'permitted': ['CAP_CHOWN', 'CAP_DAC_OVERRIDE', 'CAP_FSETID', 'CAP_FOWNER', 'CAP_MKNOD', 'CAP_NET_RAW', 'CAP_SETGID', 'CAP_SETUID', 'CAP_SETFCAP', 'CAP_SETPCAP', 'CAP_NET_BIND_SERVICE', 'CAP_SYS_CHROOT', 'CAP_KILL', 'CAP_AUDIT_WRITE']}, 'rlimits': [{'type': 'RLIMIT_NOFILE', 'hard': 65535, 'soft': 65535}], 'noNewPrivileges': True}, 'root': {'path': 'rootfs'}, 'mounts': [{'destination': '/proc', 'type': 'proc', 'source': 'proc', 'options': ['nosuid', 'noexec', 'nodev']}, {'destination': '/dev', 'type': 'tmpfs', 'source': 'tmpfs', 'options': ['nosuid', 'strictatime', 'mode=755', 'size=65536k']}, {'destination': '/dev/pts', 'type': 'devpts', 'source': 'devpts', 'options': ['nosuid', 'noexec', 'newinstance', 'ptmxmode=0666', 'mode=0620', 'gid=5']}, {'destination': '/dev/shm', 'type': 'tmpfs', 'source': 'shm', 'options': ['nosuid', 'noexec', 'nodev', 'mode=1777', 'size=65536k']}, {'destination': '/dev/mqueue', 'type': 'mqueue', 'source': 'mqueue', 'options': ['nosuid', 'noexec', 'nodev']}, {'destination': '/sys', 'type': 'sysfs', 'source': 'sysfs', 'options': ['nosuid', 'noexec', 'nodev', 'ro']}, {'destination': '/run', 'type': 'tmpfs', 'source': 'tmpfs', 'options': ['nosuid', 'strictatime', 'mode=755', 'size=65536k']}], 'linux': {'resources': {'devices': [{'allow': False, 'access': 'rwm'}]}, 'cgroupsPath': '/default', 'namespaces': [{'type': 'pid'}, {'type': 'ipc'}, {'type': 'uts'}, {'type': 'mount'}, {'type': 'network'}], 'maskedPaths': ['/proc/acpi', '/proc/asound', '/proc/kcore', '/proc/keys', '/proc/latency_stats', '/proc/timer_list', '/proc/timer_stats', '/proc/sched_debug', '/sys/firmware', '/sys/devices/virtual/powercap', '/proc/scsi'], 'readonlyPaths': ['/proc/bus', '/proc/fs', '/proc/irq', '/proc/sys', '/proc/sysrq-trigger']}}})

TASK [container-engine/containerd : Containerd | Copy containerd config file] **********************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [container-engine/containerd : Containerd | Create registry directories] **********************************************************************************************************************************************************************************************************************************************
changed: [node1] => (item={'prefix': 'docker.io', 'mirrors': [{'host': 'https://registry-1.docker.io', 'capabilities': ['pull', 'resolve'], 'skip_verify': False}]})
changed: [node2] => (item={'prefix': 'docker.io', 'mirrors': [{'host': 'https://registry-1.docker.io', 'capabilities': ['pull', 'resolve'], 'skip_verify': False}]})

TASK [container-engine/containerd : Containerd | Write hosts.toml file] ****************************************************************************************************************************************************************************************************************************************************
changed: [node1] => (item={'prefix': 'docker.io', 'mirrors': [{'host': 'https://registry-1.docker.io', 'capabilities': ['pull', 'resolve'], 'skip_verify': False}]})
changed: [node2] => (item={'prefix': 'docker.io', 'mirrors': [{'host': 'https://registry-1.docker.io', 'capabilities': ['pull', 'resolve'], 'skip_verify': False}]})

TASK [container-engine/containerd : Containerd | Flush handlers] ***********************************************************************************************************************************************************************************************************************************************************

TASK [container-engine/containerd : Containerd | Flush handlers] ***********************************************************************************************************************************************************************************************************************************************************

RUNNING HANDLER [container-engine/containerd : Containerd | restart containerd] ********************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

RUNNING HANDLER [container-engine/containerd : Containerd | wait for containerd] *******************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

RUNNING HANDLER [container-engine/nerdctl : Get nerdctl completion] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

RUNNING HANDLER [container-engine/nerdctl : Install nerdctl completion] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

RUNNING HANDLER [container-engine/crictl : Get crictl completion] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

RUNNING HANDLER [container-engine/crictl : Install crictl completion] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd : Containerd | Ensure containerd is started and enabled] *********************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [container-engine/containerd-common : Containerd-common | check if fedora coreos] *************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd-common : Containerd-common | set is_ostree] **********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/containerd-common : Containerd-common | gather os specific variables] *******************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/container-engine/docker/vars/../vars/debian.yml)
skipping: [node1]
skipping: [node2] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/container-engine/docker/vars/../vars/debian.yml)
skipping: [node2]

TASK [container-engine/docker-storage : Docker-storage-setup | install git and make] ***************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=git)
skipping: [node1] => (item=make)
skipping: [node1]
skipping: [node2] => (item=git)
skipping: [node2] => (item=make)
skipping: [node2]

TASK [container-engine/docker-storage : Docker-storage-setup | docker-storage-setup sysconfig template] ********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker-storage : Docker-storage-override-directory | docker service storage-setup override dir] *****************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker-storage : Docker-storage-override | docker service storage-setup override file] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker-storage : Docker-storage-setup | install lvm2] ***********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker-storage : Docker-storage-setup | install and run container-storage-setup] ********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Check if fedora coreos] ********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Set is_ostree] *****************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Set docker_version for openEuler] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Gather os specific variables] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/container-engine/docker/vars/../vars/debian.yml)
skipping: [node1]
skipping: [node2] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/container-engine/docker/vars/../vars/debian.yml)
skipping: [node2]

TASK [container-engine/docker : Warn about Docker version on SUSE] *********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Gather DNS facts] **************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Remove legacy docker repo file] ************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Ensure old versions of Docker are not installed. | Debian] *********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Ensure podman not installed. | RedHat] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Ensure old versions of Docker are not installed. | RedHat] *********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Ensure docker-ce repository public key is installed] ***************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=)
skipping: [node1]
skipping: [node2] => (item=)
skipping: [node2]

TASK [container-engine/docker : Ensure docker-ce repository is enabled] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=)
skipping: [node1]
skipping: [node2] => (item=)
skipping: [node2]

TASK [container-engine/docker : Configure docker repository on Fedora] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Configure docker repository on RedHat/CentOS/OracleLinux/AlmaLinux/KylinLinux] *************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Remove dpkg hold] **************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=containerd.io)
skipping: [node1] => (item=docker-ce)
skipping: [node1] => (item=docker-ce-cli)
skipping: [node1]
skipping: [node2] => (item=containerd.io)
skipping: [node2] => (item=docker-ce)
skipping: [node2] => (item=docker-ce-cli)
skipping: [node2]

TASK [container-engine/docker : Ensure docker packages are installed] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Tell Debian hosts not to change the docker version with apt upgrade] ***********************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=containerd.io)
skipping: [node1] => (item=docker-ce)
skipping: [node1] => (item=docker-ce-cli)
skipping: [node1]
skipping: [node2] => (item=containerd.io)
skipping: [node2] => (item=docker-ce)
skipping: [node2] => (item=docker-ce-cli)
skipping: [node2]

TASK [container-engine/docker : Ensure service is started if docker packages are already present] **************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Flush handlers so we can wait for docker to come up] ***************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [container-engine/docker : Flush handlers so we can wait for docker to come up] ***************************************************************************************************************************************************************************************************************************************
skipping: [node2]

TASK [container-engine/docker : Install docker plugin] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Create docker service systemd directory if it doesn't exist] *******************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Write docker proxy drop-in] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Get systemd version] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Write docker.service systemd file] *********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Write docker options systemd drop-in] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Write docker dns systemd drop-in] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Copy docker orphan clean up script to the node] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Write docker orphan clean up systemd drop-in] **********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/docker : Flush handlers] ****************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [container-engine/docker : Flush handlers] ****************************************************************************************************************************************************************************************************************************************************************************
skipping: [node2]

TASK [container-engine/docker : Ensure docker service is started and enabled] **********************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=docker)
skipping: [node1]
skipping: [node2] => (item=docker)
skipping: [node2]

TASK [container-engine/cri-dockerd : Runc | Download cri-dockerd binary] ***************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-dockerd : Copy cri-dockerd binary from download dir] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [container-engine/cri-dockerd : Generate cri-dockerd systemd unit files] **********************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=cri-dockerd.service)
skipping: [node1] => (item=cri-dockerd.socket)
skipping: [node1]
skipping: [node2] => (item=cri-dockerd.service)
skipping: [node2] => (item=cri-dockerd.socket)
skipping: [node2]

TASK [container-engine/cri-dockerd : Flush handlers] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [container-engine/cri-dockerd : Flush handlers] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node2]

TASK [download : Prep_download | Set a few facts] **************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Prep_download | On localhost, check if passwordless root is possible] *************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Prep_download | On localhost, check if user has access to the container runtime without using sudo] *******************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Prep_download | Parse the outputs of the previous commands] ***********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Prep_download | Check that local user is in group or can become root] *************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Prep_download | Register docker images info] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Prep_download | Create staging directory on remote node] **************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [download : Prep_download | Create local cache for files and images on control node] **********************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download | Get kubeadm binary and list of required images] ************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/prep_kubeadm_images.yml for node1, node2

TASK [download : Prep_kubeadm_images | Check kubeadm version matches kubernetes version] ***********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Prep_kubeadm_images | Download kubeadm binary] ************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_file.yml for node1, node2

TASK [download : Prep_download | Set a few facts] **************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Show url of file to dowload] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "https://dl.k8s.io/release/v1.29.1/bin/linux/amd64/kubeadm"
}
ok: [node2] => {
    "msg": "https://dl.k8s.io/release/v1.29.1/bin/linux/amd64/kubeadm"
}

TASK [download : Download_file | Set pathname of cached file] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Create dest directory on node] ************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Create local cache directory] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Create cache directory on download_delegate host] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Download item] ****************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [download : Download_file | Copy file back to ansible host file cache] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Copy file from cache to nodes, if it is available] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Set mode and owner] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Extract file archives] ********************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/extract_file.yml for node1, node2

TASK [download : Extract_file | Unpacking archive] *************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Prep_kubeadm_images | Create kubeadm config] **************************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [download : Prep_kubeadm_images | Copy kubeadm binary from download dir to system path] *******************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [download : Prep_kubeadm_images | Set kubeadm binary permissions] *****************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Prep_kubeadm_images | Generate list of required images] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [download : Download | Download files / images] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'key': 'netcheck_server', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/mirantis/k8s-netchecker-server', 'tag': 'v1.2.2', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'netcheck_agent', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/mirantis/k8s-netchecker-agent', 'tag': 'v1.2.2', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'netcheck_server', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/mirantis/k8s-netchecker-server', 'tag': 'v1.2.2', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'netcheck_agent', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/mirantis/k8s-netchecker-agent', 'tag': 'v1.2.2', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'etcd', 'value': {'container': False, 'file': True, 'enabled': True, 'version': 'v3.5.10', 'dest': '/tmp/releases/etcd-v3.5.10-linux-amd64.tar.gz', 'repo': 'quay.io/coreos/etcd', 'tag': 'v3.5.10', 'sha256': '26e90d024fa2310bc52bb40e7f2132e81640b55f8fc446c00ae07e30af2a44fd', 'url': 'https://github.com/etcd-io/etcd/releases/download/v3.5.10/etcd-v3.5.10-linux-amd64.tar.gz', 'unarchive': True, 'owner': 'root', 'mode': '0755', 'groups': ['etcd']}})
skipping: [node1] => (item={'key': 'crio', 'value': {'file': True, 'enabled': False, 'version': 'v1.29.1', 'dest': '/tmp/releases/cri-o.amd64.v1.29.1tar.gz', 'sha256': '6ff5af9962bfc079275ecec2b6caf5dbd25bf037fff53e87d67f27c2617432c5', 'url': 'https://storage.googleapis.com/cri-o/artifacts/cri-o.amd64.v1.29.1.tar.gz', 'unarchive': True, 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'cri_dockerd', 'value': {'file': True, 'enabled': False, 'version': '0.3.9', 'dest': '/tmp/releases/cri-dockerd-0.3.9.amd64.tar.gz', 'sha256': 'a6d9b4b796e9eff830311a2349d259507302cb3955dd07b78296b91e40e8b433', 'url': 'https://github.com/Mirantis/cri-dockerd/releases/download/v0.3.9/cri-dockerd-0.3.9.amd64.tgz', 'unarchive': True, 'unarchive_extra_opts': ['--strip=1'], 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'crun', 'value': {'file': True, 'enabled': False, 'version': '1.8.5', 'dest': '/tmp/releases/crun-1.8.5-amd64', 'sha256': '75062fa96a7cabd70e6f6baf1e11da00131584cc74a2ef682a172769178d8731', 'url': 'https://github.com/containers/crun/releases/download/1.8.5/crun-1.8.5-linux-amd64', 'unarchive': False, 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'youki', 'value': {'file': True, 'enabled': False, 'version': '0.1.0', 'dest': '/tmp/releases/youki_0_1_0_linux.tar.gz', 'sha256': 'f00677e9674215b44f140f0c0f4b79b0001c72c073d2c5bb514b7a9dcb13bdbc', 'url': 'https://github.com/containers/youki/releases/download/v0.1.0/youki_0_1_0_linux.tar.gz', 'unarchive': True, 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'kata_containers', 'value': {'enabled': False, 'file': True, 'version': '3.1.3', 'dest': '/tmp/releases/kata-static-3.1.3-amd64.tar.xz', 'sha256': '266c906222c85b67867dea3c9bdb58c6da0b656be3a29f9e0bed227c939f3f26', 'url': 'https://github.com/kata-containers/kata-containers/releases/download/3.1.3/kata-static-3.1.3-x86_64.tar.xz', 'unarchive': False, 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'crio', 'value': {'file': True, 'enabled': False, 'version': 'v1.29.1', 'dest': '/tmp/releases/cri-o.amd64.v1.29.1tar.gz', 'sha256': '6ff5af9962bfc079275ecec2b6caf5dbd25bf037fff53e87d67f27c2617432c5', 'url': 'https://storage.googleapis.com/cri-o/artifacts/cri-o.amd64.v1.29.1.tar.gz', 'unarchive': True, 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'cri_dockerd', 'value': {'file': True, 'enabled': False, 'version': '0.3.9', 'dest': '/tmp/releases/cri-dockerd-0.3.9.amd64.tar.gz', 'sha256': 'a6d9b4b796e9eff830311a2349d259507302cb3955dd07b78296b91e40e8b433', 'url': 'https://github.com/Mirantis/cri-dockerd/releases/download/v0.3.9/cri-dockerd-0.3.9.amd64.tgz', 'unarchive': True, 'unarchive_extra_opts': ['--strip=1'], 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'crun', 'value': {'file': True, 'enabled': False, 'version': '1.8.5', 'dest': '/tmp/releases/crun-1.8.5-amd64', 'sha256': '75062fa96a7cabd70e6f6baf1e11da00131584cc74a2ef682a172769178d8731', 'url': 'https://github.com/containers/crun/releases/download/1.8.5/crun-1.8.5-linux-amd64', 'unarchive': False, 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'gvisor_runsc', 'value': {'enabled': False, 'file': True, 'version': 20230807, 'dest': '/tmp/releases/gvisor-runsc-20230807-x86_64', 'sha256': 'bb5055d820a3698181b593e3f6d2b44e8e957a6df91bea7776fee030c007814f', 'url': 'https://storage.googleapis.com/gvisor/releases/release/20230807/x86_64/runsc', 'unarchive': False, 'owner': 'root', 'mode': 755, 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'youki', 'value': {'file': True, 'enabled': False, 'version': '0.1.0', 'dest': '/tmp/releases/youki_0_1_0_linux.tar.gz', 'sha256': 'f00677e9674215b44f140f0c0f4b79b0001c72c073d2c5bb514b7a9dcb13bdbc', 'url': 'https://github.com/containers/youki/releases/download/v0.1.0/youki_0_1_0_linux.tar.gz', 'unarchive': True, 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'gvisor_containerd_shim', 'value': {'enabled': False, 'file': True, 'version': 20230807, 'dest': '/tmp/releases/gvisor-containerd-shim-runsc-v1-20230807-x86_64', 'sha256': 'fa16b92b3a36665783951fa6abb541bca52983322d135eb1d91ae03b93f4b477', 'url': 'https://storage.googleapis.com/gvisor/releases/release/20230807/x86_64/containerd-shim-runsc-v1', 'unarchive': False, 'owner': 'root', 'mode': 755, 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'kata_containers', 'value': {'enabled': False, 'file': True, 'version': '3.1.3', 'dest': '/tmp/releases/kata-static-3.1.3-amd64.tar.xz', 'sha256': '266c906222c85b67867dea3c9bdb58c6da0b656be3a29f9e0bed227c939f3f26', 'url': 'https://github.com/kata-containers/kata-containers/releases/download/3.1.3/kata-static-3.1.3-x86_64.tar.xz', 'unarchive': False, 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'skopeo', 'value': {'file': True, 'enabled': False, 'version': 'v1.13.2', 'dest': '/tmp/releases/skopeo-v1.13.2-amd64', 'sha256': '2f00be6ee1c4cbfa7f2452be90a1a2ce88fd92a6d0f6a2e9d901bd2087bd9092', 'url': 'https://github.com/lework/skopeo-binary/releases/download/v1.13.2/skopeo-linux-amd64', 'unarchive': False, 'owner': 'root', 'mode': '0755', 'groups': ['kube_control_plane']}})
skipping: [node1] => (item={'key': 'cilium', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/cilium/cilium', 'tag': 'v1.13.4', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'gvisor_runsc', 'value': {'enabled': False, 'file': True, 'version': 20230807, 'dest': '/tmp/releases/gvisor-runsc-20230807-x86_64', 'sha256': 'bb5055d820a3698181b593e3f6d2b44e8e957a6df91bea7776fee030c007814f', 'url': 'https://storage.googleapis.com/gvisor/releases/release/20230807/x86_64/runsc', 'unarchive': False, 'owner': 'root', 'mode': 755, 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'cilium_operator', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/cilium/operator', 'tag': 'v1.13.4', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'gvisor_containerd_shim', 'value': {'enabled': False, 'file': True, 'version': 20230807, 'dest': '/tmp/releases/gvisor-containerd-shim-runsc-v1-20230807-x86_64', 'sha256': 'fa16b92b3a36665783951fa6abb541bca52983322d135eb1d91ae03b93f4b477', 'url': 'https://storage.googleapis.com/gvisor/releases/release/20230807/x86_64/containerd-shim-runsc-v1', 'unarchive': False, 'owner': 'root', 'mode': 755, 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'cilium_hubble_relay', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/cilium/hubble-relay', 'tag': 'v1.13.4', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'cilium_hubble_certgen', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/cilium/certgen', 'tag': 'v0.1.8', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'skopeo', 'value': {'file': True, 'enabled': False, 'version': 'v1.13.2', 'dest': '/tmp/releases/skopeo-v1.13.2-amd64', 'sha256': '2f00be6ee1c4cbfa7f2452be90a1a2ce88fd92a6d0f6a2e9d901bd2087bd9092', 'url': 'https://github.com/lework/skopeo-binary/releases/download/v1.13.2/skopeo-linux-amd64', 'unarchive': False, 'owner': 'root', 'mode': '0755', 'groups': ['kube_control_plane']}})
skipping: [node1] => (item={'key': 'cilium_hubble_ui', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/cilium/hubble-ui', 'tag': 'v0.11.0', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'cilium', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/cilium/cilium', 'tag': 'v1.13.4', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'cilium_hubble_ui_backend', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/cilium/hubble-ui-backend', 'tag': 'v0.11.0', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'cilium_operator', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/cilium/operator', 'tag': 'v1.13.4', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'cilium_hubble_envoy', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/envoyproxy/envoy', 'tag': 'v1.22.5', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'cilium_hubble_relay', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/cilium/hubble-relay', 'tag': 'v1.13.4', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'ciliumcli', 'value': {'enabled': False, 'file': True, 'version': 'v0.15.0', 'dest': '/tmp/releases/cilium-v0.15.0-amd64.tar.gz', 'sha256': '504bbb94b55d4605157b78bf7747cca778888910f8c65729fe69cb94c3d37f5b', 'url': 'https://github.com/cilium/cilium-cli/releases/download/v0.15.0/cilium-linux-amd64.tar.gz', 'unarchive': True, 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'cilium_hubble_certgen', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/cilium/certgen', 'tag': 'v0.1.8', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'multus', 'value': {'enabled': False, 'container': True, 'repo': 'ghcr.io/k8snetworkplumbingwg/multus-cni', 'tag': 'v3.8', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'cilium_hubble_ui', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/cilium/hubble-ui', 'tag': 'v0.11.0', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'flannel', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/flannel/flannel', 'tag': 'v0.22.0', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'cilium_hubble_ui_backend', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/cilium/hubble-ui-backend', 'tag': 'v0.11.0', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'flannel_init', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/flannel/flannel-cni-plugin', 'tag': 'v1.1.2', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'cilium_hubble_envoy', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/envoyproxy/envoy', 'tag': 'v1.22.5', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'ciliumcli', 'value': {'enabled': False, 'file': True, 'version': 'v0.15.0', 'dest': '/tmp/releases/cilium-v0.15.0-amd64.tar.gz', 'sha256': '504bbb94b55d4605157b78bf7747cca778888910f8c65729fe69cb94c3d37f5b', 'url': 'https://github.com/cilium/cilium-cli/releases/download/v0.15.0/cilium-linux-amd64.tar.gz', 'unarchive': True, 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'multus', 'value': {'enabled': False, 'container': True, 'repo': 'ghcr.io/k8snetworkplumbingwg/multus-cni', 'tag': 'v3.8', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'flannel', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/flannel/flannel', 'tag': 'v0.22.0', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'flannel_init', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/flannel/flannel-cni-plugin', 'tag': 'v1.1.2', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'calico_typha', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/calico/typha', 'tag': 'v3.26.4', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'calico_apiserver', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/calico/apiserver', 'tag': 'v3.26.4', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'weave_kube', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/weaveworks/weave-kube', 'tag': '2.8.1', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'weave_npc', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/weaveworks/weave-npc', 'tag': '2.8.1', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'kube_ovn', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/kubeovn/kube-ovn', 'tag': 'v1.11.5', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'kube_router', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/cloudnativelabs/kube-router', 'tag': 'v2.0.0', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'calico_typha', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/calico/typha', 'tag': 'v3.26.4', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'calico_apiserver', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/calico/apiserver', 'tag': 'v3.26.4', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'kube-vip', 'value': {'enabled': False, 'container': True, 'repo': 'ghcr.io/kube-vip/kube-vip', 'tag': 'v0.5.12', 'sha256': '', 'groups': ['kube_control_plane']}})
skipping: [node2] => (item={'key': 'weave_kube', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/weaveworks/weave-kube', 'tag': '2.8.1', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'weave_npc', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/weaveworks/weave-npc', 'tag': '2.8.1', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node1] => (item={'key': 'haproxy', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/library/haproxy', 'tag': '2.8.2-alpine', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node2] => (item={'key': 'kube_ovn', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/kubeovn/kube-ovn', 'tag': 'v1.11.5', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'kube_router', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/cloudnativelabs/kube-router', 'tag': 'v2.0.0', 'sha256': '', 'groups': ['k8s_cluster']}})
skipping: [node2] => (item={'key': 'kube-vip', 'value': {'enabled': False, 'container': True, 'repo': 'ghcr.io/kube-vip/kube-vip', 'tag': 'v0.5.12', 'sha256': '', 'groups': ['kube_control_plane']}})
skipping: [node2] => (item={'key': 'haproxy', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/library/haproxy', 'tag': '2.8.2-alpine', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'helm', 'value': {'enabled': False, 'file': True, 'version': 'v3.13.1', 'dest': '/tmp/releases/helm-v3.13.1/helm-v3.13.1-linux-amd64.tar.gz', 'sha256': '98c363564d00afd0cc3088e8f830f2a0eeb5f28755b3d8c48df89866374a1ed0', 'url': 'https://get.helm.sh/helm-v3.13.1-linux-amd64.tar.gz', 'unarchive': True, 'owner': 'root', 'mode': '0755', 'groups': ['kube_control_plane']}})
skipping: [node1] => (item={'key': 'krew', 'value': {'enabled': False, 'file': True, 'version': 'v0.4.4', 'dest': '/tmp/releases/krew-linux_amd64.tar.gz', 'sha256': 'e471396b0ed4f2be092b4854cc030dfcbb12b86197972e7bef0cb89ad9c72477', 'url': 'https://github.com/kubernetes-sigs/krew/releases/download/v0.4.4/krew-linux_amd64.tar.gz', 'unarchive': True, 'owner': 'root', 'mode': '0755', 'groups': ['kube_control_plane']}})
skipping: [node1] => (item={'key': 'registry', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/library/registry', 'tag': '2.8.1', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'metrics_server', 'value': {'enabled': False, 'container': True, 'repo': 'registry.k8s.io/metrics-server/metrics-server', 'tag': 'v0.7.0', 'sha256': '', 'groups': ['kube_control_plane']}})
skipping: [node2] => (item={'key': 'helm', 'value': {'enabled': False, 'file': True, 'version': 'v3.13.1', 'dest': '/tmp/releases/helm-v3.13.1/helm-v3.13.1-linux-amd64.tar.gz', 'sha256': '98c363564d00afd0cc3088e8f830f2a0eeb5f28755b3d8c48df89866374a1ed0', 'url': 'https://get.helm.sh/helm-v3.13.1-linux-amd64.tar.gz', 'unarchive': True, 'owner': 'root', 'mode': '0755', 'groups': ['kube_control_plane']}})
skipping: [node1] => (item={'key': 'local_volume_provisioner', 'value': {'enabled': False, 'container': True, 'repo': 'registry.k8s.io/sig-storage/local-volume-provisioner', 'tag': 'v2.5.0', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node2] => (item={'key': 'krew', 'value': {'enabled': False, 'file': True, 'version': 'v0.4.4', 'dest': '/tmp/releases/krew-linux_amd64.tar.gz', 'sha256': 'e471396b0ed4f2be092b4854cc030dfcbb12b86197972e7bef0cb89ad9c72477', 'url': 'https://github.com/kubernetes-sigs/krew/releases/download/v0.4.4/krew-linux_amd64.tar.gz', 'unarchive': True, 'owner': 'root', 'mode': '0755', 'groups': ['kube_control_plane']}})
skipping: [node1] => (item={'key': 'cephfs_provisioner', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/external_storage/cephfs-provisioner', 'tag': 'v2.1.0-k8s1.11', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node2] => (item={'key': 'registry', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/library/registry', 'tag': '2.8.1', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'rbd_provisioner', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/external_storage/rbd-provisioner', 'tag': 'v2.1.1-k8s1.11', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node2] => (item={'key': 'metrics_server', 'value': {'enabled': False, 'container': True, 'repo': 'registry.k8s.io/metrics-server/metrics-server', 'tag': 'v0.7.0', 'sha256': '', 'groups': ['kube_control_plane']}})
skipping: [node1] => (item={'key': 'local_path_provisioner', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/rancher/local-path-provisioner', 'tag': 'v0.0.24', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node2] => (item={'key': 'local_volume_provisioner', 'value': {'enabled': False, 'container': True, 'repo': 'registry.k8s.io/sig-storage/local-volume-provisioner', 'tag': 'v2.5.0', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'ingress_nginx_controller', 'value': {'enabled': False, 'container': True, 'repo': 'registry.k8s.io/ingress-nginx/controller', 'tag': 'v1.9.6', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node2] => (item={'key': 'cephfs_provisioner', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/external_storage/cephfs-provisioner', 'tag': 'v2.1.0-k8s1.11', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'ingress_alb_controller', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/amazon/aws-alb-ingress-controller', 'tag': 'v1.1.9', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node2] => (item={'key': 'rbd_provisioner', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/external_storage/rbd-provisioner', 'tag': 'v2.1.1-k8s1.11', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'cert_manager_controller', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/jetstack/cert-manager-controller', 'tag': 'v1.13.2', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node2] => (item={'key': 'local_path_provisioner', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/rancher/local-path-provisioner', 'tag': 'v0.0.24', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'cert_manager_cainjector', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/jetstack/cert-manager-cainjector', 'tag': 'v1.13.2', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node2] => (item={'key': 'ingress_nginx_controller', 'value': {'enabled': False, 'container': True, 'repo': 'registry.k8s.io/ingress-nginx/controller', 'tag': 'v1.9.6', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'cert_manager_webhook', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/jetstack/cert-manager-webhook', 'tag': 'v1.13.2', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node2] => (item={'key': 'ingress_alb_controller', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/amazon/aws-alb-ingress-controller', 'tag': 'v1.1.9', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'csi_attacher', 'value': {'enabled': False, 'container': True, 'repo': 'registry.k8s.io/sig-storage/csi-attacher', 'tag': 'v3.3.0', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node2] => (item={'key': 'cert_manager_controller', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/jetstack/cert-manager-controller', 'tag': 'v1.13.2', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'csi_provisioner', 'value': {'enabled': False, 'container': True, 'repo': 'registry.k8s.io/sig-storage/csi-provisioner', 'tag': 'v3.0.0', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node2] => (item={'key': 'cert_manager_cainjector', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/jetstack/cert-manager-cainjector', 'tag': 'v1.13.2', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'csi_snapshotter', 'value': {'enabled': False, 'container': True, 'repo': 'registry.k8s.io/sig-storage/csi-snapshotter', 'tag': 'v5.0.0', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node2] => (item={'key': 'cert_manager_webhook', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/jetstack/cert-manager-webhook', 'tag': 'v1.13.2', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'snapshot_controller', 'value': {'enabled': False, 'container': True, 'repo': 'registry.k8s.io/sig-storage/snapshot-controller', 'tag': 'v6.3.3', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node2] => (item={'key': 'csi_attacher', 'value': {'enabled': False, 'container': True, 'repo': 'registry.k8s.io/sig-storage/csi-attacher', 'tag': 'v3.3.0', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'csi_resizer', 'value': {'enabled': False, 'container': True, 'repo': 'registry.k8s.io/sig-storage/csi-resizer', 'tag': 'v1.3.0', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'csi_node_driver_registrar', 'value': {'enabled': False, 'container': True, 'repo': 'registry.k8s.io/sig-storage/csi-node-driver-registrar', 'tag': 'v2.4.0', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node2] => (item={'key': 'csi_provisioner', 'value': {'enabled': False, 'container': True, 'repo': 'registry.k8s.io/sig-storage/csi-provisioner', 'tag': 'v3.0.0', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'cinder_csi_plugin', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/k8scloudprovider/cinder-csi-plugin', 'tag': 'v1.22.0', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'aws_ebs_csi_plugin', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/amazon/aws-ebs-csi-driver', 'tag': 'v0.5.0', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node2] => (item={'key': 'csi_snapshotter', 'value': {'enabled': False, 'container': True, 'repo': 'registry.k8s.io/sig-storage/csi-snapshotter', 'tag': 'v5.0.0', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'dashboard', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/kubernetesui/dashboard', 'tag': 'v2.7.0', 'sha256': '', 'groups': ['kube_control_plane']}})
skipping: [node2] => (item={'key': 'snapshot_controller', 'value': {'enabled': False, 'container': True, 'repo': 'registry.k8s.io/sig-storage/snapshot-controller', 'tag': 'v6.3.3', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'dashboard_metrics_scrapper', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/kubernetesui/metrics-scraper', 'tag': 'v1.0.8', 'sha256': '', 'groups': ['kube_control_plane']}})
skipping: [node2] => (item={'key': 'csi_resizer', 'value': {'enabled': False, 'container': True, 'repo': 'registry.k8s.io/sig-storage/csi-resizer', 'tag': 'v1.3.0', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'metallb_speaker', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/metallb/speaker', 'tag': 'v0.13.9', 'sha256': '', 'groups': ['kube_control_plane']}})
skipping: [node2] => (item={'key': 'csi_node_driver_registrar', 'value': {'enabled': False, 'container': True, 'repo': 'registry.k8s.io/sig-storage/csi-node-driver-registrar', 'tag': 'v2.4.0', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'metallb_controller', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/metallb/controller', 'tag': 'v0.13.9', 'sha256': '', 'groups': ['kube_control_plane']}})
skipping: [node2] => (item={'key': 'cinder_csi_plugin', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/k8scloudprovider/cinder-csi-plugin', 'tag': 'v1.22.0', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node1] => (item={'key': 'yq', 'value': {'enabled': False, 'file': True, 'version': 'v4.35.2', 'dest': '/tmp/releases/yq-v4.35.2-amd64', 'sha256': '8afd786b3b8ba8053409c5e7d154403e2d4ed4cf3e93c237462dc9ef75f38c8d', 'url': 'https://github.com/mikefarah/yq/releases/download/v4.35.2/yq_linux_amd64', 'unarchive': False, 'owner': 'root', 'mode': '0755', 'groups': ['kube_control_plane']}})
skipping: [node2] => (item={'key': 'aws_ebs_csi_plugin', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/amazon/aws-ebs-csi-driver', 'tag': 'v0.5.0', 'sha256': '', 'groups': ['kube_node']}})
skipping: [node2] => (item={'key': 'dashboard', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/kubernetesui/dashboard', 'tag': 'v2.7.0', 'sha256': '', 'groups': ['kube_control_plane']}})
skipping: [node2] => (item={'key': 'dashboard_metrics_scrapper', 'value': {'enabled': False, 'container': True, 'repo': 'docker.io/kubernetesui/metrics-scraper', 'tag': 'v1.0.8', 'sha256': '', 'groups': ['kube_control_plane']}})
skipping: [node2] => (item={'key': 'metallb_speaker', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/metallb/speaker', 'tag': 'v0.13.9', 'sha256': '', 'groups': ['kube_control_plane']}})
skipping: [node2] => (item={'key': 'metallb_controller', 'value': {'enabled': False, 'container': True, 'repo': 'quay.io/metallb/controller', 'tag': 'v0.13.9', 'sha256': '', 'groups': ['kube_control_plane']}})
skipping: [node2] => (item={'key': 'yq', 'value': {'enabled': False, 'file': True, 'version': 'v4.35.2', 'dest': '/tmp/releases/yq-v4.35.2-amd64', 'sha256': '8afd786b3b8ba8053409c5e7d154403e2d4ed4cf3e93c237462dc9ef75f38c8d', 'url': 'https://github.com/mikefarah/yq/releases/download/v4.35.2/yq_linux_amd64', 'unarchive': False, 'owner': 'root', 'mode': '0755', 'groups': ['kube_control_plane']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_file.yml for node1 => (item={'key': 'etcd', 'value': {'container': False, 'file': True, 'enabled': True, 'version': 'v3.5.10', 'dest': '/tmp/releases/etcd-v3.5.10-linux-amd64.tar.gz', 'repo': 'quay.io/coreos/etcd', 'tag': 'v3.5.10', 'sha256': '26e90d024fa2310bc52bb40e7f2132e81640b55f8fc446c00ae07e30af2a44fd', 'url': 'https://github.com/etcd-io/etcd/releases/download/v3.5.10/etcd-v3.5.10-linux-amd64.tar.gz', 'unarchive': True, 'owner': 'root', 'mode': '0755', 'groups': ['etcd']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_file.yml for node1, node2 => (item={'key': 'cni', 'value': {'enabled': True, 'file': True, 'version': 'v1.3.0', 'dest': '/tmp/releases/cni-plugins-linux-amd64-v1.3.0.tgz', 'sha256': '754a71ed60a4bd08726c3af705a7d55ee3df03122b12e389fdba4bea35d7dd7e', 'url': 'https://github.com/containernetworking/plugins/releases/download/v1.3.0/cni-plugins-linux-amd64-v1.3.0.tgz', 'unarchive': False, 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_file.yml for node1, node2 => (item={'key': 'kubeadm', 'value': {'enabled': True, 'file': True, 'version': 'v1.29.1', 'dest': '/tmp/releases/kubeadm-v1.29.1-amd64', 'sha256': 'd4d81d9020b550c896376fb9e0586a9f15a332175890d061619b52b3e9bc6cbd', 'url': 'https://dl.k8s.io/release/v1.29.1/bin/linux/amd64/kubeadm', 'unarchive': False, 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_file.yml for node1, node2 => (item={'key': 'kubelet', 'value': {'enabled': True, 'file': True, 'version': 'v1.29.1', 'dest': '/tmp/releases/kubelet-v1.29.1-amd64', 'sha256': '1b1975c58d38be1a99a8bcba4564ac489afd223b0abe9f2ab08bbde89d2412a3', 'url': 'https://dl.k8s.io/release/v1.29.1/bin/linux/amd64/kubelet', 'unarchive': False, 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_file.yml for node1, node2 => (item={'key': 'kubectl', 'value': {'enabled': True, 'file': True, 'version': 'v1.29.1', 'dest': '/tmp/releases/kubectl-v1.29.1-amd64', 'sha256': '69ab3a931e826bf7ac14d38ba7ca637d66a6fcb1ca0e3333a2cafdf15482af9f', 'url': 'https://dl.k8s.io/release/v1.29.1/bin/linux/amd64/kubectl', 'unarchive': False, 'owner': 'root', 'mode': '0755', 'groups': ['kube_control_plane']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_file.yml for node1, node2 => (item={'key': 'crictl', 'value': {'file': True, 'enabled': True, 'version': 'v1.29.0', 'dest': '/tmp/releases/crictl-v1.29.0-linux-amd64.tar.gz', 'sha256': 'd16a1ffb3938f5a19d5c8f45d363bd091ef89c0bc4d44ad16b933eede32fdcbb', 'url': 'https://github.com/kubernetes-sigs/cri-tools/releases/download/v1.29.0/crictl-v1.29.0-linux-amd64.tar.gz', 'unarchive': True, 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_file.yml for node1, node2 => (item={'key': 'runc', 'value': {'file': True, 'enabled': True, 'version': 'v1.1.12', 'dest': '/tmp/releases/runc-v1.1.12.amd64', 'sha256': 'aadeef400b8f05645768c1476d1023f7875b78f52c7ff1967a6dbce236b8cbd8', 'url': 'https://github.com/opencontainers/runc/releases/download/v1.1.12/runc.amd64', 'unarchive': False, 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_file.yml for node1, node2 => (item={'key': 'containerd', 'value': {'enabled': True, 'file': True, 'version': '1.7.13', 'dest': '/tmp/releases/containerd-1.7.13-linux-amd64.tar.gz', 'sha256': 'c2371c009dd8b7738663333d91e5ab50d204f8bcae24201f45d59060d12c3a23', 'url': 'https://github.com/containerd/containerd/releases/download/v1.7.13/containerd-1.7.13-linux-amd64.tar.gz', 'unarchive': False, 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_file.yml for node1, node2 => (item={'key': 'nerdctl', 'value': {'file': True, 'enabled': True, 'version': '1.7.1', 'dest': '/tmp/releases/nerdctl-1.7.1-linux-amd64.tar.gz', 'sha256': '5fc0a6e8c3a71cbba95fbdb6833fb8a7cd8e78f53de10988362d4029c14b905a', 'url': 'https://github.com/containerd/nerdctl/releases/download/v1.7.1/nerdctl-1.7.1-linux-amd64.tar.gz', 'unarchive': True, 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_file.yml for node1, node2 => (item={'key': 'calicoctl', 'value': {'enabled': True, 'file': True, 'version': 'v3.26.4', 'dest': '/tmp/releases/calicoctl-v3.26.4-amd64', 'sha256': '9960357ef6d61eda7abf80bd397544c1952f89d61e5eaf9f6540dae379a3ef61', 'url': 'https://github.com/projectcalico/calico/releases/download/v3.26.4/calicoctl-linux-amd64', 'unarchive': False, 'owner': 'root', 'mode': '0755', 'groups': ['k8s_cluster']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_container.yml for node1, node2 => (item={'key': 'calico_node', 'value': {'enabled': True, 'container': True, 'repo': 'quay.io/calico/node', 'tag': 'v3.26.4', 'sha256': '', 'groups': ['k8s_cluster']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_container.yml for node1, node2 => (item={'key': 'calico_cni', 'value': {'enabled': True, 'container': True, 'repo': 'quay.io/calico/cni', 'tag': 'v3.26.4', 'sha256': '', 'groups': ['k8s_cluster']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_container.yml for node1, node2 => (item={'key': 'calico_flexvol', 'value': {'enabled': True, 'container': True, 'repo': 'quay.io/calico/pod2daemon-flexvol', 'tag': 'v3.26.4', 'sha256': '', 'groups': ['k8s_cluster']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_container.yml for node1, node2 => (item={'key': 'calico_policy', 'value': {'enabled': True, 'container': True, 'repo': 'quay.io/calico/kube-controllers', 'tag': 'v3.26.4', 'sha256': '', 'groups': ['k8s_cluster']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_file.yml for node1, node2 => (item={'key': 'calico_crds', 'value': {'file': True, 'enabled': True, 'version': 'v3.26.4', 'dest': '/tmp/releases/calico-v3.26.4-kdd-crds/v3.26.4.tar.gz', 'sha256': '481e52de684c049f3f7f7bac78f0f6f4ae424d643451adc9e3d3fa9d03fb6d57', 'url': 'https://github.com/projectcalico/calico/archive/v3.26.4.tar.gz', 'unarchive': True, 'unarchive_extra_opts': ['--strip=3', '--wildcards', '*/libcalico-go/config/crd/'], 'owner': 'root', 'mode': '0755', 'groups': ['kube_control_plane']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_container.yml for node1, node2 => (item={'key': 'pod_infra', 'value': {'enabled': True, 'container': True, 'repo': 'registry.k8s.io/pause', 'tag': '3.9', 'sha256': '', 'groups': ['k8s_cluster']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_container.yml for node1, node2 => (item={'key': 'nginx', 'value': {'enabled': True, 'container': True, 'repo': 'docker.io/library/nginx', 'tag': '1.25.2-alpine', 'sha256': '', 'groups': ['kube_node']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_container.yml for node1, node2 => (item={'key': 'coredns', 'value': {'enabled': True, 'container': True, 'repo': 'registry.k8s.io/coredns/coredns', 'tag': 'v1.11.1', 'sha256': '', 'groups': ['k8s_cluster']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_container.yml for node1, node2 => (item={'key': 'nodelocaldns', 'value': {'enabled': True, 'container': True, 'repo': 'registry.k8s.io/dns/k8s-dns-node-cache', 'tag': '1.22.28', 'sha256': '', 'groups': ['k8s_cluster']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_container.yml for node1, node2 => (item={'key': 'dnsautoscaler', 'value': {'enabled': True, 'container': True, 'repo': 'registry.k8s.io/cpa/cluster-proportional-autoscaler', 'tag': 'v1.8.8', 'sha256': '', 'groups': ['kube_control_plane']}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_container.yml for node1, node2 => (item={'key': 'kubeadm_kube-apiserver', 'value': {'repo': 'registry.k8s.io/kube-apiserver', 'tag': 'v1.29.1', 'groups': ['kube_control_plane'], 'enabled': True, 'container': True}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_container.yml for node1, node2 => (item={'key': 'kubeadm_kube-controller-manager', 'value': {'repo': 'registry.k8s.io/kube-controller-manager', 'tag': 'v1.29.1', 'groups': ['kube_control_plane'], 'enabled': True, 'container': True}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_container.yml for node1, node2 => (item={'key': 'kubeadm_kube-scheduler', 'value': {'repo': 'registry.k8s.io/kube-scheduler', 'tag': 'v1.29.1', 'groups': ['kube_control_plane'], 'enabled': True, 'container': True}})
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/download_container.yml for node1, node2 => (item={'key': 'kubeadm_kube-proxy', 'value': {'repo': 'registry.k8s.io/kube-proxy', 'tag': 'v1.29.1', 'groups': ['k8s_cluster'], 'enabled': True, 'container': True}})

TASK [download : Prep_download | Set a few facts] **************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [download : Download_file | Show url of file to dowload] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "https://github.com/etcd-io/etcd/releases/download/v3.5.10/etcd-v3.5.10-linux-amd64.tar.gz"
}

TASK [download : Download_file | Set pathname of cached file] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [download : Download_file | Create dest directory on node] ************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [download : Download_file | Create local cache directory] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Create cache directory on download_delegate host] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Download item] ****************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]

TASK [download : Download_file | Copy file back to ansible host file cache] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Copy file from cache to nodes, if it is available] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Set mode and owner] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Extract file archives] ********************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/extract_file.yml for node1

TASK [download : Extract_file | Unpacking archive] *************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]

TASK [download : Prep_download | Set a few facts] **************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Show url of file to dowload] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "https://github.com/containernetworking/plugins/releases/download/v1.3.0/cni-plugins-linux-amd64-v1.3.0.tgz"
}
ok: [node2] => {
    "msg": "https://github.com/containernetworking/plugins/releases/download/v1.3.0/cni-plugins-linux-amd64-v1.3.0.tgz"
}

TASK [download : Download_file | Set pathname of cached file] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Create dest directory on node] ************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Create local cache directory] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Create cache directory on download_delegate host] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Download item] ****************************************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [download : Download_file | Copy file back to ansible host file cache] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Copy file from cache to nodes, if it is available] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Set mode and owner] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Extract file archives] ********************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/extract_file.yml for node1, node2

TASK [download : Extract_file | Unpacking archive] *************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Prep_download | Set a few facts] **************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Show url of file to dowload] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "https://dl.k8s.io/release/v1.29.1/bin/linux/amd64/kubeadm"
}
ok: [node2] => {
    "msg": "https://dl.k8s.io/release/v1.29.1/bin/linux/amd64/kubeadm"
}

TASK [download : Download_file | Set pathname of cached file] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Create dest directory on node] ************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Create local cache directory] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Create cache directory on download_delegate host] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Download item] ****************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Copy file back to ansible host file cache] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Copy file from cache to nodes, if it is available] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Set mode and owner] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Extract file archives] ********************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/extract_file.yml for node1, node2

TASK [download : Extract_file | Unpacking archive] *************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Prep_download | Set a few facts] **************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Show url of file to dowload] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "https://dl.k8s.io/release/v1.29.1/bin/linux/amd64/kubelet"
}
ok: [node2] => {
    "msg": "https://dl.k8s.io/release/v1.29.1/bin/linux/amd64/kubelet"
}

TASK [download : Download_file | Set pathname of cached file] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Create dest directory on node] ************************************************************************************************************************************************************************************************************************************************************
ok: [node2]
ok: [node1]

TASK [download : Download_file | Create local cache directory] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Create cache directory on download_delegate host] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Download item] ****************************************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [download : Download_file | Copy file back to ansible host file cache] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Copy file from cache to nodes, if it is available] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Set mode and owner] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Extract file archives] ********************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/extract_file.yml for node1, node2

TASK [download : Extract_file | Unpacking archive] *************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Prep_download | Set a few facts] **************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Show url of file to dowload] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "https://dl.k8s.io/release/v1.29.1/bin/linux/amd64/kubectl"
}
ok: [node2] => {
    "msg": "https://dl.k8s.io/release/v1.29.1/bin/linux/amd64/kubectl"
}

TASK [download : Download_file | Set pathname of cached file] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Create dest directory on node] ************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Create local cache directory] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Create cache directory on download_delegate host] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Download item] ****************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [download : Download_file | Copy file back to ansible host file cache] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Copy file from cache to nodes, if it is available] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Set mode and owner] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Extract file archives] ********************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/extract_file.yml for node1, node2

TASK [download : Extract_file | Unpacking archive] *************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Prep_download | Set a few facts] **************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Show url of file to dowload] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "https://github.com/kubernetes-sigs/cri-tools/releases/download/v1.29.0/crictl-v1.29.0-linux-amd64.tar.gz"
}
ok: [node2] => {
    "msg": "https://github.com/kubernetes-sigs/cri-tools/releases/download/v1.29.0/crictl-v1.29.0-linux-amd64.tar.gz"
}

TASK [download : Download_file | Set pathname of cached file] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Create dest directory on node] ************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Create local cache directory] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Create cache directory on download_delegate host] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Download item] ****************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Copy file back to ansible host file cache] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Copy file from cache to nodes, if it is available] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Set mode and owner] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Extract file archives] ********************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/extract_file.yml for node1, node2

TASK [download : Extract_file | Unpacking archive] *************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Prep_download | Set a few facts] **************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Show url of file to dowload] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "https://github.com/opencontainers/runc/releases/download/v1.1.12/runc.amd64"
}
ok: [node2] => {
    "msg": "https://github.com/opencontainers/runc/releases/download/v1.1.12/runc.amd64"
}

TASK [download : Download_file | Set pathname of cached file] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Create dest directory on node] ************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Create local cache directory] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Create cache directory on download_delegate host] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Download item] ****************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Copy file back to ansible host file cache] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Copy file from cache to nodes, if it is available] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Set mode and owner] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Extract file archives] ********************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/extract_file.yml for node1, node2

TASK [download : Extract_file | Unpacking archive] *************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Prep_download | Set a few facts] **************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Show url of file to dowload] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "https://github.com/containerd/containerd/releases/download/v1.7.13/containerd-1.7.13-linux-amd64.tar.gz"
}
ok: [node2] => {
    "msg": "https://github.com/containerd/containerd/releases/download/v1.7.13/containerd-1.7.13-linux-amd64.tar.gz"
}

TASK [download : Download_file | Set pathname of cached file] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Create dest directory on node] ************************************************************************************************************************************************************************************************************************************************************
ok: [node2]
ok: [node1]

TASK [download : Download_file | Create local cache directory] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Create cache directory on download_delegate host] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Download item] ****************************************************************************************************************************************************************************************************************************************************************************
ok: [node2]
ok: [node1]

TASK [download : Download_file | Copy file back to ansible host file cache] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Copy file from cache to nodes, if it is available] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Set mode and owner] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Extract file archives] ********************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/extract_file.yml for node1, node2

TASK [download : Extract_file | Unpacking archive] *************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Prep_download | Set a few facts] **************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Show url of file to dowload] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "https://github.com/containerd/nerdctl/releases/download/v1.7.1/nerdctl-1.7.1-linux-amd64.tar.gz"
}
ok: [node2] => {
    "msg": "https://github.com/containerd/nerdctl/releases/download/v1.7.1/nerdctl-1.7.1-linux-amd64.tar.gz"
}

TASK [download : Download_file | Set pathname of cached file] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Create dest directory on node] ************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Create local cache directory] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Create cache directory on download_delegate host] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Download item] ****************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Copy file back to ansible host file cache] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Copy file from cache to nodes, if it is available] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Set mode and owner] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Extract file archives] ********************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/extract_file.yml for node1, node2

TASK [download : Extract_file | Unpacking archive] *************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Prep_download | Set a few facts] **************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Show url of file to dowload] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "https://github.com/projectcalico/calico/releases/download/v3.26.4/calicoctl-linux-amd64"
}
ok: [node2] => {
    "msg": "https://github.com/projectcalico/calico/releases/download/v3.26.4/calicoctl-linux-amd64"
}

TASK [download : Download_file | Set pathname of cached file] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Create dest directory on node] ************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Create local cache directory] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Create cache directory on download_delegate host] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Download item] ****************************************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [download : Download_file | Copy file back to ansible host file cache] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Copy file from cache to nodes, if it is available] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Set mode and owner] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Extract file archives] ********************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/extract_file.yml for node1, node2

TASK [download : Extract_file | Unpacking archive] *************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set default values for flag variables] ********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Display the name of the image being processed] **************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "quay.io/calico/node"
}
ok: [node2] => {
    "msg": "quay.io/calico/node"
}

TASK [download : Set_container_facts | Set if containers should be pulled by digest] ***************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define by what name to pull the image] **********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define file name of image] **********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define path of image] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for docker] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for docker on localhost] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd on localhost] **************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio on localhost] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Prepare container download] **********************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/check_pull_required.yml for node1, node2

TASK [download : Check_pull_required |  Generate a list of information about the images on a node] *************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Set pull_required if the desired image is not yet loaded] ***************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Check that the local digest sha256 corresponds to the given image tag] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : debug] ****************************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "Pull quay.io/calico/node:v3.26.4 required is: True"
}
ok: [node2] => {
    "msg": "Pull quay.io/calico/node:v3.26.4 required is: True"
}

TASK [download : Download_container | Determine if image is in cache] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Set fact indicating if image is in cache] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Stop if image not in cache on ansible host when download_force_cache=true] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Download image if required] **********************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [download : Download_container | Save and compress image] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_container | Copy image to ansible host cache] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Upload image to node if it is cached] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Load image into the local container registry] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Remove container image from cache] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set default values for flag variables] ********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Display the name of the image being processed] **************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "quay.io/calico/cni"
}
ok: [node2] => {
    "msg": "quay.io/calico/cni"
}

TASK [download : Set_container_facts | Set if containers should be pulled by digest] ***************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define by what name to pull the image] **********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define file name of image] **********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define path of image] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for docker] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for docker on localhost] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd on localhost] **************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio on localhost] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Prepare container download] **********************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/check_pull_required.yml for node1, node2

TASK [download : Check_pull_required |  Generate a list of information about the images on a node] *************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Set pull_required if the desired image is not yet loaded] ***************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Check that the local digest sha256 corresponds to the given image tag] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : debug] ****************************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "Pull quay.io/calico/cni:v3.26.4 required is: True"
}
ok: [node2] => {
    "msg": "Pull quay.io/calico/cni:v3.26.4 required is: True"
}

TASK [download : Download_container | Determine if image is in cache] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Set fact indicating if image is in cache] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Stop if image not in cache on ansible host when download_force_cache=true] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Download image if required] **********************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [download : Download_container | Save and compress image] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_container | Copy image to ansible host cache] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Upload image to node if it is cached] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Load image into the local container registry] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Remove container image from cache] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set default values for flag variables] ********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Display the name of the image being processed] **************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "quay.io/calico/pod2daemon-flexvol"
}
ok: [node2] => {
    "msg": "quay.io/calico/pod2daemon-flexvol"
}

TASK [download : Set_container_facts | Set if containers should be pulled by digest] ***************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define by what name to pull the image] **********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define file name of image] **********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define path of image] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for docker] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for docker on localhost] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd on localhost] **************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio on localhost] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Prepare container download] **********************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/check_pull_required.yml for node1, node2

TASK [download : Check_pull_required |  Generate a list of information about the images on a node] *************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Set pull_required if the desired image is not yet loaded] ***************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Check that the local digest sha256 corresponds to the given image tag] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : debug] ****************************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "Pull quay.io/calico/pod2daemon-flexvol:v3.26.4 required is: True"
}
ok: [node2] => {
    "msg": "Pull quay.io/calico/pod2daemon-flexvol:v3.26.4 required is: True"
}

TASK [download : Download_container | Determine if image is in cache] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Set fact indicating if image is in cache] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Stop if image not in cache on ansible host when download_force_cache=true] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Download image if required] **********************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [download : Download_container | Save and compress image] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_container | Copy image to ansible host cache] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Upload image to node if it is cached] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Load image into the local container registry] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Remove container image from cache] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set default values for flag variables] ********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Display the name of the image being processed] **************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "quay.io/calico/kube-controllers"
}
ok: [node2] => {
    "msg": "quay.io/calico/kube-controllers"
}

TASK [download : Set_container_facts | Set if containers should be pulled by digest] ***************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define by what name to pull the image] **********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define file name of image] **********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define path of image] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for docker] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for docker on localhost] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd on localhost] **************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio on localhost] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Prepare container download] **********************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/check_pull_required.yml for node1, node2

TASK [download : Check_pull_required |  Generate a list of information about the images on a node] *************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Set pull_required if the desired image is not yet loaded] ***************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Check that the local digest sha256 corresponds to the given image tag] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : debug] ****************************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "Pull quay.io/calico/kube-controllers:v3.26.4 required is: True"
}
ok: [node2] => {
    "msg": "Pull quay.io/calico/kube-controllers:v3.26.4 required is: True"
}

TASK [download : Download_container | Determine if image is in cache] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Set fact indicating if image is in cache] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Stop if image not in cache on ansible host when download_force_cache=true] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Download image if required] **********************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [download : Download_container | Save and compress image] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_container | Copy image to ansible host cache] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Upload image to node if it is cached] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Load image into the local container registry] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Remove container image from cache] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Prep_download | Set a few facts] **************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Show url of file to dowload] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "https://github.com/projectcalico/calico/archive/v3.26.4.tar.gz"
}
ok: [node2] => {
    "msg": "https://github.com/projectcalico/calico/archive/v3.26.4.tar.gz"
}

TASK [download : Download_file | Set pathname of cached file] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Download_file | Create dest directory on node] ************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [download : Download_file | Create local cache directory] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Create cache directory on download_delegate host] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_file | Download item] ****************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [download : Download_file | Copy file back to ansible host file cache] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Copy file from cache to nodes, if it is available] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Set mode and owner] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_file | Extract file archives] ********************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/extract_file.yml for node1, node2

TASK [download : Extract_file | Unpacking archive] *************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [download : Set default values for flag variables] ********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Display the name of the image being processed] **************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "registry.k8s.io/pause"
}
ok: [node2] => {
    "msg": "registry.k8s.io/pause"
}

TASK [download : Set_container_facts | Set if containers should be pulled by digest] ***************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define by what name to pull the image] **********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define file name of image] **********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define path of image] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for docker] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for docker on localhost] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd on localhost] **************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio on localhost] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Prepare container download] **********************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/check_pull_required.yml for node1, node2

TASK [download : Check_pull_required |  Generate a list of information about the images on a node] *************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Set pull_required if the desired image is not yet loaded] ***************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Check that the local digest sha256 corresponds to the given image tag] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : debug] ****************************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "Pull registry.k8s.io/pause:3.9 required is: True"
}
ok: [node2] => {
    "msg": "Pull registry.k8s.io/pause:3.9 required is: True"
}

TASK [download : Download_container | Determine if image is in cache] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Set fact indicating if image is in cache] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Stop if image not in cache on ansible host when download_force_cache=true] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Download image if required] **********************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [download : Download_container | Save and compress image] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_container | Copy image to ansible host cache] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Upload image to node if it is cached] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Load image into the local container registry] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Remove container image from cache] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set default values for flag variables] ********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Display the name of the image being processed] **************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "docker.io/library/nginx"
}
ok: [node2] => {
    "msg": "docker.io/library/nginx"
}

TASK [download : Set_container_facts | Set if containers should be pulled by digest] ***************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define by what name to pull the image] **********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define file name of image] **********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define path of image] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for docker] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for docker on localhost] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd on localhost] **************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio on localhost] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Prepare container download] **********************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/check_pull_required.yml for node1, node2

TASK [download : Check_pull_required |  Generate a list of information about the images on a node] *************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Set pull_required if the desired image is not yet loaded] ***************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Check that the local digest sha256 corresponds to the given image tag] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : debug] ****************************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "Pull docker.io/library/nginx:1.25.2-alpine required is: True"
}
ok: [node2] => {
    "msg": "Pull docker.io/library/nginx:1.25.2-alpine required is: True"
}

TASK [download : Download_container | Determine if image is in cache] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Set fact indicating if image is in cache] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Stop if image not in cache on ansible host when download_force_cache=true] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Download image if required] **********************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [download : Download_container | Save and compress image] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_container | Copy image to ansible host cache] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Upload image to node if it is cached] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Load image into the local container registry] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Remove container image from cache] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set default values for flag variables] ********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Display the name of the image being processed] **************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "registry.k8s.io/coredns/coredns"
}
ok: [node2] => {
    "msg": "registry.k8s.io/coredns/coredns"
}

TASK [download : Set_container_facts | Set if containers should be pulled by digest] ***************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define by what name to pull the image] **********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define file name of image] **********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define path of image] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for docker] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for docker on localhost] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd on localhost] **************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio on localhost] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Prepare container download] **********************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/check_pull_required.yml for node1, node2

TASK [download : Check_pull_required |  Generate a list of information about the images on a node] *************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Set pull_required if the desired image is not yet loaded] ***************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Check that the local digest sha256 corresponds to the given image tag] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : debug] ****************************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "Pull registry.k8s.io/coredns/coredns:v1.11.1 required is: True"
}
ok: [node2] => {
    "msg": "Pull registry.k8s.io/coredns/coredns:v1.11.1 required is: True"
}

TASK [download : Download_container | Determine if image is in cache] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Set fact indicating if image is in cache] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Stop if image not in cache on ansible host when download_force_cache=true] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Download image if required] **********************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [download : Download_container | Save and compress image] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_container | Copy image to ansible host cache] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Upload image to node if it is cached] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Load image into the local container registry] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Remove container image from cache] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set default values for flag variables] ********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Display the name of the image being processed] **************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "registry.k8s.io/dns/k8s-dns-node-cache"
}
ok: [node2] => {
    "msg": "registry.k8s.io/dns/k8s-dns-node-cache"
}

TASK [download : Set_container_facts | Set if containers should be pulled by digest] ***************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define by what name to pull the image] **********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define file name of image] **********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define path of image] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for docker] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for docker on localhost] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd on localhost] **************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio on localhost] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Prepare container download] **********************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/check_pull_required.yml for node1, node2

TASK [download : Check_pull_required |  Generate a list of information about the images on a node] *************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Set pull_required if the desired image is not yet loaded] ***************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Check that the local digest sha256 corresponds to the given image tag] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : debug] ****************************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "Pull registry.k8s.io/dns/k8s-dns-node-cache:1.22.28 required is: True"
}
ok: [node2] => {
    "msg": "Pull registry.k8s.io/dns/k8s-dns-node-cache:1.22.28 required is: True"
}

TASK [download : Download_container | Determine if image is in cache] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Set fact indicating if image is in cache] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Stop if image not in cache on ansible host when download_force_cache=true] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Download image if required] **********************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [download : Download_container | Save and compress image] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_container | Copy image to ansible host cache] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Upload image to node if it is cached] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Load image into the local container registry] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Remove container image from cache] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set default values for flag variables] ********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Display the name of the image being processed] **************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "registry.k8s.io/cpa/cluster-proportional-autoscaler"
}
ok: [node2] => {
    "msg": "registry.k8s.io/cpa/cluster-proportional-autoscaler"
}

TASK [download : Set_container_facts | Set if containers should be pulled by digest] ***************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define by what name to pull the image] **********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define file name of image] **********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define path of image] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for docker] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for docker on localhost] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd on localhost] **************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio on localhost] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Prepare container download] **********************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/check_pull_required.yml for node1, node2

TASK [download : Check_pull_required |  Generate a list of information about the images on a node] *************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Set pull_required if the desired image is not yet loaded] ***************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Check that the local digest sha256 corresponds to the given image tag] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : debug] ****************************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "Pull registry.k8s.io/cpa/cluster-proportional-autoscaler:v1.8.8 required is: True"
}
ok: [node2] => {
    "msg": "Pull registry.k8s.io/cpa/cluster-proportional-autoscaler:v1.8.8 required is: True"
}

TASK [download : Download_container | Determine if image is in cache] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Set fact indicating if image is in cache] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Stop if image not in cache on ansible host when download_force_cache=true] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Download image if required] **********************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [download : Download_container | Save and compress image] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_container | Copy image to ansible host cache] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Upload image to node if it is cached] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Load image into the local container registry] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Remove container image from cache] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set default values for flag variables] ********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Display the name of the image being processed] **************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "registry.k8s.io/kube-apiserver"
}
ok: [node2] => {
    "msg": "registry.k8s.io/kube-apiserver"
}

TASK [download : Set_container_facts | Set if containers should be pulled by digest] ***************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define by what name to pull the image] **********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define file name of image] **********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define path of image] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for docker] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for docker on localhost] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd on localhost] **************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio on localhost] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Prepare container download] **********************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/check_pull_required.yml for node1, node2

TASK [download : Check_pull_required |  Generate a list of information about the images on a node] *************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Set pull_required if the desired image is not yet loaded] ***************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Check that the local digest sha256 corresponds to the given image tag] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : debug] ****************************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "Pull registry.k8s.io/kube-apiserver:v1.29.1 required is: True"
}
ok: [node2] => {
    "msg": "Pull registry.k8s.io/kube-apiserver:v1.29.1 required is: True"
}

TASK [download : Download_container | Determine if image is in cache] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Set fact indicating if image is in cache] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Stop if image not in cache on ansible host when download_force_cache=true] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Download image if required] **********************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [download : Download_container | Save and compress image] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_container | Copy image to ansible host cache] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Upload image to node if it is cached] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Load image into the local container registry] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Remove container image from cache] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set default values for flag variables] ********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Display the name of the image being processed] **************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "registry.k8s.io/kube-controller-manager"
}
ok: [node2] => {
    "msg": "registry.k8s.io/kube-controller-manager"
}

TASK [download : Set_container_facts | Set if containers should be pulled by digest] ***************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define by what name to pull the image] **********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define file name of image] **********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define path of image] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for docker] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for docker on localhost] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd on localhost] **************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio on localhost] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Prepare container download] **********************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/check_pull_required.yml for node1, node2

TASK [download : Check_pull_required |  Generate a list of information about the images on a node] *************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Set pull_required if the desired image is not yet loaded] ***************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Check that the local digest sha256 corresponds to the given image tag] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : debug] ****************************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "Pull registry.k8s.io/kube-controller-manager:v1.29.1 required is: True"
}
ok: [node2] => {
    "msg": "Pull registry.k8s.io/kube-controller-manager:v1.29.1 required is: True"
}

TASK [download : Download_container | Determine if image is in cache] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Set fact indicating if image is in cache] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Stop if image not in cache on ansible host when download_force_cache=true] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Download image if required] **********************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [download : Download_container | Save and compress image] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_container | Copy image to ansible host cache] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Upload image to node if it is cached] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Load image into the local container registry] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Remove container image from cache] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set default values for flag variables] ********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Display the name of the image being processed] **************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "registry.k8s.io/kube-scheduler"
}
ok: [node2] => {
    "msg": "registry.k8s.io/kube-scheduler"
}

TASK [download : Set_container_facts | Set if containers should be pulled by digest] ***************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define by what name to pull the image] **********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define file name of image] **********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define path of image] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for docker] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for docker on localhost] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd on localhost] **************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio on localhost] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Prepare container download] **********************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/check_pull_required.yml for node1, node2

TASK [download : Check_pull_required |  Generate a list of information about the images on a node] *************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Set pull_required if the desired image is not yet loaded] ***************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Check that the local digest sha256 corresponds to the given image tag] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : debug] ****************************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "Pull registry.k8s.io/kube-scheduler:v1.29.1 required is: True"
}
ok: [node2] => {
    "msg": "Pull registry.k8s.io/kube-scheduler:v1.29.1 required is: True"
}

TASK [download : Download_container | Determine if image is in cache] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Set fact indicating if image is in cache] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Stop if image not in cache on ansible host when download_force_cache=true] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Download image if required] **********************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [download : Download_container | Save and compress image] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_container | Copy image to ansible host cache] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Upload image to node if it is cached] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Load image into the local container registry] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Remove container image from cache] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set default values for flag variables] ********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Display the name of the image being processed] **************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "registry.k8s.io/kube-proxy"
}
ok: [node2] => {
    "msg": "registry.k8s.io/kube-proxy"
}

TASK [download : Set_container_facts | Set if containers should be pulled by digest] ***************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define by what name to pull the image] **********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define file name of image] **********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set_container_facts | Define path of image] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for docker] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for docker on localhost] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Set image save/load command for containerd on localhost] **************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Set image save/load command for crio on localhost] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Prepare container download] **********************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/check_pull_required.yml for node1, node2

TASK [download : Check_pull_required |  Generate a list of information about the images on a node] *************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Set pull_required if the desired image is not yet loaded] ***************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [download : Check_pull_required | Check that the local digest sha256 corresponds to the given image tag] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : debug] ****************************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "Pull registry.k8s.io/kube-proxy:v1.29.1 required is: True"
}
ok: [node2] => {
    "msg": "Pull registry.k8s.io/kube-proxy:v1.29.1 required is: True"
}

TASK [download : Download_container | Determine if image is in cache] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Set fact indicating if image is in cache] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Stop if image not in cache on ansible host when download_force_cache=true] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Download image if required] **********************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [download : Download_container | Save and compress image] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [download : Download_container | Copy image to ansible host cache] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Upload image to node if it is cached] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Load image into the local container registry] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [download : Download_container | Remove container image from cache] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

PLAY [Add worker nodes to the etcd play if needed] *************************************************************************************************************************************************************************************************************************************************************************

TASK [Gathering Facts] *****************************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubespray-defaults : Gather ansible_default_ipv4 from all hosts] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=node1)
skipping: [node1] => (item=node2)
skipping: [node1]

TASK [kubespray-defaults : Create fallback_ips_base] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Set fallback_ips] *******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubespray-defaults : Set no_proxy to all assigned cluster IPs and hostnames] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Populates no_proxy to all hosts] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubespray-defaults : Set `etcd_deployment_type` to "kubeadm" if `etcd_kubeadm_enabled` is true] **********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [Check if nodes needs etcd client certs (depends on network_plugin)] **************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]
[WARNING]: Could not match supplied host pattern, ignoring: _kubespray_needs_etcd

PLAY [Install etcd] ********************************************************************************************************************************************************************************************************************************************************************************************************

TASK [kubespray-defaults : Gather ansible_default_ipv4 from all hosts] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=node1)
skipping: [node1] => (item=node2)
skipping: [node1]

TASK [kubespray-defaults : Create fallback_ips_base] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Set fallback_ips] *******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubespray-defaults : Set no_proxy to all assigned cluster IPs and hostnames] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Populates no_proxy to all hosts] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubespray-defaults : Set `etcd_deployment_type` to "kubeadm" if `etcd_kubeadm_enabled` is true] **********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [adduser : User | Create User Group] **********************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [adduser : User | Create User] ****************************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [adduser : User | Create User Group] **********************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [adduser : User | Create User] ****************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [etcd : Check etcd certs] *********************************************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/etcd/tasks/check_certs.yml for node1, node2

TASK [etcd : Check_certs | Register certs that have already been generated on first etcd node] *****************************************************************************************************************************************************************************************************************************
[WARNING]: Skipped '/etc/ssl/etcd/ssl' path due to this access issue: '/etc/ssl/etcd/ssl' is not a directory
ok: [node1]

TASK [etcd : Check_certs | Set default value for 'sync_certs', 'gen_certs' and 'etcd_secret_changed' to false] *************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [etcd : Check certs | Register ca and etcd admin/member certs on etcd hosts] ******************************************************************************************************************************************************************************************************************************************
skipping: [node2] => (item=ca.pem)
skipping: [node2] => (item=member-node2.pem)
skipping: [node2] => (item=member-node2-key.pem)
skipping: [node2] => (item=admin-node2.pem)
skipping: [node2] => (item=admin-node2-key.pem)
skipping: [node2]
ok: [node1] => (item=ca.pem)
ok: [node1] => (item=member-node1.pem)
ok: [node1] => (item=member-node1-key.pem)
ok: [node1] => (item=admin-node1.pem)
ok: [node1] => (item=admin-node1-key.pem)

TASK [etcd : Check certs | Register ca and etcd node certs on kubernetes hosts] ********************************************************************************************************************************************************************************************************************************************
ok: [node1] => (item=ca.pem)
ok: [node2] => (item=ca.pem)
ok: [node1] => (item=node-node1.pem)
ok: [node2] => (item=node-node2.pem)
ok: [node1] => (item=node-node1-key.pem)
ok: [node2] => (item=node-node2-key.pem)

TASK [etcd : Check_certs | Set 'gen_certs' to true if expected certificates are not on the first etcd node(1/2)] ***********************************************************************************************************************************************************************************************************
ok: [node1] => (item=/etc/ssl/etcd/ssl/ca.pem)
ok: [node1] => (item=/etc/ssl/etcd/ssl/admin-node1.pem)
ok: [node1] => (item=/etc/ssl/etcd/ssl/admin-node1-key.pem)
ok: [node1] => (item=/etc/ssl/etcd/ssl/member-node1.pem)
ok: [node1] => (item=/etc/ssl/etcd/ssl/member-node1-key.pem)
ok: [node1] => (item=/etc/ssl/etcd/ssl/node-node1.pem)
ok: [node1] => (item=/etc/ssl/etcd/ssl/node-node1-key.pem)
ok: [node1] => (item=/etc/ssl/etcd/ssl/node-node2.pem)
ok: [node1] => (item=/etc/ssl/etcd/ssl/node-node2-key.pem)

TASK [etcd : Check_certs | Set 'gen_certs' to true if expected certificates are not on the first etcd node(2/2)] ***********************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/etc/ssl/etcd/ssl/ca.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/admin-node1.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/admin-node1-key.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/member-node1.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/member-node1-key.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node1.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node1-key.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node2.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node2-key.pem)
skipping: [node1]

TASK [etcd : Check_certs | Set 'gen_*_certs' groups to track which nodes needs to have certs generated on first etcd node] *************************************************************************************************************************************************************************************************
changed: [node1] => (item={'node_type': 'master', 'certs': ['/etc/ssl/etcd/ssl/member-node1.pem', '/etc/ssl/etcd/ssl/member-node1-key.pem', '/etc/ssl/etcd/ssl/admin-node1.pem', '/etc/ssl/etcd/ssl/admin-node1-key.pem']})
changed: [node1] => (item={'node_type': 'node', 'certs': ['/etc/ssl/etcd/ssl/node-node1.pem', '/etc/ssl/etcd/ssl/node-node1-key.pem']})
changed: [node2] => (item={'node_type': 'master', 'certs': ['/etc/ssl/etcd/ssl/member-node2.pem', '/etc/ssl/etcd/ssl/member-node2-key.pem', '/etc/ssl/etcd/ssl/admin-node2.pem', '/etc/ssl/etcd/ssl/admin-node2-key.pem']})
changed: [node2] => (item={'node_type': 'node', 'certs': ['/etc/ssl/etcd/ssl/node-node2.pem', '/etc/ssl/etcd/ssl/node-node2-key.pem']})

TASK [etcd : Check_certs | Set 'etcd_member_requires_sync' to true if ca or member/admin cert and key don't exist on etcd member or checksum doesn't match] ****************************************************************************************************************************************************************
ok: [node1]
skipping: [node2]

TASK [etcd : Check_certs | Set 'kubernetes_host_requires_sync' to true if ca or node cert and key don't exist on kubernetes host or checksum doesn't match] ****************************************************************************************************************************************************************
skipping: [node1]
ok: [node2]

TASK [etcd : Check_certs | Set 'sync_certs' to true] ***********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [etcd : Generate etcd certs] ******************************************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/etcd/tasks/gen_certs_script.yml for node1, node2

TASK [etcd : Gen_certs | create etcd cert dir] *****************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [etcd : Gen_certs | create etcd script dir (on node1)] ****************************************************************************************************************************************************************************************************************************************************************
changed: [node1]

TASK [etcd : Gen_certs | write openssl config] *****************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]

TASK [etcd : Gen_certs | copy certs generation script] *********************************************************************************************************************************************************************************************************************************************************************
changed: [node1]

TASK [etcd : Gen_certs | run cert generation script for etcd and kube control plane nodes] *********************************************************************************************************************************************************************************************************************************
changed: [node1]

TASK [etcd : Gen_certs | run cert generation script for all clients] *******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [etcd : Gen_certs | Gather etcd member/admin and kube_control_plane client certs from first etcd node] ****************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/etc/ssl/etcd/ssl/ca.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/ca.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/ca-key.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/ca-key.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/admin-node1.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/admin-node1.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/admin-node1-key.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/admin-node1-key.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/member-node1.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/member-node1.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/member-node1-key.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/member-node1-key.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node1.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/node-node1.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node1-key.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/node-node1-key.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node2.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/node-node2.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node2-key.pem)
skipping: [node1]
skipping: [node2] => (item=/etc/ssl/etcd/ssl/node-node2-key.pem)
skipping: [node2]

TASK [etcd : Gen_certs | Write etcd member/admin and kube_control_plane client certs to other etcd nodes] ******************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/etc/ssl/etcd/ssl/ca.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/ca-key.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/admin-node1.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/admin-node1-key.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/member-node1.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/member-node1-key.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node1.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node1-key.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node2.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/ca.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node2-key.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/ca-key.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/admin-node1.pem)
skipping: [node1]
skipping: [node2] => (item=/etc/ssl/etcd/ssl/admin-node1-key.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/member-node1.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/member-node1-key.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/node-node1.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/node-node1-key.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/node-node2.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/node-node2-key.pem)
skipping: [node2]

TASK [etcd : Gen_certs | Gather node certs from first etcd node] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node1.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node1-key.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/node-node1.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/node-node1-key.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node2.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node2-key.pem)
skipping: [node1]
skipping: [node2] => (item=/etc/ssl/etcd/ssl/node-node2.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/node-node2-key.pem)
skipping: [node2]

TASK [etcd : Gen_certs | Write node certs to other etcd nodes] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node1.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node1-key.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node2.pem)
skipping: [node1] => (item=/etc/ssl/etcd/ssl/node-node2-key.pem)
skipping: [node1]
skipping: [node2] => (item=/etc/ssl/etcd/ssl/node-node1.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/node-node1-key.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/node-node2.pem)
skipping: [node2] => (item=/etc/ssl/etcd/ssl/node-node2-key.pem)
skipping: [node2]

TASK [etcd : Gen_certs | Generate etcd certs] ******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/etcd/tasks/gen_nodes_certs_script.yml for node2

TASK [etcd : Gen_certs | Set cert names per node] **************************************************************************************************************************************************************************************************************************************************************************
ok: [node2]

TASK [etcd : Check_certs | Set 'sync_certs' to true on nodes] **************************************************************************************************************************************************************************************************************************************************************
ok: [node2] => (item=ca.pem)
ok: [node2] => (item=node-node2.pem)
ok: [node2] => (item=node-node2-key.pem)

TASK [etcd : Gen_certs | Gather node certs] ********************************************************************************************************************************************************************************************************************************************************************************
ok: [node2 -> node1(192.168.208.5)]

TASK [etcd : Gen_certs | Copy certs on nodes] ******************************************************************************************************************************************************************************************************************************************************************************
ok: [node2]

TASK [etcd : Gen_certs | Generate etcd certs on nodes if needed] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [etcd : Gen_certs | check certificate permissions] ********************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [etcd : Trust etcd CA] ************************************************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/etcd/tasks/upd_ca_trust.yml for node1, node2

TASK [etcd : Gen_certs | target ca-certificate store file] *****************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [etcd : Gen_certs | add CA to trusted CA dir] *************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [etcd : Gen_certs | update ca-certificates (Debian/Ubuntu/SUSE/Flatcar)] **********************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [etcd : Gen_certs | update ca-certificates (RedHat)] ******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [etcd : Gen_certs | update ca-certificates (ClearLinux)] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [etcd : Trust etcd CA on nodes if needed] *****************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [etcd : Gen_certs | Get etcd certificate serials] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [etcd : Set etcd_client_cert_serial] **********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [etcdctl_etcdutl : Copy etcdctl and etcdutl binary from docker container] *********************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=etcdctl)
skipping: [node1] => (item=etcdutl)
skipping: [node1]
skipping: [node2] => (item=etcdctl)
skipping: [node2] => (item=etcdutl)
skipping: [node2]

TASK [etcdctl_etcdutl : Download etcd binary] ******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node2]
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/etcdctl_etcdutl/tasks/../../download/tasks/download_file.yml for node1

TASK [etcdctl_etcdutl : Prep_download | Set a few facts] *******************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [etcdctl_etcdutl : Download_file | Show url of file to dowload] *******************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": "https://github.com/etcd-io/etcd/releases/download/v3.5.10/etcd-v3.5.10-linux-amd64.tar.gz"
}

TASK [etcdctl_etcdutl : Download_file | Set pathname of cached file] *******************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [etcdctl_etcdutl : Download_file | Create dest directory on node] *****************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [etcdctl_etcdutl : Download_file | Create local cache directory] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [etcdctl_etcdutl : Download_file | Create cache directory on download_delegate host] **********************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [etcdctl_etcdutl : Download_file | Download item] *********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [etcdctl_etcdutl : Download_file | Copy file back to ansible host file cache] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [etcdctl_etcdutl : Download_file | Copy file from cache to nodes, if it is available] *********************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [etcdctl_etcdutl : Download_file | Set mode and owner] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [etcdctl_etcdutl : Download_file | Extract file archives] *************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/download/tasks/extract_file.yml for node1

TASK [etcdctl_etcdutl : Extract_file | Unpacking archive] ******************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [etcdctl_etcdutl : Copy etcd binary] **********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node2]
changed: [node1]

TASK [etcdctl_etcdutl : Copy etcdctl and etcdutl binary from download dir] *************************************************************************************************************************************************************************************************************************************************
skipping: [node2] => (item=etcdctl)
skipping: [node2] => (item=etcdutl)
skipping: [node2]
changed: [node1] => (item=etcdctl)
changed: [node1] => (item=etcdutl)

TASK [etcdctl_etcdutl : Create etcdctl wrapper script] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node2]
changed: [node1]

TASK [etcd : Install etcd] *************************************************************************************************************************************************************************************************************************************************************************************************
skipping: [node2]
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/etcd/tasks/install_host.yml for node1

TASK [etcd : Get currently-deployed etcd version] **************************************************************************************************************************************************************************************************************************************************************************
fatal: [node1]: FAILED! => {"changed": false, "cmd": "/usr/local/bin/etcd --version", "msg": "[Errno 2] No such file or directory: b'/usr/local/bin/etcd': b'/usr/local/bin/etcd'", "rc": 2, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
...ignoring

TASK [etcd : Restart etcd if necessary] ************************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]

TASK [etcd : Restart etcd-events if necessary] *****************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [etcd : Install | Copy etcd binary from download dir] *****************************************************************************************************************************************************************************************************************************************************************
changed: [node1] => (item=etcd)

TASK [etcd : Configure etcd] ***********************************************************************************************************************************************************************************************************************************************************************************************
skipping: [node2]
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/etcd/tasks/configure.yml for node1

TASK [etcd : Configure | Check if etcd cluster is healthy] *****************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [etcd : Configure | Check if etcd-events cluster is healthy] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [etcd : Configure | Refresh etcd config] ******************************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/etcd/tasks/refresh_config.yml for node1

TASK [etcd : Refresh config | Create etcd config file] *********************************************************************************************************************************************************************************************************************************************************************
changed: [node1]

TASK [etcd : Refresh config | Create etcd-events config file] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [etcd : Configure | Copy etcd.service systemd file] *******************************************************************************************************************************************************************************************************************************************************************
changed: [node1]

TASK [etcd : Configure | Copy etcd-events.service systemd file] ************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [etcd : Configure | reload systemd] ***********************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [etcd : Configure | Ensure etcd is running] ***************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]

TASK [etcd : Configure | Ensure etcd-events is running] ********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [etcd : Configure | Wait for etcd cluster to be healthy] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [etcd : Configure | Wait for etcd-events cluster to be healthy] *******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [etcd : Configure | Check if member is in etcd cluster] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [etcd : Configure | Check if member is in etcd-events cluster] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [etcd : Configure | Join member(s) to etcd cluster one at a time] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=node1)
skipping: [node1]

TASK [etcd : Configure | Join member(s) to etcd-events cluster one at a time] **********************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=node1)
skipping: [node1]

TASK [etcd : Refresh etcd config] ******************************************************************************************************************************************************************************************************************************************************************************************
skipping: [node2]
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/etcd/tasks/refresh_config.yml for node1

TASK [etcd : Refresh config | Create etcd config file] *********************************************************************************************************************************************************************************************************************************************************************
changed: [node1]

TASK [etcd : Refresh config | Create etcd-events config file] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [etcd : Restart etcd if certs changed] ********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [etcd : Restart etcd-events if certs changed] *************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [etcd : Refresh etcd config again for idempotency] ********************************************************************************************************************************************************************************************************************************************************************
skipping: [node2]
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/etcd/tasks/refresh_config.yml for node1

TASK [etcd : Refresh config | Create etcd config file] *********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [etcd : Refresh config | Create etcd-events config file] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

RUNNING HANDLER [etcd : Refresh Time Fact] *********************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

RUNNING HANDLER [etcd : Set Backup Directory] ******************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

RUNNING HANDLER [etcd : Create Backup Directory] ***************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]

RUNNING HANDLER [etcd : Stat etcd v2 data directory] ***********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

RUNNING HANDLER [etcd : Backup etcd v2 data] *******************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]

RUNNING HANDLER [etcd : Backup etcd v3 data] *******************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]

RUNNING HANDLER [etcd : Etcd | reload systemd] *****************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

RUNNING HANDLER [etcd : Reload etcd] ***************************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]

RUNNING HANDLER [etcd : Wait for etcd up] **********************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

RUNNING HANDLER [etcd : Find old etcd backups] *****************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

RUNNING HANDLER [etcd : Remove old etcd backups] ***************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

RUNNING HANDLER [etcd : Set etcd_secret_changed] ***************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

PLAY [Install Kubernetes nodes] ********************************************************************************************************************************************************************************************************************************************************************************************

TASK [kubespray-defaults : Gather ansible_default_ipv4 from all hosts] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=node1)
skipping: [node1] => (item=node2)
skipping: [node1]

TASK [kubespray-defaults : Create fallback_ips_base] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Set fallback_ips] *******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubespray-defaults : Set no_proxy to all assigned cluster IPs and hostnames] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Populates no_proxy to all hosts] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubespray-defaults : Set `etcd_deployment_type` to "kubeadm" if `etcd_kubeadm_enabled` is true] **********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Look up docker cgroup driver] **********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Set kubelet_cgroup_driver_detected fact for docker] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Look up crio cgroup driver] ************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Set kubelet_cgroup_driver_detected fact for crio] **************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Set kubelet_cgroup_driver_detected fact for containerd] ********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/node : Set kubelet_cgroup_driver] *************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/node : Set kubelet_cgroups options when cgroupfs is used] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Set kubelet_config_extra_args options when cgroupfs is used] ***************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Os specific vars] **********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Pre-upgrade | check if kubelet container exists] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/node : Pre-upgrade | copy /var/lib/cni from kubelet] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Pre-upgrade | ensure kubelet container service is stopped if using host deployment] ****************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Pre-upgrade | ensure kubelet container is removed if using host deployment] ************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Ensure /var/lib/cni exists] ************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/node : Install | Copy kubeadm binary from download dir] ***************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Install | Copy kubelet binary from download dir] ***************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/node : Kube-vip  | Check cluster settings for kube-vip] ***************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Kube-vip | Write static pod] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Haproxy | Cleanup potentially deployed haproxy] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Nginx-proxy | Make nginx directory] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Nginx-proxy | Write nginx-proxy configuration] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Nginx-proxy | Get checksum from config] ************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Nginx-proxy | Write static pod] ********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Haproxy | Cleanup potentially deployed nginx-proxy] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Haproxy | Make haproxy directory] ******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Haproxy | Write haproxy configuration] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Haproxy | Get checksum from config] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Haproxy | Write static pod] ************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Ensure nodePort range is reserved] *****************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/node : Verify if br_netfilter module exists] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/node : Verify br_netfilter module path exists] ************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => (item=/etc/modules-load.d)
ok: [node2] => (item=/etc/modules-load.d)
ok: [node1] => (item=/etc/modprobe.d)
ok: [node2] => (item=/etc/modprobe.d)

TASK [kubernetes/node : Enable br_netfilter module] ************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/node : Persist br_netfilter module] ***********************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/node : Check if bridge-nf-call-iptables key exists] *******************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/node : Enable bridge-nf-call tables] **********************************************************************************************************************************************************************************************************************************************************************
changed: [node1] => (item=net.bridge.bridge-nf-call-iptables)
changed: [node2] => (item=net.bridge.bridge-nf-call-iptables)
changed: [node1] => (item=net.bridge.bridge-nf-call-arptables)
changed: [node2] => (item=net.bridge.bridge-nf-call-arptables)
changed: [node1] => (item=net.bridge.bridge-nf-call-ip6tables)
changed: [node2] => (item=net.bridge.bridge-nf-call-ip6tables)

TASK [kubernetes/node : Modprobe Kernel Module for IPVS] *******************************************************************************************************************************************************************************************************************************************************************
changed: [node1] => (item=ip_vs)
changed: [node2] => (item=ip_vs)
changed: [node1] => (item=ip_vs_rr)
changed: [node2] => (item=ip_vs_rr)
changed: [node1] => (item=ip_vs_wrr)
changed: [node2] => (item=ip_vs_wrr)
changed: [node1] => (item=ip_vs_sh)
changed: [node2] => (item=ip_vs_sh)
changed: [node1] => (item=ip_vs_wlc)
changed: [node2] => (item=ip_vs_wlc)
changed: [node1] => (item=ip_vs_lc)
changed: [node2] => (item=ip_vs_lc)

TASK [kubernetes/node : Modprobe conntrack module] *************************************************************************************************************************************************************************************************************************************************************************
changed: [node1] => (item=nf_conntrack)
fatal: [node1]: FAILED! => {"msg": "The conditional check '(modprobe_conntrack_module|default({'rc': 1})).rc != 0' failed. The error was: error while evaluating conditional ((modprobe_conntrack_module|default({'rc': 1})).rc != 0): 'dict object' has no attribute 'rc'. 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/kubernetes/node/tasks/main.yml': line 126, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Modprobe conntrack module\n  ^ here\n"}
...ignoring
changed: [node2] => (item=nf_conntrack)
fatal: [node2]: FAILED! => {"msg": "The conditional check '(modprobe_conntrack_module|default({'rc': 1})).rc != 0' failed. The error was: error while evaluating conditional ((modprobe_conntrack_module|default({'rc': 1})).rc != 0): 'dict object' has no attribute 'rc'. 'dict object' has no attribute 'rc'\n\nThe error appears to be in '/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/kubernetes/node/tasks/main.yml': line 126, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Modprobe conntrack module\n  ^ here\n"}
...ignoring

TASK [kubernetes/node : Check cloud provider credentials] ******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Test if openstack_cacert is a base64 string] *******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Write cacert file] *********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Write cloud-config] ********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node : Set kubelet api version to v1beta1] ****************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/node : Write kubelet environment config file (kubeadm)] ***************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/node : Write kubelet config file] *************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/node : Write kubelet systemd init file] *******************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/node : Flush_handlers and reload-systemd] *****************************************************************************************************************************************************************************************************************************************************************

TASK [kubernetes/node : Flush_handlers and reload-systemd] *****************************************************************************************************************************************************************************************************************************************************************

RUNNING HANDLER [kubernetes/node : Kubelet | reload systemd] ***************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

RUNNING HANDLER [kubernetes/node : Kubelet | restart kubelet] **************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/node : Enable kubelet] ************************************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

RUNNING HANDLER [kubernetes/node : Kubelet | restart kubelet] **************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

PLAY [Install the control plane] *******************************************************************************************************************************************************************************************************************************************************************************************

TASK [kubespray-defaults : Gather ansible_default_ipv4 from all hosts] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=node1)
skipping: [node1] => (item=node2)
skipping: [node1]

TASK [kubespray-defaults : Create fallback_ips_base] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Set fallback_ips] *******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubespray-defaults : Set no_proxy to all assigned cluster IPs and hostnames] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Populates no_proxy to all hosts] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubespray-defaults : Set `etcd_deployment_type` to "kubeadm" if `etcd_kubeadm_enabled` is true] **********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/tokens : Check_tokens | check if the tokens have already been generated on first master] ******************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/tokens : Check_tokens | Set default value for 'sync_tokens' and 'gen_tokens' to false] ********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/tokens : Check_tokens | Set 'sync_tokens' and 'gen_tokens' to true] ***************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/tokens : Check tokens | check if a cert already exists] ***************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/tokens : Check_tokens | Set 'sync_tokens' to true] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/tokens : Make sure the tokens directory exits] ************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/tokens : Gen_tokens | copy tokens generation script] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/tokens : Gen_tokens | generate tokens for master components] **********************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=['system:kubectl', 'node1'])
skipping: [node1] => (item=['system:kubectl', 'node2'])
skipping: [node1]

TASK [kubernetes/tokens : Gen_tokens | generate tokens for node components] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=['system:kubelet', 'node1'])
skipping: [node1] => (item=['system:kubelet', 'node2'])
skipping: [node1]

TASK [kubernetes/tokens : Gen_tokens | Get list of tokens from first master] ***********************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/tokens : Gen_tokens | Gather tokens] **********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/tokens : Gen_tokens | Copy tokens on masters] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [adduser : User | Create User Group] **********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [adduser : User | Create User] ****************************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Pre-upgrade | Delete master manifests if etcd secrets changed] ****************************************************************************************************************************************************************************************************************************
skipping: [node2] => (item=kube-apiserver)
skipping: [node2] => (item=kube-controller-manager)
skipping: [node2] => (item=kube-scheduler)
skipping: [node2]
ok: [node1] => (item=kube-apiserver)
ok: [node1] => (item=kube-controller-manager)
ok: [node1] => (item=kube-scheduler)

TASK [kubernetes/control-plane : Pre-upgrade | Delete master containers forcefully] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=kube-apiserver)
skipping: [node1] => (item=kube-controller-manager)
skipping: [node1] => (item=kube-scheduler)
skipping: [node1]
skipping: [node2] => (item=kube-apiserver)
skipping: [node2] => (item=kube-controller-manager)
skipping: [node2] => (item=kube-scheduler)
skipping: [node2]

TASK [kubernetes/control-plane : Create webhook token auth config] *********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Create webhook authorization config] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Create kube-scheduler config] *************************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/control-plane : Check if secret for encrypting data at rest already exist] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Slurp secrets_encryption file if it exists] ***********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Base 64 Decode slurped secrets_encryption.yaml file] **************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Extract secret value from secrets_encryption.yaml] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Set kube_encrypt_token across master nodes] ***********************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=node1)
skipping: [node1] => (item=node2)
skipping: [node1]
skipping: [node2] => (item=node1)
skipping: [node2] => (item=node2)
skipping: [node2]

TASK [kubernetes/control-plane : Write secrets for encrypting secret data at rest] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Install | Copy kubectl binary from download dir] ******************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/control-plane : Install kubectl bash completion] **********************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/control-plane : Set kubectl bash completion file permissions] *********************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/control-plane : Set bash alias for kubectl] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Check which kube-control nodes are already members of the cluster] ************************************************************************************************************************************************************************************************************************
fatal: [node1]: FAILED! => {"changed": false, "cmd": ["/usr/local/bin/kubectl", "get", "nodes", "--selector=node-role.kubernetes.io/control-plane", "-o", "json"], "delta": "0:00:00.053906", "end": "2024-02-15 05:44:57.161669", "msg": "non-zero return code", "rc": 1, "start": "2024-02-15 05:44:57.107763", "stderr": "E0215 05:44:57.156447    3567 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused\nE0215 05:44:57.156855    3567 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused\nE0215 05:44:57.157857    3567 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused\nE0215 05:44:57.158178    3567 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused\nE0215 05:44:57.159526    3567 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused\nThe connection to the server localhost:8080 was refused - did you specify the right host or port?", "stderr_lines": ["E0215 05:44:57.156447    3567 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused", "E0215 05:44:57.156855    3567 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused", "E0215 05:44:57.157857    3567 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused", "E0215 05:44:57.158178    3567 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused", "E0215 05:44:57.159526    3567 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused", "The connection to the server localhost:8080 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
...ignoring
fatal: [node2]: FAILED! => {"changed": false, "cmd": ["/usr/local/bin/kubectl", "get", "nodes", "--selector=node-role.kubernetes.io/control-plane", "-o", "json"], "delta": "0:00:00.060851", "end": "2024-02-15 05:44:57.223307", "msg": "non-zero return code", "rc": 1, "start": "2024-02-15 05:44:57.162456", "stderr": "E0215 05:44:57.217548    2236 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused\nE0215 05:44:57.218017    2236 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused\nE0215 05:44:57.219409    2236 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused\nE0215 05:44:57.219672    2236 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused\nE0215 05:44:57.221158    2236 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused\nThe connection to the server localhost:8080 was refused - did you specify the right host or port?", "stderr_lines": ["E0215 05:44:57.217548    2236 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused", "E0215 05:44:57.218017    2236 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused", "E0215 05:44:57.219409    2236 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused", "E0215 05:44:57.219672    2236 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused", "E0215 05:44:57.221158    2236 memcache.go:265] couldn't get current server API group list: Get \"http://localhost:8080/api?timeout=32s\": dial tcp 127.0.0.1:8080: connect: connection refused", "The connection to the server localhost:8080 was refused - did you specify the right host or port?"], "stdout": "", "stdout_lines": []}
...ignoring

TASK [kubernetes/control-plane : Set fact joined_control_planes] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=node1)
skipping: [node1] => (item=node2)
skipping: [node1]

TASK [kubernetes/control-plane : Set fact first_kube_control_plane] ********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/control-plane : Install OIDC certificate] *****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Kubeadm | Check if kubeadm has already run] ***********************************************************************************************************************************************************************************************************************************************
ok: [node2]
ok: [node1]

TASK [kubernetes/control-plane : Backup old certs and keys] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=apiserver.crt)
skipping: [node1] => (item=apiserver.key)
skipping: [node1] => (item=apiserver-kubelet-client.crt)
skipping: [node1] => (item=apiserver-kubelet-client.key)
skipping: [node1] => (item=front-proxy-client.crt)
skipping: [node1] => (item=front-proxy-client.key)
skipping: [node1]
skipping: [node2] => (item=apiserver.crt)
skipping: [node2] => (item=apiserver.key)
skipping: [node2] => (item=apiserver-kubelet-client.crt)
skipping: [node2] => (item=apiserver-kubelet-client.key)
skipping: [node2] => (item=front-proxy-client.crt)
skipping: [node2] => (item=front-proxy-client.key)
skipping: [node2]

TASK [kubernetes/control-plane : Backup old confs] *************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=admin.conf)
skipping: [node1] => (item=controller-manager.conf)
skipping: [node1] => (item=kubelet.conf)
skipping: [node1] => (item=scheduler.conf)
skipping: [node1]
skipping: [node2] => (item=admin.conf)
skipping: [node2] => (item=controller-manager.conf)
skipping: [node2] => (item=kubelet.conf)
skipping: [node2] => (item=scheduler.conf)
skipping: [node2]

TASK [kubernetes/control-plane : Kubeadm | aggregate all SANs] *************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/control-plane : Create audit-policy directory] ************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Write api audit policy yaml] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Write api audit webhook config yaml] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Create apiserver tracing config directory] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Write apiserver tracing config yaml] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Set kubeadm_config_api_fqdn define] *******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Set kubeadm api version to v1beta3] *******************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/control-plane : Kubeadm | Create kubeadm config] **********************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/control-plane : Kubeadm | Create directory to store admission control configurations] *********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Kubeadm | Push admission control config file] *********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Kubeadm | Push admission control config files] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Kubeadm | Configure default cluster podnodeslector] ***************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Kubeadm | Check apiserver.crt SAN IPs] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=10.233.0.1)
skipping: [node1] => (item=127.0.0.1)
skipping: [node1] => (item=192.168.208.5)
skipping: [node1] => (item=192.168.208.6)
skipping: [node1]
skipping: [node2] => (item=10.233.0.1)
skipping: [node2] => (item=127.0.0.1)
skipping: [node2] => (item=192.168.208.5)
skipping: [node2] => (item=192.168.208.6)
skipping: [node2]

TASK [kubernetes/control-plane : Kubeadm | Check apiserver.crt SAN hosts] **************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=kubernetes)
skipping: [node1] => (item=kubernetes.default)
skipping: [node1] => (item=kubernetes.default.svc)
skipping: [node1] => (item=kubernetes.default.svc.cluster.local)
skipping: [node1] => (item=localhost)
skipping: [node1] => (item=node1)
skipping: [node1] => (item=node2)
skipping: [node1] => (item=lb-apiserver.kubernetes.local)
skipping: [node1] => (item=node1.cluster.local)
skipping: [node1] => (item=node2.cluster.local)
skipping: [node1]
skipping: [node2] => (item=kubernetes)
skipping: [node2] => (item=kubernetes.default)
skipping: [node2] => (item=kubernetes.default.svc)
skipping: [node2] => (item=kubernetes.default.svc.cluster.local)
skipping: [node2] => (item=localhost)
skipping: [node2] => (item=node1)
skipping: [node2] => (item=node2)
skipping: [node2] => (item=lb-apiserver.kubernetes.local)
skipping: [node2] => (item=node1.cluster.local)
skipping: [node2] => (item=node2.cluster.local)
skipping: [node2]

TASK [kubernetes/control-plane : Kubeadm | regenerate apiserver cert 1/2] **************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=apiserver.crt)
skipping: [node1] => (item=apiserver.key)
skipping: [node1]
skipping: [node2] => (item=apiserver.crt)
skipping: [node2] => (item=apiserver.key)
skipping: [node2]

TASK [kubernetes/control-plane : Kubeadm | regenerate apiserver cert 2/2] **************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Kubeadm | Create directory to store kubeadm patches] **************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Kubeadm | Copy kubeadm patches from inventory files] **************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Kubeadm | Initialize first master] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node2]
changed: [node1]

TASK [kubernetes/control-plane : Set kubeadm certificate key] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=[init] Using Kubernetes version: v1.29.1)
skipping: [node1] => (item=[preflight] Running pre-flight checks)
skipping: [node1] => (item=[preflight] Pulling images required for setting up a Kubernetes cluster)
skipping: [node1] => (item=[preflight] This might take a minute or two, depending on the speed of your internet connection)
skipping: [node1] => (item=[preflight] You can also perform this action in beforehand using 'kubeadm config images pull')
skipping: [node1] => (item=[certs] Using certificateDir folder "/etc/kubernetes/ssl")
skipping: [node1] => (item=[certs] Generating "ca" certificate and key)
skipping: [node1] => (item=[certs] Generating "apiserver" certificate and key)
skipping: [node1] => (item=[certs] apiserver serving cert is signed for DNS names [kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local lb-apiserver.kubernetes.local localhost node1 node1.cluster.local node2 node2.cluster.local] and IPs [10.233.0.1 192.168.208.5 127.0.0.1 192.168.208.6])
skipping: [node1] => (item=[certs] Generating "apiserver-kubelet-client" certificate and key)
skipping: [node1] => (item=[certs] Generating "front-proxy-ca" certificate and key)
skipping: [node1] => (item=[certs] Generating "front-proxy-client" certificate and key)
skipping: [node1] => (item=[certs] External etcd mode: Skipping etcd/ca certificate authority generation)
skipping: [node1] => (item=[certs] External etcd mode: Skipping etcd/server certificate generation)
skipping: [node1] => (item=[certs] External etcd mode: Skipping etcd/peer certificate generation)
skipping: [node1] => (item=[certs] External etcd mode: Skipping etcd/healthcheck-client certificate generation)
skipping: [node1] => (item=[certs] External etcd mode: Skipping apiserver-etcd-client certificate generation)
skipping: [node1] => (item=[certs] Generating "sa" key and public key)
skipping: [node1] => (item=[kubeconfig] Using kubeconfig folder "/etc/kubernetes")
skipping: [node1] => (item=[kubeconfig] Writing "admin.conf" kubeconfig file)
skipping: [node1] => (item=[kubeconfig] Writing "super-admin.conf" kubeconfig file)
skipping: [node1] => (item=[kubeconfig] Writing "kubelet.conf" kubeconfig file)
skipping: [node1] => (item=[kubeconfig] Writing "controller-manager.conf" kubeconfig file)
skipping: [node1] => (item=[kubeconfig] Writing "scheduler.conf" kubeconfig file)
skipping: [node1] => (item=[control-plane] Using manifest folder "/etc/kubernetes/manifests")
skipping: [node1] => (item=[control-plane] Creating static Pod manifest for "kube-apiserver")
skipping: [node1] => (item=[control-plane] Creating static Pod manifest for "kube-controller-manager")
skipping: [node1] => (item=[control-plane] Creating static Pod manifest for "kube-scheduler")
skipping: [node1] => (item=[kubelet-start] Writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env")
skipping: [node1] => (item=[kubelet-start] Writing kubelet configuration to file "/var/lib/kubelet/config.yaml")
skipping: [node1] => (item=[kubelet-start] Starting the kubelet)
skipping: [node1] => (item=[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory "/etc/kubernetes/manifests". This can take up to 5m0s)
skipping: [node1] => (item=[apiclient] All control plane components are healthy after 4.503417 seconds)
skipping: [node1] => (item=[upload-config] Storing the configuration used in ConfigMap "kubeadm-config" in the "kube-system" Namespace)
skipping: [node1] => (item=[kubelet] Creating a ConfigMap "kubelet-config" in namespace kube-system with the configuration for the kubelets in the cluster)
skipping: [node1] => (item=[upload-certs] Storing the certificates in Secret "kubeadm-certs" in the "kube-system" Namespace)
skipping: [node1] => (item=[upload-certs] Using certificate key:)
skipping: [node1] => (item=a9ecf4a1dcb5bb7b1b9cde4d4acc7cbf0aafafa5f91eeb5daa5c8e9b61db7ed3)
skipping: [node1] => (item=[mark-control-plane] Marking the node node1 as control-plane by adding the labels: [node-role.kubernetes.io/control-plane node.kubernetes.io/exclude-from-external-load-balancers])
skipping: [node1] => (item=[bootstrap-token] Using token: rzia16.4bmss69dy430ajyd)
skipping: [node1] => (item=[bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles)
skipping: [node1] => (item=[bootstrap-token] Configured RBAC rules to allow Node Bootstrap tokens to get nodes)
skipping: [node1] => (item=[bootstrap-token] Configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials)
skipping: [node1] => (item=[bootstrap-token] Configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token)
skipping: [node1] => (item=[bootstrap-token] Configured RBAC rules to allow certificate rotation for all node client certificates in the cluster)
skipping: [node1] => (item=[bootstrap-token] Creating the "cluster-info" ConfigMap in the "kube-public" namespace)
skipping: [node1] => (item=[kubelet-finalize] Updating "/etc/kubernetes/kubelet.conf" to point to a rotatable kubelet client certificate and key)
skipping: [node1] => (item=[addons] Applied essential addon: kube-proxy)
skipping: [node2] => (item=[init] Using Kubernetes version: v1.29.1)
skipping: [node1] => (item=)
skipping: [node2] => (item=[preflight] Running pre-flight checks)
skipping: [node2] => (item=[preflight] Pulling images required for setting up a Kubernetes cluster)
skipping: [node2] => (item=[preflight] This might take a minute or two, depending on the speed of your internet connection)
skipping: [node2] => (item=[preflight] You can also perform this action in beforehand using 'kubeadm config images pull')
skipping: [node2] => (item=[certs] Using certificateDir folder "/etc/kubernetes/ssl")
skipping: [node2] => (item=[certs] Generating "ca" certificate and key)
skipping: [node2] => (item=[certs] Generating "apiserver" certificate and key)
skipping: [node2] => (item=[certs] apiserver serving cert is signed for DNS names [kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local lb-apiserver.kubernetes.local localhost node1 node1.cluster.local node2 node2.cluster.local] and IPs [10.233.0.1 192.168.208.5 127.0.0.1 192.168.208.6])
skipping: [node2] => (item=[certs] Generating "apiserver-kubelet-client" certificate and key)
skipping: [node2] => (item=[certs] Generating "front-proxy-ca" certificate and key)
skipping: [node2] => (item=[certs] Generating "front-proxy-client" certificate and key)
skipping: [node2] => (item=[certs] External etcd mode: Skipping etcd/ca certificate authority generation)
skipping: [node2] => (item=[certs] External etcd mode: Skipping etcd/server certificate generation)
skipping: [node2] => (item=[certs] External etcd mode: Skipping etcd/peer certificate generation)
skipping: [node2] => (item=[certs] External etcd mode: Skipping etcd/healthcheck-client certificate generation)
skipping: [node2] => (item=[certs] External etcd mode: Skipping apiserver-etcd-client certificate generation)
skipping: [node2] => (item=[certs] Generating "sa" key and public key)
skipping: [node2] => (item=[kubeconfig] Using kubeconfig folder "/etc/kubernetes")
skipping: [node2] => (item=[kubeconfig] Writing "admin.conf" kubeconfig file)
skipping: [node2] => (item=[kubeconfig] Writing "super-admin.conf" kubeconfig file)
skipping: [node2] => (item=[kubeconfig] Writing "kubelet.conf" kubeconfig file)
skipping: [node2] => (item=[kubeconfig] Writing "controller-manager.conf" kubeconfig file)
skipping: [node2] => (item=[kubeconfig] Writing "scheduler.conf" kubeconfig file)
skipping: [node2] => (item=[control-plane] Using manifest folder "/etc/kubernetes/manifests")
skipping: [node2] => (item=[control-plane] Creating static Pod manifest for "kube-apiserver")
skipping: [node2] => (item=[control-plane] Creating static Pod manifest for "kube-controller-manager")
skipping: [node2] => (item=[control-plane] Creating static Pod manifest for "kube-scheduler")
skipping: [node2] => (item=[kubelet-start] Writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env")
skipping: [node2] => (item=[kubelet-start] Writing kubelet configuration to file "/var/lib/kubelet/config.yaml")
skipping: [node2] => (item=[kubelet-start] Starting the kubelet)
skipping: [node2] => (item=[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory "/etc/kubernetes/manifests". This can take up to 5m0s)
skipping: [node2] => (item=[apiclient] All control plane components are healthy after 4.503417 seconds)
skipping: [node2] => (item=[upload-config] Storing the configuration used in ConfigMap "kubeadm-config" in the "kube-system" Namespace)
skipping: [node2] => (item=[kubelet] Creating a ConfigMap "kubelet-config" in namespace kube-system with the configuration for the kubelets in the cluster)
skipping: [node2] => (item=[upload-certs] Storing the certificates in Secret "kubeadm-certs" in the "kube-system" Namespace)
skipping: [node2] => (item=[upload-certs] Using certificate key:)
skipping: [node2] => (item=a9ecf4a1dcb5bb7b1b9cde4d4acc7cbf0aafafa5f91eeb5daa5c8e9b61db7ed3)
skipping: [node2] => (item=[mark-control-plane] Marking the node node1 as control-plane by adding the labels: [node-role.kubernetes.io/control-plane node.kubernetes.io/exclude-from-external-load-balancers])
skipping: [node2] => (item=[bootstrap-token] Using token: rzia16.4bmss69dy430ajyd)
skipping: [node2] => (item=[bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles)
skipping: [node2] => (item=[bootstrap-token] Configured RBAC rules to allow Node Bootstrap tokens to get nodes)
skipping: [node2] => (item=[bootstrap-token] Configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials)
skipping: [node2] => (item=[bootstrap-token] Configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token)
skipping: [node2] => (item=[bootstrap-token] Configured RBAC rules to allow certificate rotation for all node client certificates in the cluster)
skipping: [node2] => (item=[bootstrap-token] Creating the "cluster-info" ConfigMap in the "kube-public" namespace)
skipping: [node2] => (item=[kubelet-finalize] Updating "/etc/kubernetes/kubelet.conf" to point to a rotatable kubelet client certificate and key)
skipping: [node2] => (item=[addons] Applied essential addon: kube-proxy)
skipping: [node2] => (item=)
skipping: [node2] => (item=Your Kubernetes control-plane has initialized successfully!)
skipping: [node2] => (item=)
skipping: [node2] => (item=To start using your cluster, you need to run the following as a regular user:)
skipping: [node2] => (item=)
skipping: [node2] => (item=  mkdir -p $HOME/.kube)
skipping: [node2] => (item=  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config)
skipping: [node2] => (item=  sudo chown $(id -u):$(id -g) $HOME/.kube/config)
skipping: [node2] => (item=)
skipping: [node2] => (item=Alternatively, if you are the root user, you can run:)
skipping: [node2] => (item=)
skipping: [node2] => (item=  export KUBECONFIG=/etc/kubernetes/admin.conf)
skipping: [node2] => (item=)
skipping: [node2] => (item=You should now deploy a pod network to the cluster.)
skipping: [node2] => (item=Run "kubectl apply -f [podnetwork].yaml" with one of the options listed at:)
skipping: [node2] => (item=  https://kubernetes.io/docs/concepts/cluster-administration/addons/)
skipping: [node2] => (item=)
skipping: [node2] => (item=You can now join any number of the control-plane node running the following command on each as root:)
skipping: [node2] => (item=)
skipping: [node2] => (item=  kubeadm join 192.168.208.5:6443 --token rzia16.4bmss69dy430ajyd \)
skipping: [node2] => (item=     --discovery-token-ca-cert-hash sha256:070b859806054f289ce5c3dee11b9be65b94b93f28f49a5f0318eb9130cff368 \)
skipping: [node2] => (item=     --control-plane --certificate-key a9ecf4a1dcb5bb7b1b9cde4d4acc7cbf0aafafa5f91eeb5daa5c8e9b61db7ed3)
skipping: [node2] => (item=)
skipping: [node2] => (item=Please note that the certificate-key gives access to cluster sensitive data, keep it secret!)
skipping: [node2] => (item=As a safeguard, uploaded-certs will be deleted in two hours; If necessary, you can use)
skipping: [node2] => (item="kubeadm init phase upload-certs --upload-certs" to reload certs afterward.)
skipping: [node2] => (item=)
skipping: [node2] => (item=Then you can join any number of worker nodes by running the following on each as root:)
skipping: [node2] => (item=)
skipping: [node2] => (item=kubeadm join 192.168.208.5:6443 --token rzia16.4bmss69dy430ajyd \)
skipping: [node2] => (item=     --discovery-token-ca-cert-hash sha256:070b859806054f289ce5c3dee11b9be65b94b93f28f49a5f0318eb9130cff368 )
skipping: [node2]
skipping: [node1] => (item=Your Kubernetes control-plane has initialized successfully!)
skipping: [node1] => (item=)
skipping: [node1] => (item=To start using your cluster, you need to run the following as a regular user:)
skipping: [node1] => (item=)
skipping: [node1] => (item=  mkdir -p $HOME/.kube)
skipping: [node1] => (item=  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config)
skipping: [node1] => (item=  sudo chown $(id -u):$(id -g) $HOME/.kube/config)
skipping: [node1] => (item=)
skipping: [node1] => (item=Alternatively, if you are the root user, you can run:)
skipping: [node1] => (item=)
skipping: [node1] => (item=  export KUBECONFIG=/etc/kubernetes/admin.conf)
skipping: [node1] => (item=)
skipping: [node1] => (item=You should now deploy a pod network to the cluster.)
skipping: [node1] => (item=Run "kubectl apply -f [podnetwork].yaml" with one of the options listed at:)
skipping: [node1] => (item=  https://kubernetes.io/docs/concepts/cluster-administration/addons/)
skipping: [node1] => (item=)
skipping: [node1] => (item=You can now join any number of the control-plane node running the following command on each as root:)
skipping: [node1] => (item=)
skipping: [node1] => (item=  kubeadm join 192.168.208.5:6443 --token rzia16.4bmss69dy430ajyd \)
skipping: [node1] => (item=     --discovery-token-ca-cert-hash sha256:070b859806054f289ce5c3dee11b9be65b94b93f28f49a5f0318eb9130cff368 \)
skipping: [node1] => (item=     --control-plane --certificate-key a9ecf4a1dcb5bb7b1b9cde4d4acc7cbf0aafafa5f91eeb5daa5c8e9b61db7ed3)
skipping: [node1] => (item=)
skipping: [node1] => (item=Please note that the certificate-key gives access to cluster sensitive data, keep it secret!)
skipping: [node1] => (item=As a safeguard, uploaded-certs will be deleted in two hours; If necessary, you can use)
skipping: [node1] => (item="kubeadm init phase upload-certs --upload-certs" to reload certs afterward.)
skipping: [node1] => (item=)
skipping: [node1] => (item=Then you can join any number of worker nodes by running the following on each as root:)
skipping: [node1] => (item=)
skipping: [node1] => (item=kubeadm join 192.168.208.5:6443 --token rzia16.4bmss69dy430ajyd \)
skipping: [node1] => (item=     --discovery-token-ca-cert-hash sha256:070b859806054f289ce5c3dee11b9be65b94b93f28f49a5f0318eb9130cff368 )
skipping: [node1]

TASK [kubernetes/control-plane : Create hardcoded kubeadm token for joining nodes with 24h expiration (if defined)] ********************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Create kubeadm token for joining nodes with 24h expiration (default)] *********************************************************************************************************************************************************************************************************************
ok: [node2 -> node1(192.168.208.5)]
ok: [node1]

TASK [kubernetes/control-plane : Set kubeadm_token] ************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/control-plane : Kubeadm | Join other masters] *************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/kubernetes/control-plane/tasks/kubeadm-secondary.yml for node1, node2

TASK [kubernetes/control-plane : Set kubeadm_discovery_address] ************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/control-plane : Upload certificates so they are fresh and not expired] ************************************************************************************************************************************************************************************************************************************
skipping: [node2]
changed: [node1]

TASK [kubernetes/control-plane : Parse certificate key if not set] *********************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [kubernetes/control-plane : Create kubeadm ControlPlane config] *******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
changed: [node2]

TASK [kubernetes/control-plane : Wait for k8s apiserver] *******************************************************************************************************************************************************************************************************************************************************************
ok: [node2]
ok: [node1]

TASK [kubernetes/control-plane : Check already run] ************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": false
}
ok: [node2] => {
    "msg": false
}

TASK [kubernetes/control-plane : Reset cert directory] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
changed: [node2]

TASK [kubernetes/control-plane : Joining control plane node to the cluster.] ***********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
changed: [node2]

TASK [kubernetes/control-plane : Kubeadm | upgrade kubernetes cluster] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Kubeadm | Remove taint for master with node role] *****************************************************************************************************************************************************************************************************************************************
changed: [node1] => (item=node-role.kubernetes.io/control-plane:NoSchedule-)
changed: [node2 -> node1(192.168.208.5)] => (item=node-role.kubernetes.io/control-plane:NoSchedule-)

TASK [kubernetes/control-plane : Include kubeadm etcd extra tasks] *********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/control-plane : Include kubeadm secondary server apiserver fixes] *****************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/kubernetes/control-plane/tasks/kubeadm-fix-apiserver.yml for node1, node2

TASK [kubernetes/control-plane : Update server field in component kubeconfigs] *********************************************************************************************************************************************************************************************************************************************
changed: [node1] => (item=admin.conf)
changed: [node2] => (item=admin.conf)
changed: [node1] => (item=controller-manager.conf)
changed: [node2] => (item=controller-manager.conf)
changed: [node1] => (item=kubelet.conf)
changed: [node2] => (item=kubelet.conf)
changed: [node1] => (item=scheduler.conf)
changed: [node2] => (item=scheduler.conf)

TASK [kubernetes/control-plane : Include kubelet client cert rotation fixes] ***********************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/kubernetes/control-plane/tasks/kubelet-fix-client-cert-rotation.yml for node1, node2

TASK [kubernetes/control-plane : Fixup kubelet client cert rotation 1/2] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/control-plane : Fixup kubelet client cert rotation 2/2] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/control-plane : Install script to renew K8S control plane certificates] ***********************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/control-plane : Renew K8S control plane certificates monthly 1/2] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=k8s-certs-renew.service)
skipping: [node1] => (item=k8s-certs-renew.timer)
skipping: [node1]
skipping: [node2] => (item=k8s-certs-renew.service)
skipping: [node2] => (item=k8s-certs-renew.timer)
skipping: [node2]

TASK [kubernetes/control-plane : Renew K8S control plane certificates monthly 2/2] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/client : Set external kube-apiserver endpoint] ************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/client : Create kube config dir for current/ansible become user] ******************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/client : Copy admin kubeconfig to current/ansible become user home] ***************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/client : Create kube artifacts dir] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/client : Wait for k8s apiserver] **************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/client : Get admin kubeconfig from remote host] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/client : Convert kubeconfig to YAML] **********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/client : Override username in kubeconfig] *****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/client : Write admin kubeconfig on ansible host] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/client : Copy kubectl binary to ansible host] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/client : Create helper script kubectl.sh on ansible host] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes-apps/cluster_roles : Kubernetes Apps | Wait for kube-apiserver] *******************************************************************************************************************************************************************************************************************************************
skipping: [node2]
ok: [node1]

TASK [kubernetes-apps/cluster_roles : Kubernetes Apps | Add ClusterRoleBinding to admit nodes] *****************************************************************************************************************************************************************************************************************************
skipping: [node2]
changed: [node1]

TASK [kubernetes-apps/cluster_roles : Apply workaround to allow all nodes with cert O=system:nodes to register] ************************************************************************************************************************************************************************************************************
skipping: [node2]
ok: [node1]

TASK [kubernetes-apps/cluster_roles : Kubernetes Apps | Remove old webhook ClusterRole] ************************************************************************************************************************************************************************************************************************************
skipping: [node2]
ok: [node1]

TASK [kubernetes-apps/cluster_roles : Kubernetes Apps | Remove old webhook ClusterRoleBinding] *****************************************************************************************************************************************************************************************************************************
skipping: [node2]
ok: [node1]

TASK [kubernetes-apps/cluster_roles : Configure Oracle Cloud provider] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/cluster_roles : PriorityClass | Copy k8s-cluster-critical-pc.yml file] *******************************************************************************************************************************************************************************************************************************
skipping: [node1]
changed: [node2]

TASK [kubernetes-apps/cluster_roles : PriorityClass | Create k8s-cluster-critical] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
ok: [node2]

RUNNING HANDLER [kubernetes/control-plane : Master | reload systemd] *******************************************************************************************************************************************************************************************************************************************************
ok: [node1]

RUNNING HANDLER [kubernetes/control-plane : Master | reload kubelet] *******************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

RUNNING HANDLER [kubernetes/control-plane : Master | Remove scheduler container docker] ************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

RUNNING HANDLER [kubernetes/control-plane : Master | Remove scheduler container containerd/crio] ***************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

RUNNING HANDLER [kubernetes/control-plane : Master | Remove controller manager container docker] ***************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

RUNNING HANDLER [kubernetes/control-plane : Master | Remove controller manager container containerd/crio] ******************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

RUNNING HANDLER [kubernetes/control-plane : Master | wait for kube-scheduler] **********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

RUNNING HANDLER [kubernetes/control-plane : Master | wait for kube-controller-manager] *************************************************************************************************************************************************************************************************************************************
FAILED - RETRYING: [node1]: Master | wait for kube-controller-manager (60 retries left).
FAILED - RETRYING: [node2]: Master | wait for kube-controller-manager (60 retries left).
ok: [node1]
ok: [node2]

RUNNING HANDLER [kubernetes/control-plane : Master | wait for the apiserver to be running] *********************************************************************************************************************************************************************************************************************************
ok: [node1]

PLAY [Invoke kubeadm and install a CNI] ************************************************************************************************************************************************************************************************************************************************************************************

TASK [kubespray-defaults : Gather ansible_default_ipv4 from all hosts] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=node1)
skipping: [node1] => (item=node2)
skipping: [node1]

TASK [kubespray-defaults : Create fallback_ips_base] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Set fallback_ips] *******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubespray-defaults : Set no_proxy to all assigned cluster IPs and hostnames] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Populates no_proxy to all hosts] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubespray-defaults : Set `etcd_deployment_type` to "kubeadm" if `etcd_kubeadm_enabled` is true] **********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/kubeadm : Set kubeadm_discovery_address] ******************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/kubeadm : Check if kubelet.conf exists] *******************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/kubeadm : Check if kubeadm CA cert is accessible] *********************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [kubernetes/kubeadm : Calculate kubeadm CA cert hash] *****************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [kubernetes/kubeadm : Create kubeadm token for joining nodes with 24h expiration (default)] ***************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/kubeadm : Set kubeadm_token to generated token] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/kubeadm : Set kubeadm api version to v1beta3] *************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/kubeadm : Create kubeadm client config] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/kubeadm : Kubeadm | Create directory to store kubeadm patches] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/kubeadm : Kubeadm | Copy kubeadm patches from inventory files] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/kubeadm : Join to cluster] ********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/kubeadm : Display kubeadm join stderr if any] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/kubeadm : Update server field in kubelet kubeconfig] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/kubeadm : Update server field in kubelet kubeconfig - external lb] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/kubeadm : Update server field in kube-proxy kubeconfig] ***************************************************************************************************************************************************************************************************************************************************
changed: [node1]

TASK [kubernetes/kubeadm : Update server field in kube-proxy kubeconfig - external lb] *************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/kubeadm : Set ca.crt file permission] *********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/kubeadm : Restart all kube-proxy pods to ensure that they load the new configmap] *************************************************************************************************************************************************************************************************************************
changed: [node1]

TASK [kubernetes/kubeadm : Extract etcd certs from control plane if using etcd kubeadm mode] *******************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node-label : Kubernetes Apps | Wait for kube-apiserver] ***************************************************************************************************************************************************************************************************************************************************
skipping: [node2]
ok: [node1]

TASK [kubernetes/node-label : Set role node label to empty list] ***********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/node-label : Node label for nvidia GPU nodes] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node-label : Set inventory node label to empty list] ******************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/node-label : Populate inventory node label] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node-label : debug] ***************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "role_node_labels": []
}
ok: [node2] => {
    "role_node_labels": []
}

TASK [kubernetes/node-label : debug] ***************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "inventory_node_labels": []
}
ok: [node2] => {
    "inventory_node_labels": []
}

TASK [kubernetes/node-label : Set label to node] ***************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node-taint : Set role and inventory node taint to empty list] *********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/node-taint : Node taint for nvidia GPU nodes] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node-taint : Populate inventory node taint] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/node-taint : debug] ***************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "role_node_taints": []
}
ok: [node2] => {
    "role_node_taints": []
}

TASK [kubernetes/node-taint : debug] ***************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "inventory_node_taints": []
}
ok: [node2] => {
    "inventory_node_taints": []
}

TASK [kubernetes/node-taint : Set taint to node] ***************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/cni : CNI | make sure /opt/cni/bin exists] ************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [network_plugin/cni : CNI | Copy cni plugins] *************************************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [network_plugin/cilium : Cilium | Check Cilium encryption `cilium_ipsec_key` for ipsec] *******************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/cilium : Stop if `cilium_ipsec_enabled` is defined and `cilium_encryption_type` is not `ipsec`] *******************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/cilium : Stop if kernel version is too low for Cilium Wireguard encryption] ***************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/cilium : Stop if bad Cilium identity allocation mode] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/cilium : Stop if bad Cilium Cluster ID] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/cilium : Stop if bad encryption type] *****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/cilium : Stop if cilium_version is < v1.10.0] *********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/cilium : Set `cilium_encryption_type` to "ipsec" and  if `cilium_ipsec_enabled` is true] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/cilium : Cilium install] ******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/cilium : Cilium apply] ********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Slurp CNI config] ****************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [network_plugin/calico : Set fact calico_cni_config from slurped CNI config] ******************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Set fact calico_datastore to etcd if needed] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Get kubelet hostname] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Gather os specific variables] *******************************************************************************************************************************************************************************************************************************************************
ok: [node1] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/network_plugin/calico/vars/../vars/debian.yml)
ok: [node2] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/network_plugin/calico/vars/../vars/debian.yml)

TASK [network_plugin/calico : Calico | Add wireguard yum repo] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico install] ******************************************************************************************************************************************************************************************************************************************************************************
included: /mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/network_plugin/calico/tasks/install.yml for node1, node2

TASK [network_plugin/calico : Calico | Install Wireguard packages] *********************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=wireguard)
skipping: [node1]
skipping: [node2] => (item=wireguard)
skipping: [node2]

TASK [network_plugin/calico : Calico | Copy calicoctl binary from download dir] ********************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [network_plugin/calico : Calico | Create calico certs directory] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Link etcd certificates for calico-node] *********************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'s': 'ca.pem', 'd': 'ca_cert.crt'})
skipping: [node1] => (item={'s': 'node-node1.pem', 'd': 'cert.crt'})
skipping: [node1] => (item={'s': 'node-node1-key.pem', 'd': 'key.pem'})
skipping: [node1]
skipping: [node2] => (item={'s': 'ca.pem', 'd': 'ca_cert.crt'})
skipping: [node2] => (item={'s': 'node-node2.pem', 'd': 'cert.crt'})
skipping: [node2] => (item={'s': 'node-node2-key.pem', 'd': 'key.pem'})
skipping: [node2]

TASK [network_plugin/calico : Calico | Generate typha certs] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Generate apiserver certs] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Install calicoctl wrapper script] ***************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [network_plugin/calico : Calico | wait for etcd] **********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Calico | Check if calico network pool has already been configured] ***************************************************************************************************************************************************************************************************************************
skipping: [node2]
ok: [node1]

TASK [network_plugin/calico : Calico | Ensure that calico_pool_cidr is within kube_pods_subnet when defined] ***************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Check if calico IPv6 network pool has already been configured] **********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Ensure that calico_pool_cidr_ipv6 is within kube_pods_subnet_ipv6 when defined] *****************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Check if extra directory is needed] *************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [network_plugin/calico : Calico | Set kdd path when calico < v3.22.3] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Set kdd path when calico > v3.22.2] *************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [network_plugin/calico : Calico | Create calico manifests for kdd] ****************************************************************************************************************************************************************************************************************************************************
changed: [node2]
changed: [node1]

TASK [network_plugin/calico : Calico | Create Calico Kubernetes datastore resources] ***************************************************************************************************************************************************************************************************************************************
skipping: [node2]
ok: [node1]

TASK [network_plugin/calico : Calico | Get existing FelixConfiguration] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node2]
fatal: [node1]: FAILED! => {"changed": false, "cmd": ["/usr/local/bin/calicoctl.sh", "get", "felixconfig", "default", "-o", "json"], "delta": "0:00:00.090301", "end": "2024-02-15 05:46:23.796359", "msg": "non-zero return code", "rc": 1, "start": "2024-02-15 05:46:23.706058", "stderr": "resource does not exist: FelixConfiguration(default) with error: felixconfigurations.crd.projectcalico.org \"default\" not found", "stderr_lines": ["resource does not exist: FelixConfiguration(default) with error: felixconfigurations.crd.projectcalico.org \"default\" not found"], "stdout": "null", "stdout_lines": ["null"]}
...ignoring

TASK [network_plugin/calico : Calico | Set kubespray FelixConfiguration] ***************************************************************************************************************************************************************************************************************************************************
ok: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Process FelixConfiguration] *********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Configure calico FelixConfiguration] ************************************************************************************************************************************************************************************************************************************************
skipping: [node2]
ok: [node1]

TASK [network_plugin/calico : Calico | Get existing calico network pool] ***************************************************************************************************************************************************************************************************************************************************
skipping: [node2]
fatal: [node1]: FAILED! => {"changed": false, "cmd": ["/usr/local/bin/calicoctl.sh", "get", "ippool", "default-pool", "-o", "json"], "delta": "0:00:00.074457", "end": "2024-02-15 05:46:25.613256", "msg": "non-zero return code", "rc": 1, "start": "2024-02-15 05:46:25.538799", "stderr": "resource does not exist: IPPool(default-pool) with error: ippools.crd.projectcalico.org \"default-pool\" not found", "stderr_lines": ["resource does not exist: IPPool(default-pool) with error: ippools.crd.projectcalico.org \"default-pool\" not found"], "stdout": "null", "stdout_lines": ["null"]}
...ignoring

TASK [network_plugin/calico : Calico | Set kubespray calico network pool] **************************************************************************************************************************************************************************************************************************************************
ok: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Get current calico network pool blocksize] ******************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Merge calico network pool] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Configure calico network pool] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node2]
ok: [node1]

TASK [network_plugin/calico : Calico | Get existing calico ipv6 network pool] **********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Set kubespray calico network pool] **************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Get current calico ipv6 network pool blocksize] *************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Merge calico ipv6 network pool] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Configure calico ipv6 network pool] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Populate Service External IPs] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Populate Service LoadBalancer IPs] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Determine nodeToNodeMesh needed state] *******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Calico | Get existing BGP Configuration] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node2]
fatal: [node1]: FAILED! => {"changed": false, "cmd": ["/usr/local/bin/calicoctl.sh", "get", "bgpconfig", "default", "-o", "json"], "delta": "0:00:00.071946", "end": "2024-02-15 05:46:28.612154", "msg": "non-zero return code", "rc": 1, "start": "2024-02-15 05:46:28.540208", "stderr": "resource does not exist: BGPConfiguration(default) with error: bgpconfigurations.crd.projectcalico.org \"default\" not found", "stderr_lines": ["resource does not exist: BGPConfiguration(default) with error: bgpconfigurations.crd.projectcalico.org \"default\" not found"], "stdout": "null", "stdout_lines": ["null"]}
...ignoring

TASK [network_plugin/calico : Calico | Set kubespray BGP Configuration] ****************************************************************************************************************************************************************************************************************************************************
ok: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Process BGP Configuration] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Set up BGP Configuration] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node2]
ok: [node1]

TASK [network_plugin/calico : Calico | Create calico manifests] ************************************************************************************************************************************************************************************************************************************************************
changed: [node1] => (item={'name': 'calico-config', 'file': 'calico-config.yml', 'type': 'cm'})
changed: [node2] => (item={'name': 'calico-config', 'file': 'calico-config.yml', 'type': 'cm'})
changed: [node1] => (item={'name': 'calico-node', 'file': 'calico-node.yml', 'type': 'ds'})
changed: [node2] => (item={'name': 'calico-node', 'file': 'calico-node.yml', 'type': 'ds'})
changed: [node1] => (item={'name': 'calico', 'file': 'calico-node-sa.yml', 'type': 'sa'})
changed: [node2] => (item={'name': 'calico', 'file': 'calico-node-sa.yml', 'type': 'sa'})
changed: [node2] => (item={'name': 'calico', 'file': 'calico-cr.yml', 'type': 'clusterrole'})
changed: [node1] => (item={'name': 'calico', 'file': 'calico-cr.yml', 'type': 'clusterrole'})
changed: [node2] => (item={'name': 'calico', 'file': 'calico-crb.yml', 'type': 'clusterrolebinding'})
changed: [node1] => (item={'name': 'calico', 'file': 'calico-crb.yml', 'type': 'clusterrolebinding'})
changed: [node1] => (item={'name': 'kubernetes-services-endpoint', 'file': 'kubernetes-services-endpoint.yml', 'type': 'cm'})
changed: [node2] => (item={'name': 'kubernetes-services-endpoint', 'file': 'kubernetes-services-endpoint.yml', 'type': 'cm'})

TASK [network_plugin/calico : Calico | Create calico manifests for typha] **************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'calico', 'file': 'calico-typha.yml', 'type': 'typha'})
skipping: [node1]
skipping: [node2] => (item={'name': 'calico', 'file': 'calico-typha.yml', 'type': 'typha'})
skipping: [node2]

TASK [network_plugin/calico : Calico | get calico apiserver caBundle] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | set calico apiserver caBundle fact] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Create calico manifests for apiserver] **********************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'calico', 'file': 'calico-apiserver.yml', 'type': 'calico-apiserver'})
skipping: [node1]
skipping: [node2] => (item={'name': 'calico', 'file': 'calico-apiserver.yml', 'type': 'calico-apiserver'})
skipping: [node2]

TASK [network_plugin/calico : Start Calico resources] **********************************************************************************************************************************************************************************************************************************************************************
skipping: [node2] => (item=calico-config.yml)
skipping: [node2] => (item=calico-node.yml)
skipping: [node2] => (item=calico-node-sa.yml)
skipping: [node2] => (item=calico-cr.yml)
skipping: [node2] => (item=calico-crb.yml)
skipping: [node2] => (item=kubernetes-services-endpoint.yml)
skipping: [node2] => (item=calico-typha.yml)
skipping: [node2]
ok: [node1] => (item=calico-config.yml)
ok: [node1] => (item=calico-node.yml)
ok: [node1] => (item=calico-node-sa.yml)
ok: [node1] => (item=calico-cr.yml)
ok: [node1] => (item=calico-crb.yml)
ok: [node1] => (item=kubernetes-services-endpoint.yml)
skipping: [node1] => (item=calico-typha.yml)

TASK [network_plugin/calico : Start Calico apiserver resources] ************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=calico-apiserver.yml)
skipping: [node1]
skipping: [node2] => (item=calico-apiserver.yml)
skipping: [node2]

TASK [network_plugin/calico : Wait for calico kubeconfig to be created] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Create Calico ipam manifests] *******************************************************************************************************************************************************************************************************************************************************
changed: [node1] => (item={'name': 'calico', 'file': 'calico-ipamconfig.yml', 'type': 'ipam'})
changed: [node2] => (item={'name': 'calico', 'file': 'calico-ipamconfig.yml', 'type': 'ipam'})

TASK [network_plugin/calico : Calico | Create ipamconfig resources] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node2]
ok: [node1]

TASK [network_plugin/calico : Calico | Peer with Calico Route Reflector] ***************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/calico : Calico | Peer with the router] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/flannel : Flannel | Stop if kernel version is too low for Flannel Wireguard encryption] ***************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/flannel : Flannel | Create Flannel manifests] *********************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'flannel', 'file': 'cni-flannel-rbac.yml', 'type': 'sa'})
skipping: [node1] => (item={'name': 'kube-flannel', 'file': 'cni-flannel.yml', 'type': 'ds'})
skipping: [node1]
skipping: [node2] => (item={'name': 'flannel', 'file': 'cni-flannel-rbac.yml', 'type': 'sa'})
skipping: [node2] => (item={'name': 'kube-flannel', 'file': 'cni-flannel.yml', 'type': 'ds'})
skipping: [node2]

TASK [network_plugin/weave : Weave | Create manifest] **********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/weave : Weave | Fix nodePort for Weave] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/macvlan : Macvlan | Retrieve Pod Cidr] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/macvlan : Macvlan | set node_pod_cidr] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/macvlan : Macvlan | Retrieve default gateway network interface] ***************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/macvlan : Macvlan | set node_default_gateway_interface] ***********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/macvlan : Macvlan | Install network gateway interface on debian] **************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/macvlan : Macvlan | Install macvlan script on centos] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/network_plugin/macvlan/files/ifdown-local)
skipping: [node1] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/network_plugin/macvlan/files/ifdown-macvlan)
skipping: [node1] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/network_plugin/macvlan/files/ifup-local)
skipping: [node1] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/network_plugin/macvlan/files/ifup-macvlan)
skipping: [node1]
skipping: [node2] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/network_plugin/macvlan/files/ifdown-local)
skipping: [node2] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/network_plugin/macvlan/files/ifdown-macvlan)
skipping: [node2] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/network_plugin/macvlan/files/ifup-local)
skipping: [node2] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/network_plugin/macvlan/files/ifup-macvlan)
skipping: [node2]

TASK [network_plugin/macvlan : Macvlan | Install post-up script on centos] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/macvlan : Macvlan | Install network gateway interface on centos] **************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'src': 'centos-network-macvlan.cfg', 'dst': 'ifcfg-mac0'})
skipping: [node1] => (item={'src': 'centos-routes-macvlan.cfg', 'dst': 'route-mac0'})
skipping: [node1] => (item={'src': 'centos-postup-macvlan.cfg', 'dst': 'post-up-mac0'})
skipping: [node1]
skipping: [node2] => (item={'src': 'centos-network-macvlan.cfg', 'dst': 'ifcfg-mac0'})
skipping: [node2] => (item={'src': 'centos-routes-macvlan.cfg', 'dst': 'route-mac0'})
skipping: [node2] => (item={'src': 'centos-postup-macvlan.cfg', 'dst': 'post-up-mac0'})
skipping: [node2]

TASK [network_plugin/macvlan : Macvlan | Install service nat via gateway on Flatcar Container Linux] ***********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/macvlan : Macvlan | Enable service nat via gateway on Flatcar Container Linux] ************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=systemctl daemon-reload)
skipping: [node1] => (item=systemctl enable enable_nat_ouside.service)
skipping: [node1]
skipping: [node2] => (item=systemctl daemon-reload)
skipping: [node2] => (item=systemctl enable enable_nat_ouside.service)
skipping: [node2]

TASK [network_plugin/macvlan : Macvlan | Install network gateway interface on Flatcar Container Linux] *********************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'src': 'coreos-device-macvlan.cfg', 'dst': 'macvlan.netdev'})
skipping: [node1] => (item={'src': 'coreos-interface-macvlan.cfg', 'dst': 'output.network'})
skipping: [node1] => (item={'src': 'coreos-network-macvlan.cfg', 'dst': 'macvlan.network'})
skipping: [node1]
skipping: [node2] => (item={'src': 'coreos-device-macvlan.cfg', 'dst': 'macvlan.netdev'})
skipping: [node2] => (item={'src': 'coreos-interface-macvlan.cfg', 'dst': 'output.network'})
skipping: [node2] => (item={'src': 'coreos-network-macvlan.cfg', 'dst': 'macvlan.network'})
skipping: [node2]

TASK [network_plugin/macvlan : Macvlan | Install cni definition for Macvlan] ***********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/macvlan : Macvlan | Install loopback definition for Macvlan] ******************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/macvlan : Enable net.ipv4.conf.all.arp_notify in sysctl] **********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/kube-ovn : Kube-OVN | Label ovn-db node] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=node1)
skipping: [node1] => (item=node2)
skipping: [node1]
skipping: [node2] => (item=node1)
skipping: [node2] => (item=node2)
skipping: [node2]

TASK [network_plugin/kube-ovn : Kube-OVN | Create Kube-OVN manifests] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'kube-ovn-crd', 'file': 'cni-kube-ovn-crd.yml'})
skipping: [node1] => (item={'name': 'ovn', 'file': 'cni-ovn.yml'})
skipping: [node1] => (item={'name': 'kube-ovn', 'file': 'cni-kube-ovn.yml'})
skipping: [node1]
skipping: [node2] => (item={'name': 'kube-ovn-crd', 'file': 'cni-kube-ovn-crd.yml'})
skipping: [node2] => (item={'name': 'ovn', 'file': 'cni-ovn.yml'})
skipping: [node2] => (item={'name': 'kube-ovn', 'file': 'cni-kube-ovn.yml'})
skipping: [node2]

TASK [network_plugin/kube-router : Kube-router | Add annotations on kube_control_plane] ************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/kube-router : Kube-router | Add annotations on kube_node] *********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/kube-router : Kube-router | Add common annotations on all servers] ************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/kube-router : Kube-router | Create config directory] **************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/kube-router : Kube-router | Create kubeconfig] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/kube-router : Kube-router | Slurp cni config] *********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/kube-router : Kube-router | Set cni_config variable] **************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/kube-router : Kube-router | Set host_subnet variable] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/kube-router : Kube-router | Create cni config] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/kube-router : Kube-router | Delete old configuration] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/kube-router : Kube-router | Create manifest] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes-apps/helm : Helm | Gather os specific variables] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/kubernetes-apps/helm/vars/../vars/debian.yml)
skipping: [node1]
skipping: [node2] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/kubernetes-apps/helm/vars/../vars/debian.yml)
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Install PyYaml] ************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Install PyYaml [flatcar]] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Download helm] *************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Copy helm binary from download dir] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Get helm completion] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Install helm completion] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [helm-apps : Validating arguments against arg spec 'main' - Install a list of Helm charts.] ***************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [helm-apps : Add Helm repositories] ***********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': '', 'url': ''})
skipping: [node1]
skipping: [node2] => (item={'name': '', 'url': ''})
skipping: [node2]

TASK [helm-apps : Update Helm repositories] ********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [helm-apps : Install Helm Applications] *******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': '', 'namespace': 'kube-system', 'chart_ref': '', 'chart_version': '', 'wait': True, 'values': {}})
skipping: [node1]
skipping: [node2] => (item={'name': '', 'namespace': 'kube-system', 'chart_ref': '', 'chart_version': '', 'wait': True, 'values': {}})
skipping: [node2]

TASK [network_plugin/custom_cni : Custom CNI | Check Custom CNI Manifests] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/custom_cni : Custom CNI | Copy Custom manifests] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/custom_cni : Custom CNI | Start Resources] ************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/multus : Multus | Copy manifest files] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'multus-crd', 'file': 'multus-crd.yml', 'type': 'customresourcedefinition'})
skipping: [node1] => (item={'name': 'multus-serviceaccount', 'file': 'multus-serviceaccount.yml', 'type': 'serviceaccount'})
skipping: [node1] => (item={'name': 'multus-clusterrole', 'file': 'multus-clusterrole.yml', 'type': 'clusterrole'})
skipping: [node1] => (item={'name': 'multus-clusterrolebinding', 'file': 'multus-clusterrolebinding.yml', 'type': 'clusterrolebinding'})
skipping: [node1]
skipping: [node2] => (item={'name': 'multus-crd', 'file': 'multus-crd.yml', 'type': 'customresourcedefinition'})
skipping: [node2] => (item={'name': 'multus-serviceaccount', 'file': 'multus-serviceaccount.yml', 'type': 'serviceaccount'})
skipping: [node2] => (item={'name': 'multus-clusterrole', 'file': 'multus-clusterrole.yml', 'type': 'clusterrole'})
skipping: [node2] => (item={'name': 'multus-clusterrolebinding', 'file': 'multus-clusterrolebinding.yml', 'type': 'clusterrolebinding'})
skipping: [node2]

TASK [network_plugin/multus : Multus | Check container engine type] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [network_plugin/multus : Multus | Copy manifest templates] ************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'multus-daemonset-containerd', 'file': 'multus-daemonset-containerd.yml', 'type': 'daemonset', 'engine': 'containerd'})
skipping: [node1] => (item={'name': 'multus-daemonset-docker', 'file': 'multus-daemonset-docker.yml', 'type': 'daemonset', 'engine': 'docker'})
skipping: [node2] => (item={'name': 'multus-daemonset-containerd', 'file': 'multus-daemonset-containerd.yml', 'type': 'daemonset', 'engine': 'containerd'})
skipping: [node1] => (item={'name': 'multus-daemonset-crio', 'file': 'multus-daemonset-crio.yml', 'type': 'daemonset', 'engine': 'crio'})
skipping: [node1]
skipping: [node2] => (item={'name': 'multus-daemonset-docker', 'file': 'multus-daemonset-docker.yml', 'type': 'daemonset', 'engine': 'docker'})
skipping: [node2] => (item={'name': 'multus-daemonset-crio', 'file': 'multus-daemonset-crio.yml', 'type': 'daemonset', 'engine': 'crio'})
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Gather os specific variables] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/kubernetes-apps/helm/vars/../vars/debian.yml)
skipping: [node1]
skipping: [node2] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/kubernetes-apps/helm/vars/../vars/debian.yml)
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Install PyYaml] ************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Install PyYaml [flatcar]] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Download helm] *************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Copy helm binary from download dir] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Get helm completion] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Install helm completion] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [helm-apps : Validating arguments against arg spec 'main' - Install a list of Helm charts.] ***************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [helm-apps : Add Helm repositories] ***********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'kubelet-csr-approver', 'url': 'https://postfinance.github.io/kubelet-csr-approver'})
skipping: [node1]
skipping: [node2] => (item={'name': 'kubelet-csr-approver', 'url': 'https://postfinance.github.io/kubelet-csr-approver'})
skipping: [node2]

TASK [helm-apps : Update Helm repositories] ********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [helm-apps : Install Helm Applications] *******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'kubelet-csr-approver', 'namespace': 'kube-system', 'chart_ref': 'kubelet-csr-approver/kubelet-csr-approver', 'chart_version': '0.2.8', 'wait': True, 'values': {}})
skipping: [node1]
skipping: [node2] => (item={'name': 'kubelet-csr-approver', 'namespace': 'kube-system', 'chart_ref': 'kubelet-csr-approver/kubelet-csr-approver', 'chart_version': '0.2.8', 'wait': True, 'values': {}})
skipping: [node2]

PLAY [Install Calico Route Reflector] **************************************************************************************************************************************************************************************************************************************************************************************
skipping: no hosts matched

PLAY [Patch Kubernetes for Windows] ****************************************************************************************************************************************************************************************************************************************************************************************

TASK [kubespray-defaults : Gather ansible_default_ipv4 from all hosts] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=node1)
skipping: [node1] => (item=node2)
skipping: [node1]

TASK [kubespray-defaults : Create fallback_ips_base] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Set fallback_ips] *******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Set no_proxy to all assigned cluster IPs and hostnames] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Populates no_proxy to all hosts] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Set `etcd_deployment_type` to "kubeadm" if `etcd_kubeadm_enabled` is true] **********************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [win_nodes/kubernetes_patch : Ensure that user manifests directory exists] ********************************************************************************************************************************************************************************************************************************************
changed: [node1]

TASK [win_nodes/kubernetes_patch : Check current nodeselector for kube-proxy daemonset] ************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [win_nodes/kubernetes_patch : Apply nodeselector patch for kube-proxy daemonset] **************************************************************************************************************************************************************************************************************************************
changed: [node1]

TASK [win_nodes/kubernetes_patch : debug] **********************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": [
        "daemonset.apps/kube-proxy patched (no change)"
    ]
}

TASK [win_nodes/kubernetes_patch : debug] **********************************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "msg": []
}

PLAY [Install Kubernetes apps] *********************************************************************************************************************************************************************************************************************************************************************************************

TASK [kubespray-defaults : Gather ansible_default_ipv4 from all hosts] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=node1)
skipping: [node1] => (item=node2)
skipping: [node1]

TASK [kubespray-defaults : Create fallback_ips_base] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Set fallback_ips] *******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubespray-defaults : Set no_proxy to all assigned cluster IPs and hostnames] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Populates no_proxy to all hosts] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubespray-defaults : Set `etcd_deployment_type` to "kubeadm" if `etcd_kubeadm_enabled` is true] **********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_cloud_controller/openstack : External OpenStack Cloud Controller | Check OpenStack credentials] *********************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_cloud_controller/openstack : External OpenStack Cloud Controller | Get base64 cacert] *******************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_cloud_controller/openstack : External OpenStack Cloud Controller | Get base64 cloud-config] *************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_cloud_controller/openstack : External OpenStack Cloud Controller | Generate Manifests] ******************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'external-openstack-cloud-config-secret', 'file': 'external-openstack-cloud-config-secret.yml'})
skipping: [node1] => (item={'name': 'external-openstack-cloud-controller-manager-roles', 'file': 'external-openstack-cloud-controller-manager-roles.yml'})
skipping: [node1] => (item={'name': 'external-openstack-cloud-controller-manager-role-bindings', 'file': 'external-openstack-cloud-controller-manager-role-bindings.yml'})
skipping: [node1] => (item={'name': 'external-openstack-cloud-controller-manager-ds', 'file': 'external-openstack-cloud-controller-manager-ds.yml'})
skipping: [node1]
skipping: [node2] => (item={'name': 'external-openstack-cloud-config-secret', 'file': 'external-openstack-cloud-config-secret.yml'})
skipping: [node2] => (item={'name': 'external-openstack-cloud-controller-manager-roles', 'file': 'external-openstack-cloud-controller-manager-roles.yml'})
skipping: [node2] => (item={'name': 'external-openstack-cloud-controller-manager-role-bindings', 'file': 'external-openstack-cloud-controller-manager-role-bindings.yml'})
skipping: [node2] => (item={'name': 'external-openstack-cloud-controller-manager-ds', 'file': 'external-openstack-cloud-controller-manager-ds.yml'})
skipping: [node2]

TASK [kubernetes-apps/external_cloud_controller/openstack : External OpenStack Cloud Controller | Apply Manifests] *********************************************************************************************************************************************************************************************************
skipping: [node1] => (item=external-openstack-cloud-config-secret.yml)
skipping: [node1] => (item=external-openstack-cloud-controller-manager-roles.yml)
skipping: [node1] => (item=external-openstack-cloud-controller-manager-role-bindings.yml)
skipping: [node1] => (item=external-openstack-cloud-controller-manager-ds.yml)
skipping: [node1]
skipping: [node2] => (item=external-openstack-cloud-config-secret.yml)
skipping: [node2] => (item=external-openstack-cloud-controller-manager-roles.yml)
skipping: [node2] => (item=external-openstack-cloud-controller-manager-role-bindings.yml)
skipping: [node2] => (item=external-openstack-cloud-controller-manager-ds.yml)
skipping: [node2]

TASK [kubernetes-apps/external_cloud_controller/vsphere : External vSphere Cloud Controller | Check vsphere credentials] ***************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_cloud_controller/vsphere : External vSphere Cloud Controller | Generate CPI cloud-config] ***************************************************************************************************************************************************************************************************
skipping: [node1] => (item=external-vsphere-cpi-cloud-config)
skipping: [node1]
skipping: [node2] => (item=external-vsphere-cpi-cloud-config)
skipping: [node2]

TASK [kubernetes-apps/external_cloud_controller/vsphere : External vSphere Cloud Controller | Generate Manifests] **********************************************************************************************************************************************************************************************************
skipping: [node1] => (item=external-vsphere-cpi-cloud-config-secret.yml)
skipping: [node1] => (item=external-vsphere-cloud-controller-manager-roles.yml)
skipping: [node1] => (item=external-vsphere-cloud-controller-manager-role-bindings.yml)
skipping: [node1] => (item=external-vsphere-cloud-controller-manager-ds.yml)
skipping: [node1]
skipping: [node2] => (item=external-vsphere-cpi-cloud-config-secret.yml)
skipping: [node2] => (item=external-vsphere-cloud-controller-manager-roles.yml)
skipping: [node2] => (item=external-vsphere-cloud-controller-manager-role-bindings.yml)
skipping: [node2] => (item=external-vsphere-cloud-controller-manager-ds.yml)
skipping: [node2]

TASK [kubernetes-apps/external_cloud_controller/vsphere : External vSphere Cloud Provider Interface | Create a CPI configMap manifest] *************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_cloud_controller/vsphere : External vSphere Cloud Provider Interface | Apply a CPI configMap manifest] **************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_cloud_controller/vsphere : External vSphere Cloud Controller | Apply Manifests] *************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=external-vsphere-cpi-cloud-config-secret.yml)
skipping: [node1] => (item=external-vsphere-cloud-controller-manager-roles.yml)
skipping: [node1] => (item=external-vsphere-cloud-controller-manager-role-bindings.yml)
skipping: [node1] => (item=external-vsphere-cloud-controller-manager-ds.yml)
skipping: [node1]
skipping: [node2] => (item=external-vsphere-cpi-cloud-config-secret.yml)
skipping: [node2] => (item=external-vsphere-cloud-controller-manager-roles.yml)
skipping: [node2] => (item=external-vsphere-cloud-controller-manager-role-bindings.yml)
skipping: [node2] => (item=external-vsphere-cloud-controller-manager-ds.yml)
skipping: [node2]

TASK [kubernetes-apps/external_cloud_controller/hcloud : External Hcloud Cloud Controller | Generate Manifests] ************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_cloud_controller/hcloud : External Hcloud Cloud Controller | Apply Manifests] ***************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_cloud_controller/huaweicloud : External Huawei Cloud Controller | Check Huawei credentials] *************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_cloud_controller/huaweicloud : External huaweicloud Cloud Controller | Get base64 cacert] ***************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_cloud_controller/huaweicloud : External huaweicloud Cloud Controller | Get base64 cloud-config] *********************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_cloud_controller/huaweicloud : External Huawei Cloud Controller | Generate Manifests] *******************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'external-huawei-cloud-config-secret', 'file': 'external-huawei-cloud-config-secret.yml'})
skipping: [node1] => (item={'name': 'external-huawei-cloud-controller-manager-roles', 'file': 'external-huawei-cloud-controller-manager-roles.yml'})
skipping: [node1] => (item={'name': 'external-huawei-cloud-controller-manager-role-bindings', 'file': 'external-huawei-cloud-controller-manager-role-bindings.yml'})
skipping: [node1] => (item={'name': 'external-huawei-cloud-controller-manager-ds', 'file': 'external-huawei-cloud-controller-manager-ds.yml'})
skipping: [node1]
skipping: [node2] => (item={'name': 'external-huawei-cloud-config-secret', 'file': 'external-huawei-cloud-config-secret.yml'})
skipping: [node2] => (item={'name': 'external-huawei-cloud-controller-manager-roles', 'file': 'external-huawei-cloud-controller-manager-roles.yml'})
skipping: [node2] => (item={'name': 'external-huawei-cloud-controller-manager-role-bindings', 'file': 'external-huawei-cloud-controller-manager-role-bindings.yml'})
skipping: [node2] => (item={'name': 'external-huawei-cloud-controller-manager-ds', 'file': 'external-huawei-cloud-controller-manager-ds.yml'})
skipping: [node2]

TASK [kubernetes-apps/external_cloud_controller/huaweicloud : External Huawei Cloud Controller | Apply Manifests] **********************************************************************************************************************************************************************************************************
skipping: [node1] => (item=external-huawei-cloud-config-secret.yml)
skipping: [node1] => (item=external-huawei-cloud-controller-manager-roles.yml)
skipping: [node1] => (item=external-huawei-cloud-controller-manager-role-bindings.yml)
skipping: [node1] => (item=external-huawei-cloud-controller-manager-ds.yml)
skipping: [node1]
skipping: [node2] => (item=external-huawei-cloud-config-secret.yml)
skipping: [node2] => (item=external-huawei-cloud-controller-manager-roles.yml)
skipping: [node2] => (item=external-huawei-cloud-controller-manager-role-bindings.yml)
skipping: [node2] => (item=external-huawei-cloud-controller-manager-ds.yml)
skipping: [node2]

TASK [kubernetes-apps/network_plugin/flannel : Flannel | Start Resources] **************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': "kube_network_plugin == 'flannel'", 'item': {'name': 'flannel', 'file': 'cni-flannel-rbac.yml', 'type': 'sa'}, 'ansible_loop_var': 'item'})
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': "kube_network_plugin == 'flannel'", 'item': {'name': 'kube-flannel', 'file': 'cni-flannel.yml', 'type': 'ds'}, 'ansible_loop_var': 'item'})
skipping: [node1]
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': "kube_network_plugin == 'flannel'", 'item': {'name': 'flannel', 'file': 'cni-flannel-rbac.yml', 'type': 'sa'}, 'ansible_loop_var': 'item'})
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': "kube_network_plugin == 'flannel'", 'item': {'name': 'kube-flannel', 'file': 'cni-flannel.yml', 'type': 'ds'}, 'ansible_loop_var': 'item'})
skipping: [node2]

TASK [kubernetes-apps/network_plugin/flannel : Flannel | Wait for flannel subnet.env file presence] ************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/network_plugin/kube-ovn : Kube-OVN | Start Resources] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': "kube_network_plugin == 'kube-ovn'", 'item': {'name': 'kube-ovn-crd', 'file': 'cni-kube-ovn-crd.yml'}, 'ansible_loop_var': 'item'})
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': "kube_network_plugin == 'kube-ovn'", 'item': {'name': 'ovn', 'file': 'cni-ovn.yml'}, 'ansible_loop_var': 'item'})
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': "kube_network_plugin == 'kube-ovn'", 'item': {'name': 'kube-ovn', 'file': 'cni-kube-ovn.yml'}, 'ansible_loop_var': 'item'})
skipping: [node1]
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': "kube_network_plugin == 'kube-ovn'", 'item': {'name': 'kube-ovn-crd', 'file': 'cni-kube-ovn-crd.yml'}, 'ansible_loop_var': 'item'})
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': "kube_network_plugin == 'kube-ovn'", 'item': {'name': 'ovn', 'file': 'cni-ovn.yml'}, 'ansible_loop_var': 'item'})
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': "kube_network_plugin == 'kube-ovn'", 'item': {'name': 'kube-ovn', 'file': 'cni-kube-ovn.yml'}, 'ansible_loop_var': 'item'})
skipping: [node2]

TASK [kubernetes-apps/network_plugin/weave : Weave | Start Resources] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/network_plugin/weave : Weave | Wait for Weave to become available] ***********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/network_plugin/kube-router : Kube-router | Start Resources] ******************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes-apps/network_plugin/kube-router : Kube-router | Wait for kube-router pods to be ready] ********************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes-apps/network_plugin/multus : Multus | Start resources] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=multus-crd)
skipping: [node1] => (item=multus-serviceaccount)
skipping: [node1] => (item=multus-clusterrole)
skipping: [node1] => (item=multus-clusterrolebinding)
skipping: [node1] => (item=multus-daemonset-containerd)
skipping: [node1] => (item=multus-daemonset-docker)
skipping: [node1] => (item=multus-daemonset-crio)
skipping: [node1] => (item=multus-daemonset-containerd)
skipping: [node1] => (item=multus-daemonset-docker)
skipping: [node1] => (item=multus-daemonset-crio)
skipping: [node1]

TASK [policy_controller/calico : Create calico-kube-controllers manifests] *************************************************************************************************************************************************************************************************************************************************
skipping: [node2] => (item={'name': 'calico-kube-controllers', 'file': 'calico-kube-controllers.yml', 'type': 'deployment'})
skipping: [node2] => (item={'name': 'calico-kube-controllers', 'file': 'calico-kube-sa.yml', 'type': 'sa'})
skipping: [node2] => (item={'name': 'calico-kube-controllers', 'file': 'calico-kube-cr.yml', 'type': 'clusterrole'})
skipping: [node2] => (item={'name': 'calico-kube-controllers', 'file': 'calico-kube-crb.yml', 'type': 'clusterrolebinding'})
skipping: [node2]
changed: [node1] => (item={'name': 'calico-kube-controllers', 'file': 'calico-kube-controllers.yml', 'type': 'deployment'})
changed: [node1] => (item={'name': 'calico-kube-controllers', 'file': 'calico-kube-sa.yml', 'type': 'sa'})
changed: [node1] => (item={'name': 'calico-kube-controllers', 'file': 'calico-kube-cr.yml', 'type': 'clusterrole'})
changed: [node1] => (item={'name': 'calico-kube-controllers', 'file': 'calico-kube-crb.yml', 'type': 'clusterrolebinding'})

TASK [policy_controller/calico : Start of Calico kube controllers] *********************************************************************************************************************************************************************************************************************************************************
skipping: [node2] => (item=calico-kube-controllers.yml)
skipping: [node2] => (item=calico-kube-sa.yml)
skipping: [node2] => (item=calico-kube-cr.yml)
skipping: [node2] => (item=calico-kube-crb.yml)
skipping: [node2]
ok: [node1] => (item=calico-kube-controllers.yml)
ok: [node1] => (item=calico-kube-sa.yml)
ok: [node1] => (item=calico-kube-cr.yml)
ok: [node1] => (item=calico-kube-crb.yml)

TASK [kubernetes-apps/ingress_controller/ingress_nginx : NGINX Ingress Controller | Create addon dir] **********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/ingress_controller/ingress_nginx : NGINX Ingress Controller | Templates list] ************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/ingress_controller/ingress_nginx : NGINX Ingress Controller | Append extra templates to NGINX Ingress Templates list for webhook] ********************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/ingress_controller/ingress_nginx : NGINX Ingress Controller | Create manifests] **********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/ingress_controller/ingress_nginx : NGINX Ingress Controller | Apply manifests] ***********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/ingress_controller/cert_manager : Cert Manager | Remove legacy addon dir and manifests] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/ingress_controller/cert_manager : Cert Manager | Remove legacy namespace] ****************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/ingress_controller/cert_manager : Cert Manager | Create addon dir] ***********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/ingress_controller/cert_manager : Cert Manager | Templates list] *************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/ingress_controller/cert_manager : Cert Manager | Create manifests] ***********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/ingress_controller/cert_manager : Cert Manager | Apply manifests] ************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/ingress_controller/alb_ingress_controller : ALB Ingress Controller | Create addon dir] ***************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/ingress_controller/alb_ingress_controller : ALB Ingress Controller | Create manifests] ***************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'alb-ingress-clusterrole', 'file': 'alb-ingress-clusterrole.yml', 'type': 'clusterrole'})
skipping: [node1] => (item={'name': 'alb-ingress-clusterrolebinding', 'file': 'alb-ingress-clusterrolebinding.yml', 'type': 'clusterrolebinding'})
skipping: [node1] => (item={'name': 'alb-ingress-ns', 'file': 'alb-ingress-ns.yml', 'type': 'ns'})
skipping: [node1] => (item={'name': 'alb-ingress-sa', 'file': 'alb-ingress-sa.yml', 'type': 'sa'})
skipping: [node1] => (item={'name': 'alb-ingress-deploy', 'file': 'alb-ingress-deploy.yml', 'type': 'deploy'})
skipping: [node1]
skipping: [node2] => (item={'name': 'alb-ingress-clusterrole', 'file': 'alb-ingress-clusterrole.yml', 'type': 'clusterrole'})
skipping: [node2] => (item={'name': 'alb-ingress-clusterrolebinding', 'file': 'alb-ingress-clusterrolebinding.yml', 'type': 'clusterrolebinding'})
skipping: [node2] => (item={'name': 'alb-ingress-ns', 'file': 'alb-ingress-ns.yml', 'type': 'ns'})
skipping: [node2] => (item={'name': 'alb-ingress-sa', 'file': 'alb-ingress-sa.yml', 'type': 'sa'})
skipping: [node2] => (item={'name': 'alb-ingress-deploy', 'file': 'alb-ingress-deploy.yml', 'type': 'deploy'})
skipping: [node2]

TASK [kubernetes-apps/ingress_controller/alb_ingress_controller : ALB Ingress Controller | Apply manifests] ****************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'ingress_alb_enabled', 'item': {'name': 'alb-ingress-clusterrole', 'file': 'alb-ingress-clusterrole.yml', 'type': 'clusterrole'}, 'ansible_loop_var': 'item'})
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'ingress_alb_enabled', 'item': {'name': 'alb-ingress-clusterrolebinding', 'file': 'alb-ingress-clusterrolebinding.yml', 'type': 'clusterrolebinding'}, 'ansible_loop_var': 'item'})
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'ingress_alb_enabled', 'item': {'name': 'alb-ingress-ns', 'file': 'alb-ingress-ns.yml', 'type': 'ns'}, 'ansible_loop_var': 'item'})
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'ingress_alb_enabled', 'item': {'name': 'alb-ingress-sa', 'file': 'alb-ingress-sa.yml', 'type': 'sa'}, 'ansible_loop_var': 'item'})
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'ingress_alb_enabled', 'item': {'name': 'alb-ingress-deploy', 'file': 'alb-ingress-deploy.yml', 'type': 'deploy'}, 'ansible_loop_var': 'item'})
skipping: [node1]
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'ingress_alb_enabled', 'item': {'name': 'alb-ingress-clusterrole', 'file': 'alb-ingress-clusterrole.yml', 'type': 'clusterrole'}, 'ansible_loop_var': 'item'})
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'ingress_alb_enabled', 'item': {'name': 'alb-ingress-clusterrolebinding', 'file': 'alb-ingress-clusterrolebinding.yml', 'type': 'clusterrolebinding'}, 'ansible_loop_var': 'item'})
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'ingress_alb_enabled', 'item': {'name': 'alb-ingress-ns', 'file': 'alb-ingress-ns.yml', 'type': 'ns'}, 'ansible_loop_var': 'item'})
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'ingress_alb_enabled', 'item': {'name': 'alb-ingress-sa', 'file': 'alb-ingress-sa.yml', 'type': 'sa'}, 'ansible_loop_var': 'item'})
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'ingress_alb_enabled', 'item': {'name': 'alb-ingress-deploy', 'file': 'alb-ingress-deploy.yml', 'type': 'deploy'}, 'ansible_loop_var': 'item'})
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/local_volume_provisioner : Local Volume Provisioner | Ensure base dir is created on all hosts] **********************************************************************************************************************************************************************************
skipping: [node1] => (item=['node1', 'local-storage'])
skipping: [node1] => (item=['node2', 'local-storage'])
skipping: [node1]
skipping: [node2] => (item=['node1', 'local-storage'])
skipping: [node2] => (item=['node2', 'local-storage'])
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/local_volume_provisioner : Local Volume Provisioner | Create addon dir] *********************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/local_volume_provisioner : Local Volume Provisioner | Templates list] ***********************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/local_volume_provisioner : Local Volume Provisioner | Create manifests] *********************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/local_volume_provisioner : Local Volume Provisioner | Apply manifests] **********************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/cephfs_provisioner : CephFS Provisioner | Remove legacy addon dir and manifests] ************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/cephfs_provisioner : CephFS Provisioner | Remove legacy namespace] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/cephfs_provisioner : CephFS Provisioner | Remove legacy storageclass] ***********************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/cephfs_provisioner : CephFS Provisioner | Create addon dir] *********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/cephfs_provisioner : CephFS Provisioner | Templates list] ***********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/cephfs_provisioner : CephFS Provisioner | Create manifests] *********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/cephfs_provisioner : CephFS Provisioner | Apply manifests] **********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/rbd_provisioner : RBD Provisioner | Remove legacy addon dir and manifests] ******************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/rbd_provisioner : RBD Provisioner | Remove legacy namespace] ********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/rbd_provisioner : RBD Provisioner | Remove legacy storageclass] *****************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/rbd_provisioner : RBD Provisioner | Create addon dir] ***************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/rbd_provisioner : RBD Provisioner | Templates list] *****************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/rbd_provisioner : RBD Provisioner | Create manifests] ***************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/rbd_provisioner : RBD Provisioner | Apply manifests] ****************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/local_path_provisioner : Local Path Provisioner | Create addon dir] *************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/local_path_provisioner : Local Path Provisioner | Create claim root dir] ********************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/local_path_provisioner : Local Path Provisioner | Render Template] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/local_path_provisioner : Local Path Provisioner | Create manifests] *************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/external_provisioner/local_path_provisioner : Local Path Provisioner | Apply manifests] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/ansible : Kubernetes Apps | Wait for kube-apiserver] *************************************************************************************************************************************************************************************************************************************************
skipping: [node2]
ok: [node1]

TASK [kubernetes-apps/ansible : Kubernetes Apps | Lay Down CoreDNS templates] **********************************************************************************************************************************************************************************************************************************************
skipping: [node2] => (item={'name': 'coredns', 'file': 'coredns-clusterrole.yml', 'type': 'clusterrole'})
skipping: [node2] => (item={'name': 'coredns', 'file': 'coredns-clusterrolebinding.yml', 'type': 'clusterrolebinding'})
skipping: [node2] => (item={'name': 'coredns', 'file': 'coredns-config.yml', 'type': 'configmap'})
skipping: [node2] => (item={'name': 'coredns', 'file': 'coredns-deployment.yml', 'type': 'deployment'})
skipping: [node2] => (item={'name': 'coredns', 'file': 'coredns-sa.yml', 'type': 'sa'})
skipping: [node2] => (item={'name': 'coredns', 'file': 'coredns-svc.yml', 'type': 'svc'})
skipping: [node2] => (item={'name': 'dns-autoscaler', 'file': 'dns-autoscaler.yml', 'type': 'deployment'})
skipping: [node2] => (item={'name': 'dns-autoscaler', 'file': 'dns-autoscaler-clusterrole.yml', 'type': 'clusterrole'})
skipping: [node2] => (item={'name': 'dns-autoscaler', 'file': 'dns-autoscaler-clusterrolebinding.yml', 'type': 'clusterrolebinding'})
skipping: [node2] => (item={'name': 'coredns', 'file': 'coredns-poddisruptionbudget.yml', 'type': 'poddisruptionbudget', 'condition': 'coredns_pod_disruption_budget'})
skipping: [node2] => (item={'name': 'dns-autoscaler', 'file': 'dns-autoscaler-sa.yml', 'type': 'sa'})
skipping: [node2]
changed: [node1] => (item={'name': 'coredns', 'file': 'coredns-clusterrole.yml', 'type': 'clusterrole'})
changed: [node1] => (item={'name': 'coredns', 'file': 'coredns-clusterrolebinding.yml', 'type': 'clusterrolebinding'})
changed: [node1] => (item={'name': 'coredns', 'file': 'coredns-config.yml', 'type': 'configmap'})
changed: [node1] => (item={'name': 'coredns', 'file': 'coredns-deployment.yml', 'type': 'deployment'})
changed: [node1] => (item={'name': 'coredns', 'file': 'coredns-sa.yml', 'type': 'sa'})
changed: [node1] => (item={'name': 'coredns', 'file': 'coredns-svc.yml', 'type': 'svc'})
changed: [node1] => (item={'name': 'dns-autoscaler', 'file': 'dns-autoscaler.yml', 'type': 'deployment'})
changed: [node1] => (item={'name': 'dns-autoscaler', 'file': 'dns-autoscaler-clusterrole.yml', 'type': 'clusterrole'})
changed: [node1] => (item={'name': 'dns-autoscaler', 'file': 'dns-autoscaler-clusterrolebinding.yml', 'type': 'clusterrolebinding'})
changed: [node1] => (item={'name': 'coredns', 'file': 'coredns-poddisruptionbudget.yml', 'type': 'poddisruptionbudget', 'condition': 'coredns_pod_disruption_budget'})
changed: [node1] => (item={'name': 'dns-autoscaler', 'file': 'dns-autoscaler-sa.yml', 'type': 'sa'})

TASK [kubernetes-apps/ansible : Kubernetes Apps | Lay Down Secondary CoreDNS Template] *************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'coredns', 'src': 'coredns-deployment.yml', 'file': 'coredns-deployment-secondary.yml', 'type': 'deployment'})
skipping: [node1] => (item={'name': 'coredns', 'src': 'coredns-svc.yml', 'file': 'coredns-svc-secondary.yml', 'type': 'svc'})
skipping: [node1] => (item={'name': 'dns-autoscaler', 'src': 'dns-autoscaler.yml', 'file': 'coredns-autoscaler-secondary.yml', 'type': 'deployment'})
skipping: [node1] => (item={'name': 'coredns', 'src': 'coredns-poddisruptionbudget.yml', 'file': 'coredns-poddisruptionbudget-secondary.yml', 'type': 'poddisruptionbudget', 'condition': 'coredns_pod_disruption_budget'})
skipping: [node1]
skipping: [node2] => (item={'name': 'coredns', 'src': 'coredns-deployment.yml', 'file': 'coredns-deployment-secondary.yml', 'type': 'deployment'})
skipping: [node2] => (item={'name': 'coredns', 'src': 'coredns-svc.yml', 'file': 'coredns-svc-secondary.yml', 'type': 'svc'})
skipping: [node2] => (item={'name': 'dns-autoscaler', 'src': 'dns-autoscaler.yml', 'file': 'coredns-autoscaler-secondary.yml', 'type': 'deployment'})
skipping: [node2] => (item={'name': 'coredns', 'src': 'coredns-poddisruptionbudget.yml', 'file': 'coredns-poddisruptionbudget-secondary.yml', 'type': 'poddisruptionbudget', 'condition': 'coredns_pod_disruption_budget'})
skipping: [node2]

TASK [kubernetes-apps/ansible : Kubernetes Apps | set up necessary nodelocaldns parameters] ********************************************************************************************************************************************************************************************************************************
ok: [node1]
skipping: [node2]

TASK [kubernetes-apps/ansible : Kubernetes Apps | Lay Down nodelocaldns Template] ******************************************************************************************************************************************************************************************************************************************
skipping: [node2] => (item={'name': 'nodelocaldns', 'file': 'nodelocaldns-config.yml', 'type': 'configmap'})
skipping: [node2] => (item={'name': 'nodelocaldns', 'file': 'nodelocaldns-sa.yml', 'type': 'sa'})
skipping: [node2] => (item={'name': 'nodelocaldns', 'file': 'nodelocaldns-daemonset.yml', 'type': 'daemonset'})
skipping: [node2]
changed: [node1] => (item={'name': 'nodelocaldns', 'file': 'nodelocaldns-config.yml', 'type': 'configmap'})
changed: [node1] => (item={'name': 'nodelocaldns', 'file': 'nodelocaldns-sa.yml', 'type': 'sa'})
changed: [node1] => (item={'name': 'nodelocaldns', 'file': 'nodelocaldns-daemonset.yml', 'type': 'daemonset'})

TASK [kubernetes-apps/ansible : Kubernetes Apps | Lay Down nodelocaldns-secondary Template] ********************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'nodelocaldns', 'file': 'nodelocaldns-second-daemonset.yml', 'type': 'daemonset'})
skipping: [node1]
skipping: [node2] => (item={'name': 'nodelocaldns', 'file': 'nodelocaldns-second-daemonset.yml', 'type': 'daemonset'})
skipping: [node2]

TASK [kubernetes-apps/ansible : Kubernetes Apps | Start Resources] *********************************************************************************************************************************************************************************************************************************************************
skipping: [node2] => (item=coredns-clusterrole.yml)
skipping: [node2] => (item=coredns-clusterrolebinding.yml)
skipping: [node2] => (item=coredns-config.yml)
skipping: [node2] => (item=coredns-deployment.yml)
skipping: [node2] => (item=coredns-sa.yml)
skipping: [node2] => (item=coredns-svc.yml)
skipping: [node2] => (item=dns-autoscaler.yml)
skipping: [node2] => (item=dns-autoscaler-clusterrole.yml)
skipping: [node2] => (item=dns-autoscaler-clusterrolebinding.yml)
skipping: [node2] => (item=coredns-poddisruptionbudget.yml)
skipping: [node2] => (item=dns-autoscaler-sa.yml)
skipping: [node2] => (item=coredns-deployment-secondary.yml)
skipping: [node2] => (item=coredns-svc-secondary.yml)
skipping: [node2] => (item=coredns-autoscaler-secondary.yml)
skipping: [node2] => (item=coredns-poddisruptionbudget-secondary.yml)
skipping: [node2] => (item=nodelocaldns-config.yml)
skipping: [node2] => (item=nodelocaldns-sa.yml)
skipping: [node2] => (item=nodelocaldns-daemonset.yml)
skipping: [node2] => (item=nodelocaldns-second-daemonset.yml)
skipping: [node2]
ok: [node1] => (item=coredns-clusterrole.yml)
ok: [node1] => (item=coredns-clusterrolebinding.yml)
ok: [node1] => (item=coredns-config.yml)
ok: [node1] => (item=coredns-deployment.yml)
ok: [node1] => (item=coredns-sa.yml)
ok: [node1] => (item=coredns-svc.yml)
ok: [node1] => (item=dns-autoscaler.yml)
ok: [node1] => (item=dns-autoscaler-clusterrole.yml)
ok: [node1] => (item=dns-autoscaler-clusterrolebinding.yml)
ok: [node1] => (item=coredns-poddisruptionbudget.yml)
ok: [node1] => (item=dns-autoscaler-sa.yml)
skipping: [node1] => (item=coredns-deployment-secondary.yml)
skipping: [node1] => (item=coredns-svc-secondary.yml)
skipping: [node1] => (item=coredns-autoscaler-secondary.yml)
skipping: [node1] => (item=coredns-poddisruptionbudget-secondary.yml)
ok: [node1] => (item=nodelocaldns-config.yml)
ok: [node1] => (item=nodelocaldns-sa.yml)
ok: [node1] => (item=nodelocaldns-daemonset.yml)
skipping: [node1] => (item=nodelocaldns-second-daemonset.yml)

TASK [kubernetes-apps/ansible : Kubernetes Apps | Lay down etcd_metrics templates] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'file': 'etcd_metrics-endpoints.yml', 'type': 'endpoints', 'name': 'etcd-metrics'})
skipping: [node1] => (item={'file': 'etcd_metrics-service.yml', 'type': 'service', 'name': 'etcd-metrics'})
skipping: [node1]
skipping: [node2] => (item={'file': 'etcd_metrics-endpoints.yml', 'type': 'endpoints', 'name': 'etcd-metrics'})
skipping: [node2] => (item={'file': 'etcd_metrics-service.yml', 'type': 'service', 'name': 'etcd-metrics'})
skipping: [node2]

TASK [kubernetes-apps/ansible : Kubernetes Apps | Start etcd_metrics] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'etcd_metrics_port is defined and etcd_metrics_service_labels is defined', 'item': {'file': 'etcd_metrics-endpoints.yml', 'type': 'endpoints', 'name': 'etcd-metrics'}, 'ansible_loop_var': 'item'})
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'etcd_metrics_port is defined and etcd_metrics_service_labels is defined', 'item': {'file': 'etcd_metrics-service.yml', 'type': 'service', 'name': 'etcd-metrics'}, 'ansible_loop_var': 'item'})
skipping: [node1]
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': "inventory_hostname == groups['kube_control_plane'][0]", 'item': {'file': 'etcd_metrics-endpoints.yml', 'type': 'endpoints', 'name': 'etcd-metrics'}, 'ansible_loop_var': 'item'})
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': "inventory_hostname == groups['kube_control_plane'][0]", 'item': {'file': 'etcd_metrics-service.yml', 'type': 'service', 'name': 'etcd-metrics'}, 'ansible_loop_var': 'item'})
skipping: [node2]

TASK [kubernetes-apps/ansible : Kubernetes Apps | Check AppArmor status] ***************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/ansible : Kubernetes Apps | Set apparmor_enabled] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/ansible : Kubernetes Apps | Netchecker Templates list] ***********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/ansible : Kubernetes Apps | Lay Down Netchecker Template] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/ansible : Kubernetes Apps | Start Netchecker Resources] **********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/ansible : Kubernetes Apps | Lay down dashboard template] *********************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'file': 'dashboard.yml', 'type': 'deploy', 'name': 'kubernetes-dashboard'})
skipping: [node1]
skipping: [node2] => (item={'file': 'dashboard.yml', 'type': 'deploy', 'name': 'kubernetes-dashboard'})
skipping: [node2]

TASK [kubernetes-apps/ansible : Kubernetes Apps | Start dashboard] *********************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'dashboard_enabled', 'item': {'file': 'dashboard.yml', 'type': 'deploy', 'name': 'kubernetes-dashboard'}, 'ansible_loop_var': 'item'})
skipping: [node1]
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': "inventory_hostname == groups['kube_control_plane'][0]", 'item': {'file': 'dashboard.yml', 'type': 'deploy', 'name': 'kubernetes-dashboard'}, 'ansible_loop_var': 'item'})
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Gather os specific variables] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/kubernetes-apps/helm/vars/../vars/debian.yml)
skipping: [node1]
skipping: [node2] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/kubernetes-apps/helm/vars/../vars/debian.yml)
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Install PyYaml] ************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Install PyYaml [flatcar]] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Download helm] *************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Copy helm binary from download dir] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Get helm completion] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/helm : Helm | Install helm completion] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/krew : Krew | Download krew] *************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/krew : Krew | krew env] ******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/krew : Krew | Copy krew manifest] ********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/krew : Krew | Install krew] **************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/krew : Krew | Get krew completion] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/krew : Krew | Install krew completion] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/krew : Krew | Download krew] *************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes-apps/krew : Krew | krew env] ******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes-apps/krew : Krew | Copy krew manifest] ********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes-apps/krew : Krew | Install krew] **************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes-apps/krew : Krew | Get krew completion] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes-apps/krew : Krew | Install krew completion] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes-apps/registry : Registry | check registry_service_type value] *********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/registry : Registry | Stop if registry_service_cluster_ip is defined when registry_service_type is not 'ClusterIP'] **********************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/registry : Registry | Stop if registry_service_loadbalancer_ip is defined when registry_service_type is not 'LoadBalancer'] **************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/registry : Registry | Stop if registry_service_nodeport is defined when registry_service_type is not 'NodePort'] *************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/registry : Registry | Create addon dir] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/registry : Registry | Templates list] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/registry : Registry | Append nginx ingress templates to Registry Templates list when ingress enabled] ************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'registry-ing', 'file': 'registry-ing.yml', 'type': 'ing'})
skipping: [node1]
skipping: [node2] => (item={'name': 'registry-ing', 'file': 'registry-ing.yml', 'type': 'ing'})
skipping: [node2]

TASK [kubernetes-apps/registry : Registry | Create manifests] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/registry : Registry | Apply manifests] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/registry : Registry | Create PVC manifests] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'registry-pvc', 'file': 'registry-pvc.yml', 'type': 'pvc'})
skipping: [node1]
skipping: [node2] => (item={'name': 'registry-pvc', 'file': 'registry-pvc.yml', 'type': 'pvc'})
skipping: [node2]

TASK [kubernetes-apps/registry : Registry | Apply PVC manifests] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'registry_enabled', 'item': {'name': 'registry-pvc', 'file': 'registry-pvc.yml', 'type': 'pvc'}, 'ansible_loop_var': 'item'})
skipping: [node1]
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'registry_enabled', 'item': {'name': 'registry-pvc', 'file': 'registry-pvc.yml', 'type': 'pvc'}, 'ansible_loop_var': 'item'})
skipping: [node2]

TASK [kubernetes-apps/metrics_server : Check all masters are node or not] **************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/metrics_server : Metrics Server | Delete addon dir] **************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/metrics_server : Metrics Server | Create addon dir] **************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/metrics_server : Metrics Server | Templates list] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/metrics_server : Metrics Server | Create manifests] **************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/metrics_server : Metrics Server | Apply manifests] ***************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/csi_driver/csi_crd : CSI CRD | Generate Manifests] ***************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'volumesnapshotclasses', 'file': 'volumesnapshotclasses.yml'})
skipping: [node1] => (item={'name': 'volumesnapshotcontents', 'file': 'volumesnapshotcontents.yml'})
skipping: [node1] => (item={'name': 'volumesnapshots', 'file': 'volumesnapshots.yml'})
skipping: [node1]
skipping: [node2] => (item={'name': 'volumesnapshotclasses', 'file': 'volumesnapshotclasses.yml'})
skipping: [node2] => (item={'name': 'volumesnapshotcontents', 'file': 'volumesnapshotcontents.yml'})
skipping: [node2] => (item={'name': 'volumesnapshots', 'file': 'volumesnapshots.yml'})
skipping: [node2]

TASK [kubernetes-apps/csi_driver/csi_crd : CSI CRD | Apply Manifests] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=volumesnapshotclasses.yml)
skipping: [node1] => (item=volumesnapshotcontents.yml)
skipping: [node1] => (item=volumesnapshots.yml)
skipping: [node1]
skipping: [node2] => (item=volumesnapshotclasses.yml)
skipping: [node2] => (item=volumesnapshotcontents.yml)
skipping: [node2] => (item=volumesnapshots.yml)
skipping: [node2]

TASK [kubernetes-apps/csi_driver/cinder : Cinder CSI Driver | Check Cinder credentials] ************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/csi_driver/cinder : Cinder CSI Driver | Write cacert file] *******************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=node1)
skipping: [node1] => (item=node2)
skipping: [node1]

TASK [kubernetes-apps/csi_driver/cinder : Cinder CSI Driver | Write Cinder cloud-config] ***********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/csi_driver/cinder : Cinder CSI Driver | Get base64 cloud-config] *************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/csi_driver/cinder : Cinder CSI Driver | Generate Manifests] ******************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'cinder-csi-driver', 'file': 'cinder-csi-driver.yml'})
skipping: [node1] => (item={'name': 'cinder-csi-cloud-config-secret', 'file': 'cinder-csi-cloud-config-secret.yml'})
skipping: [node1] => (item={'name': 'cinder-csi-controllerplugin', 'file': 'cinder-csi-controllerplugin-rbac.yml'})
skipping: [node1] => (item={'name': 'cinder-csi-controllerplugin', 'file': 'cinder-csi-controllerplugin.yml'})
skipping: [node1] => (item={'name': 'cinder-csi-nodeplugin', 'file': 'cinder-csi-nodeplugin-rbac.yml'})
skipping: [node1] => (item={'name': 'cinder-csi-nodeplugin', 'file': 'cinder-csi-nodeplugin.yml'})
skipping: [node1] => (item={'name': 'cinder-csi-poddisruptionbudget', 'file': 'cinder-csi-poddisruptionbudget.yml'})
skipping: [node1]
skipping: [node2] => (item={'name': 'cinder-csi-driver', 'file': 'cinder-csi-driver.yml'})
skipping: [node2] => (item={'name': 'cinder-csi-cloud-config-secret', 'file': 'cinder-csi-cloud-config-secret.yml'})
skipping: [node2] => (item={'name': 'cinder-csi-controllerplugin', 'file': 'cinder-csi-controllerplugin-rbac.yml'})
skipping: [node2] => (item={'name': 'cinder-csi-controllerplugin', 'file': 'cinder-csi-controllerplugin.yml'})
skipping: [node2] => (item={'name': 'cinder-csi-nodeplugin', 'file': 'cinder-csi-nodeplugin-rbac.yml'})
skipping: [node2] => (item={'name': 'cinder-csi-nodeplugin', 'file': 'cinder-csi-nodeplugin.yml'})
skipping: [node2] => (item={'name': 'cinder-csi-poddisruptionbudget', 'file': 'cinder-csi-poddisruptionbudget.yml'})
skipping: [node2]

TASK [kubernetes-apps/csi_driver/cinder : Cinder CSI Driver | Apply Manifests] *********************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=cinder-csi-driver.yml)
skipping: [node1] => (item=cinder-csi-cloud-config-secret.yml)
skipping: [node1] => (item=cinder-csi-controllerplugin-rbac.yml)
skipping: [node1] => (item=cinder-csi-controllerplugin.yml)
skipping: [node1] => (item=cinder-csi-nodeplugin-rbac.yml)
skipping: [node1] => (item=cinder-csi-nodeplugin.yml)
skipping: [node1] => (item=cinder-csi-poddisruptionbudget.yml)
skipping: [node1]
skipping: [node2] => (item=cinder-csi-driver.yml)
skipping: [node2] => (item=cinder-csi-cloud-config-secret.yml)
skipping: [node2] => (item=cinder-csi-controllerplugin-rbac.yml)
skipping: [node2] => (item=cinder-csi-controllerplugin.yml)
skipping: [node2] => (item=cinder-csi-nodeplugin-rbac.yml)
skipping: [node2] => (item=cinder-csi-nodeplugin.yml)
skipping: [node2] => (item=cinder-csi-poddisruptionbudget.yml)
skipping: [node2]

TASK [kubernetes-apps/csi_driver/aws_ebs : AWS CSI Driver | Generate Manifests] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'aws-ebs-csi-driver', 'file': 'aws-ebs-csi-driver.yml'})
skipping: [node1] => (item={'name': 'aws-ebs-csi-controllerservice', 'file': 'aws-ebs-csi-controllerservice-rbac.yml'})
skipping: [node1] => (item={'name': 'aws-ebs-csi-controllerservice', 'file': 'aws-ebs-csi-controllerservice.yml'})
skipping: [node1] => (item={'name': 'aws-ebs-csi-nodeservice', 'file': 'aws-ebs-csi-nodeservice.yml'})
skipping: [node1]
skipping: [node2] => (item={'name': 'aws-ebs-csi-driver', 'file': 'aws-ebs-csi-driver.yml'})
skipping: [node2] => (item={'name': 'aws-ebs-csi-controllerservice', 'file': 'aws-ebs-csi-controllerservice-rbac.yml'})
skipping: [node2] => (item={'name': 'aws-ebs-csi-controllerservice', 'file': 'aws-ebs-csi-controllerservice.yml'})
skipping: [node2] => (item={'name': 'aws-ebs-csi-nodeservice', 'file': 'aws-ebs-csi-nodeservice.yml'})
skipping: [node2]

TASK [kubernetes-apps/csi_driver/aws_ebs : AWS CSI Driver | Apply Manifests] ***********************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=aws-ebs-csi-driver.yml)
skipping: [node1] => (item=aws-ebs-csi-controllerservice-rbac.yml)
skipping: [node1] => (item=aws-ebs-csi-controllerservice.yml)
skipping: [node1] => (item=aws-ebs-csi-nodeservice.yml)
skipping: [node1]
skipping: [node2] => (item=aws-ebs-csi-driver.yml)
skipping: [node2] => (item=aws-ebs-csi-controllerservice-rbac.yml)
skipping: [node2] => (item=aws-ebs-csi-controllerservice.yml)
skipping: [node2] => (item=aws-ebs-csi-nodeservice.yml)
skipping: [node2]

TASK [kubernetes-apps/csi_driver/azuredisk : Azure CSI Driver | Check Azure credentials] ***********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/csi_driver/azuredisk : Azure CSI Driver | Write Azure CSI cloud-config] ******************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/csi_driver/azuredisk : Azure CSI Driver | Get base64 cloud-config] ***********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/csi_driver/azuredisk : Azure CSI Driver | Generate Manifests] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'azure-csi-azuredisk-driver', 'file': 'azure-csi-azuredisk-driver.yml'})
skipping: [node1] => (item={'name': 'azure-csi-cloud-config-secret', 'file': 'azure-csi-cloud-config-secret.yml'})
skipping: [node1] => (item={'name': 'azure-csi-azuredisk-controller', 'file': 'azure-csi-azuredisk-controller-rbac.yml'})
skipping: [node1] => (item={'name': 'azure-csi-azuredisk-controller', 'file': 'azure-csi-azuredisk-controller.yml'})
skipping: [node1] => (item={'name': 'azure-csi-azuredisk-node-rbac', 'file': 'azure-csi-azuredisk-node-rbac.yml'})
skipping: [node1] => (item={'name': 'azure-csi-azuredisk-node', 'file': 'azure-csi-azuredisk-node.yml'})
skipping: [node1]
skipping: [node2] => (item={'name': 'azure-csi-azuredisk-driver', 'file': 'azure-csi-azuredisk-driver.yml'})
skipping: [node2] => (item={'name': 'azure-csi-cloud-config-secret', 'file': 'azure-csi-cloud-config-secret.yml'})
skipping: [node2] => (item={'name': 'azure-csi-azuredisk-controller', 'file': 'azure-csi-azuredisk-controller-rbac.yml'})
skipping: [node2] => (item={'name': 'azure-csi-azuredisk-controller', 'file': 'azure-csi-azuredisk-controller.yml'})
skipping: [node2] => (item={'name': 'azure-csi-azuredisk-node-rbac', 'file': 'azure-csi-azuredisk-node-rbac.yml'})
skipping: [node2] => (item={'name': 'azure-csi-azuredisk-node', 'file': 'azure-csi-azuredisk-node.yml'})
skipping: [node2]

TASK [kubernetes-apps/csi_driver/azuredisk : Azure CSI Driver | Apply Manifests] *******************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=azure-csi-azuredisk-driver.yml)
skipping: [node1] => (item=azure-csi-cloud-config-secret.yml)
skipping: [node1] => (item=azure-csi-azuredisk-controller-rbac.yml)
skipping: [node1] => (item=azure-csi-azuredisk-controller.yml)
skipping: [node1] => (item=azure-csi-azuredisk-node-rbac.yml)
skipping: [node1] => (item=azure-csi-azuredisk-node.yml)
skipping: [node1]
skipping: [node2] => (item=azure-csi-azuredisk-driver.yml)
skipping: [node2] => (item=azure-csi-cloud-config-secret.yml)
skipping: [node2] => (item=azure-csi-azuredisk-controller-rbac.yml)
skipping: [node2] => (item=azure-csi-azuredisk-controller.yml)
skipping: [node2] => (item=azure-csi-azuredisk-node-rbac.yml)
skipping: [node2] => (item=azure-csi-azuredisk-node.yml)
skipping: [node2]

TASK [kubernetes-apps/csi_driver/gcp_pd : GCP PD CSI Driver | Check if cloud-sa.json exists] *******************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/csi_driver/gcp_pd : GCP PD CSI Driver | Copy GCP credentials file] ***********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/csi_driver/gcp_pd : GCP PD CSI Driver | Get base64 cloud-sa.json] ************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/csi_driver/gcp_pd : GCP PD CSI Driver | Generate Manifests] ******************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'gcp-pd-csi-cred-secret', 'file': 'gcp-pd-csi-cred-secret.yml'})
skipping: [node1] => (item={'name': 'gcp-pd-csi-setup', 'file': 'gcp-pd-csi-setup.yml'})
skipping: [node1] => (item={'name': 'gcp-pd-csi-controller', 'file': 'gcp-pd-csi-controller.yml'})
skipping: [node1] => (item={'name': 'gcp-pd-csi-node', 'file': 'gcp-pd-csi-node.yml'})
skipping: [node1] => (item={'name': 'gcp-pd-csi-sc-regional', 'file': 'gcp-pd-csi-sc-regional.yml'})
skipping: [node1] => (item={'name': 'gcp-pd-csi-sc-zonal', 'file': 'gcp-pd-csi-sc-zonal.yml'})
skipping: [node1]
skipping: [node2] => (item={'name': 'gcp-pd-csi-cred-secret', 'file': 'gcp-pd-csi-cred-secret.yml'})
skipping: [node2] => (item={'name': 'gcp-pd-csi-setup', 'file': 'gcp-pd-csi-setup.yml'})
skipping: [node2] => (item={'name': 'gcp-pd-csi-controller', 'file': 'gcp-pd-csi-controller.yml'})
skipping: [node2] => (item={'name': 'gcp-pd-csi-node', 'file': 'gcp-pd-csi-node.yml'})
skipping: [node2] => (item={'name': 'gcp-pd-csi-sc-regional', 'file': 'gcp-pd-csi-sc-regional.yml'})
skipping: [node2] => (item={'name': 'gcp-pd-csi-sc-zonal', 'file': 'gcp-pd-csi-sc-zonal.yml'})
skipping: [node2]

TASK [kubernetes-apps/csi_driver/gcp_pd : GCP PD CSI Driver | Apply Manifests] *********************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=gcp-pd-csi-cred-secret.yml)
skipping: [node1] => (item=gcp-pd-csi-setup.yml)
skipping: [node1] => (item=gcp-pd-csi-controller.yml)
skipping: [node1] => (item=gcp-pd-csi-node.yml)
skipping: [node1] => (item=gcp-pd-csi-sc-regional.yml)
skipping: [node1] => (item=gcp-pd-csi-sc-zonal.yml)
skipping: [node1]
skipping: [node2] => (item=gcp-pd-csi-cred-secret.yml)
skipping: [node2] => (item=gcp-pd-csi-setup.yml)
skipping: [node2] => (item=gcp-pd-csi-controller.yml)
skipping: [node2] => (item=gcp-pd-csi-node.yml)
skipping: [node2] => (item=gcp-pd-csi-sc-regional.yml)
skipping: [node2] => (item=gcp-pd-csi-sc-zonal.yml)
skipping: [node2]

TASK [kubernetes-apps/csi_driver/upcloud : UpCloud CSI Driver | Check if UPCLOUD_USERNAME exists] **************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/csi_driver/upcloud : UpCloud CSI Driver | Check if UPCLOUD_PASSWORD exists] **************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/csi_driver/upcloud : UpCloud CSI Driver | Generate Manifests] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'upcloud-csi-cred-secret', 'file': 'upcloud-csi-cred-secret.yml'})
skipping: [node1] => (item={'name': 'upcloud-csi-setup', 'file': 'upcloud-csi-setup.yml'})
skipping: [node1] => (item={'name': 'upcloud-csi-controller', 'file': 'upcloud-csi-controller.yml'})
skipping: [node1] => (item={'name': 'upcloud-csi-node', 'file': 'upcloud-csi-node.yml'})
skipping: [node1] => (item={'name': 'upcloud-csi-driver', 'file': 'upcloud-csi-driver.yml'})
skipping: [node1]
skipping: [node2] => (item={'name': 'upcloud-csi-cred-secret', 'file': 'upcloud-csi-cred-secret.yml'})
skipping: [node2] => (item={'name': 'upcloud-csi-setup', 'file': 'upcloud-csi-setup.yml'})
skipping: [node2] => (item={'name': 'upcloud-csi-controller', 'file': 'upcloud-csi-controller.yml'})
skipping: [node2] => (item={'name': 'upcloud-csi-node', 'file': 'upcloud-csi-node.yml'})
skipping: [node2] => (item={'name': 'upcloud-csi-driver', 'file': 'upcloud-csi-driver.yml'})
skipping: [node2]

TASK [kubernetes-apps/csi_driver/upcloud : UpCloud CSI Driver | Apply Manifests] *******************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=upcloud-csi-cred-secret.yml)
skipping: [node1] => (item=upcloud-csi-setup.yml)
skipping: [node1] => (item=upcloud-csi-controller.yml)
skipping: [node1] => (item=upcloud-csi-node.yml)
skipping: [node1] => (item=upcloud-csi-driver.yml)
skipping: [node1]
skipping: [node2] => (item=upcloud-csi-cred-secret.yml)
skipping: [node2] => (item=upcloud-csi-setup.yml)
skipping: [node2] => (item=upcloud-csi-controller.yml)
skipping: [node2] => (item=upcloud-csi-node.yml)
skipping: [node2] => (item=upcloud-csi-driver.yml)
skipping: [node2]

TASK [kubernetes-apps/csi_driver/vsphere : VSphere CSI Driver | Check vsphare credentials] *********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/csi_driver/vsphere : VSphere CSI Driver | Generate CSI cloud-config] *********************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=vsphere-csi-cloud-config)
skipping: [node1]
skipping: [node2] => (item=vsphere-csi-cloud-config)
skipping: [node2]

TASK [kubernetes-apps/csi_driver/vsphere : VSphere CSI Driver | Generate Manifests] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=vsphere-csi-namespace.yml)
skipping: [node1] => (item=vsphere-csi-driver.yml)
skipping: [node1] => (item=vsphere-csi-controller-rbac.yml)
skipping: [node1] => (item=vsphere-csi-node-rbac.yml)
skipping: [node1] => (item=vsphere-csi-controller-config.yml)
skipping: [node1] => (item=vsphere-csi-controller-deployment.yml)
skipping: [node1] => (item=vsphere-csi-controller-service.yml)
skipping: [node1] => (item=vsphere-csi-node.yml)
skipping: [node1]
skipping: [node2] => (item=vsphere-csi-namespace.yml)
skipping: [node2] => (item=vsphere-csi-driver.yml)
skipping: [node2] => (item=vsphere-csi-controller-rbac.yml)
skipping: [node2] => (item=vsphere-csi-node-rbac.yml)
skipping: [node2] => (item=vsphere-csi-controller-config.yml)
skipping: [node2] => (item=vsphere-csi-controller-deployment.yml)
skipping: [node2] => (item=vsphere-csi-controller-service.yml)
skipping: [node2] => (item=vsphere-csi-node.yml)
skipping: [node2]

TASK [kubernetes-apps/csi_driver/vsphere : VSphere CSI Driver | Apply Manifests] *******************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=vsphere-csi-namespace.yml)
skipping: [node1] => (item=vsphere-csi-driver.yml)
skipping: [node1] => (item=vsphere-csi-controller-rbac.yml)
skipping: [node1] => (item=vsphere-csi-node-rbac.yml)
skipping: [node1] => (item=vsphere-csi-controller-config.yml)
skipping: [node1] => (item=vsphere-csi-controller-deployment.yml)
skipping: [node1] => (item=vsphere-csi-controller-service.yml)
skipping: [node1] => (item=vsphere-csi-node.yml)
skipping: [node1]
skipping: [node2] => (item=vsphere-csi-namespace.yml)
skipping: [node2] => (item=vsphere-csi-driver.yml)
skipping: [node2] => (item=vsphere-csi-controller-rbac.yml)
skipping: [node2] => (item=vsphere-csi-node-rbac.yml)
skipping: [node2] => (item=vsphere-csi-controller-config.yml)
skipping: [node2] => (item=vsphere-csi-controller-deployment.yml)
skipping: [node2] => (item=vsphere-csi-controller-service.yml)
skipping: [node2] => (item=vsphere-csi-node.yml)
skipping: [node2]

TASK [kubernetes-apps/csi_driver/vsphere : VSphere CSI Driver | Generate a CSI secret manifest] ****************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/csi_driver/vsphere : VSphere CSI Driver | Apply a CSI secret manifest] *******************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/persistent_volumes/openstack : Kubernetes Persistent Volumes | Lay down OpenStack Cinder Storage Class template] *************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/persistent_volumes/openstack : Kubernetes Persistent Volumes | Add OpenStack Cinder Storage Class] ***************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/persistent_volumes/cinder-csi : Kubernetes Persistent Volumes | Copy Cinder CSI Storage Class template] **********************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/persistent_volumes/cinder-csi : Kubernetes Persistent Volumes | Add Cinder CSI Storage Class] ********************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/persistent_volumes/aws-ebs-csi : Kubernetes Persistent Volumes | Copy AWS EBS CSI Storage Class template] ********************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/persistent_volumes/aws-ebs-csi : Kubernetes Persistent Volumes | Add AWS EBS CSI Storage Class] ******************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/persistent_volumes/azuredisk-csi : Kubernetes Persistent Volumes | Copy Azure CSI Storage Class template] ********************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/persistent_volumes/azuredisk-csi : Kubernetes Persistent Volumes | Add Azure CSI Storage Class] ******************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/persistent_volumes/gcp-pd-csi : Kubernetes Persistent Volumes | Copy GCP PD CSI Storage Class template] **********************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/persistent_volumes/gcp-pd-csi : Kubernetes Persistent Volumes | Add GCP PD CSI Storage Class] ********************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/persistent_volumes/upcloud-csi : Kubernetes Persistent Volumes | Copy UpCloud CSI Storage Class template] ********************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/persistent_volumes/upcloud-csi : Kubernetes Persistent Volumes | Add UpCloud CSI Storage Class] ******************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/snapshots/snapshot-controller : Check if snapshot namespace exists] **********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/snapshots/snapshot-controller : Snapshot Controller | Generate Manifests] ****************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'snapshot-ns', 'file': 'snapshot-ns.yml', 'apply': 'not snapshot_namespace_exists'})
skipping: [node1] => (item={'name': 'rbac-snapshot-controller', 'file': 'rbac-snapshot-controller.yml'})
skipping: [node1] => (item={'name': 'snapshot-controller', 'file': 'snapshot-controller.yml'})
skipping: [node1]
skipping: [node2] => (item={'name': 'snapshot-ns', 'file': 'snapshot-ns.yml', 'apply': 'not snapshot_namespace_exists'})
skipping: [node2] => (item={'name': 'rbac-snapshot-controller', 'file': 'rbac-snapshot-controller.yml'})
skipping: [node2] => (item={'name': 'snapshot-controller', 'file': 'snapshot-controller.yml'})
skipping: [node2]

TASK [kubernetes-apps/snapshots/snapshot-controller : Snapshot Controller | Apply Manifests] *******************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=snapshot-ns.yml)
skipping: [node1] => (item=rbac-snapshot-controller.yml)
skipping: [node1] => (item=snapshot-controller.yml)
skipping: [node1]
skipping: [node2] => (item=snapshot-ns.yml)
skipping: [node2] => (item=rbac-snapshot-controller.yml)
skipping: [node2] => (item=snapshot-controller.yml)
skipping: [node2]

TASK [kubernetes-apps/snapshots/cinder-csi : Kubernetes Snapshots | Copy Cinder CSI Snapshot Class template] ***************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/snapshots/cinder-csi : Kubernetes Snapshots | Add Cinder CSI Snapshot Class] *************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/container_runtimes/kata_containers : Kata Containers | Create addon dir] *****************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/container_runtimes/kata_containers : Kata Containers | Templates list] *******************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/container_runtimes/kata_containers : Kata Containers | Create manifests] *****************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/container_runtimes/kata_containers : Kata Containers | Apply manifests] ******************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/container_runtimes/gvisor : GVisor | Create addon dir] ***********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/container_runtimes/gvisor : GVisor | Templates List] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/container_runtimes/gvisor : GVisort | Create manifests] **********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/container_runtimes/gvisor : GVisor | Apply manifests] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/container_runtimes/crun : Crun | Copy runtime class manifest] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/container_runtimes/crun : Crun | Apply manifests] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/container_runtimes/youki : Youki | Copy runtime class manifest] **************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/container_runtimes/youki : Youki | Apply manifests] **************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/container_engine_accelerator/nvidia_gpu : Container Engine Acceleration Nvidia GPU | gather os specific variables] ***********************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/container_engine_accelerator/nvidia_gpu : Container Engine Acceleration Nvidia GPU | Set fact of download url Tesla] *********************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/container_engine_accelerator/nvidia_gpu : Container Engine Acceleration Nvidia GPU | Set fact of download url GTX] ***********************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/container_engine_accelerator/nvidia_gpu : Container Engine Acceleration Nvidia GPU | Create addon dir] ***********************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/container_engine_accelerator/nvidia_gpu : Container Engine Acceleration Nvidia GPU | Create manifests for nvidia accelerators] ***********************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'nvidia-driver-install-daemonset', 'file': 'nvidia-driver-install-daemonset.yml', 'type': 'daemonset'})
skipping: [node1] => (item={'name': 'k8s-device-plugin-nvidia-daemonset', 'file': 'k8s-device-plugin-nvidia-daemonset.yml', 'type': 'daemonset'})
skipping: [node1]
skipping: [node2] => (item={'name': 'nvidia-driver-install-daemonset', 'file': 'nvidia-driver-install-daemonset.yml', 'type': 'daemonset'})
skipping: [node2] => (item={'name': 'k8s-device-plugin-nvidia-daemonset', 'file': 'k8s-device-plugin-nvidia-daemonset.yml', 'type': 'daemonset'})
skipping: [node2]

TASK [kubernetes-apps/container_engine_accelerator/nvidia_gpu : Container Engine Acceleration Nvidia GPU | Apply manifests for nvidia accelerators] ************************************************************************************************************************************************************************
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'nvidia_accelerator_enabled', 'item': {'name': 'nvidia-driver-install-daemonset', 'file': 'nvidia-driver-install-daemonset.yml', 'type': 'daemonset'}, 'ansible_loop_var': 'item'})
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'nvidia_accelerator_enabled', 'item': {'name': 'k8s-device-plugin-nvidia-daemonset', 'file': 'k8s-device-plugin-nvidia-daemonset.yml', 'type': 'daemonset'}, 'ansible_loop_var': 'item'})
skipping: [node1]
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'nvidia_accelerator_enabled', 'item': {'name': 'nvidia-driver-install-daemonset', 'file': 'nvidia-driver-install-daemonset.yml', 'type': 'daemonset'}, 'ansible_loop_var': 'item'})
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'nvidia_accelerator_enabled', 'item': {'name': 'k8s-device-plugin-nvidia-daemonset', 'file': 'k8s-device-plugin-nvidia-daemonset.yml', 'type': 'daemonset'}, 'ansible_loop_var': 'item'})
skipping: [node2]

TASK [kubernetes-apps/cloud_controller/oci : OCI Cloud Controller | Credentials Check | oci_private_key] *******************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/cloud_controller/oci : OCI Cloud Controller | Credentials Check | oci_region_id] *********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/cloud_controller/oci : OCI Cloud Controller | Credentials Check | oci_tenancy_id] ********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/cloud_controller/oci : OCI Cloud Controller | Credentials Check | oci_user_id] ***********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/cloud_controller/oci : OCI Cloud Controller | Credentials Check | oci_user_fingerprint] **************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/cloud_controller/oci : OCI Cloud Controller | Credentials Check | oci_compartment_id] ****************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/cloud_controller/oci : OCI Cloud Controller | Credentials Check | oci_vnc_id] ************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/cloud_controller/oci : OCI Cloud Controller | Credentials Check | oci_subnet1_id] ********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/cloud_controller/oci : OCI Cloud Controller | Credentials Check | oci_subnet2_id] ********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/cloud_controller/oci : OCI Cloud Controller | Credentials Check | oci_security_list_management] ******************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/cloud_controller/oci : OCI Cloud Controller | Generate Cloud Provider Configuration] *****************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/cloud_controller/oci : OCI Cloud Controller | Slurp Configuration] ***********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/cloud_controller/oci : OCI Cloud Controller | Encode Configuration] **********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/cloud_controller/oci : OCI Cloud Controller | Generate Manifests] ************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/cloud_controller/oci : OCI Cloud Controller | Apply Manifests] ***************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/metallb : Kubernetes Apps | Check cluster settings for MetalLB] **************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/metallb : Kubernetes Apps | Check that the deprecated 'matallb_auto_assign' variable is not used anymore] ********************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/metallb : Kubernetes Apps | Lay Down MetalLB] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/metallb : Kubernetes Apps | Install and configure MetalLB] *******************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/metallb : Kubernetes Apps | Wait for MetalLB controller to be running] *******************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/metallb : MetalLB | Layout address pools template] ***************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/metallb : MetalLB | Create address pools configuration] **********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/metallb : MetalLB | Layout layer2 template] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/metallb : MetalLB | Create layer2 configuration] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/metallb : MetalLB | Layout layer3 template] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/metallb : MetalLB | Create layer3 configuration] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/metallb : Kubernetes Apps | Delete MetalLB ConfigMap] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/argocd : Kubernetes Apps | Download yq] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/argocd : Kubernetes Apps | Copy yq binary from download dir] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/argocd : Kubernetes Apps | Set ArgoCD template list] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/argocd : Kubernetes Apps | Download ArgoCD remote manifests] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/argocd : Kubernetes Apps | Copy ArgoCD remote manifests from download dir] ***************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/argocd : Kubernetes Apps | Set ArgoCD namespace for remote manifests] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/argocd : Kubernetes Apps | Create ArgoCD manifests from templates] ***********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/argocd : Kubernetes Apps | Install ArgoCD] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/argocd : Kubernetes Apps | Set ArgoCD custom admin password] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/scheduler_plugins : Scheduler Plugins | Ensure dir exists] *******************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/scheduler_plugins : Scheduler Plugins | Create manifests] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'appgroup', 'file': 'appgroup.diktyo.x-k8s.io_appgroups.yaml', 'type': 'crd'})
skipping: [node1] => (item={'name': 'networktopology', 'file': 'networktopology.diktyo.x-k8s.io_networktopologies.yaml', 'type': 'crd'})
skipping: [node1] => (item={'name': 'elasticquotas', 'file': 'scheduling.x-k8s.io_elasticquotas.yaml', 'type': 'crd'})
skipping: [node1] => (item={'name': 'podgroups', 'file': 'scheduling.x-k8s.io_podgroups.yaml', 'type': 'crd'})
skipping: [node1] => (item={'name': 'noderesourcetopologies', 'file': 'topology.node.k8s.io_noderesourcetopologies.yaml', 'type': 'crd'})
skipping: [node1] => (item={'name': 'namespace', 'file': 'namespace.yaml', 'type': 'namespace'})
skipping: [node1] => (item={'name': 'sa', 'file': 'sa-scheduler-plugins.yaml', 'type': 'serviceaccount'})
skipping: [node1] => (item={'name': 'rbac', 'file': 'rbac-scheduler-plugins.yaml', 'type': 'rbac'})
skipping: [node1] => (item={'name': 'cm', 'file': 'cm-scheduler-plugins.yaml', 'type': 'configmap'})
skipping: [node1] => (item={'name': 'deploy', 'file': 'deploy-scheduler-plugins.yaml', 'type': 'deployment'})
skipping: [node1]
skipping: [node2] => (item={'name': 'appgroup', 'file': 'appgroup.diktyo.x-k8s.io_appgroups.yaml', 'type': 'crd'})
skipping: [node2] => (item={'name': 'networktopology', 'file': 'networktopology.diktyo.x-k8s.io_networktopologies.yaml', 'type': 'crd'})
skipping: [node2] => (item={'name': 'elasticquotas', 'file': 'scheduling.x-k8s.io_elasticquotas.yaml', 'type': 'crd'})
skipping: [node2] => (item={'name': 'podgroups', 'file': 'scheduling.x-k8s.io_podgroups.yaml', 'type': 'crd'})
skipping: [node2] => (item={'name': 'noderesourcetopologies', 'file': 'topology.node.k8s.io_noderesourcetopologies.yaml', 'type': 'crd'})
skipping: [node2] => (item={'name': 'namespace', 'file': 'namespace.yaml', 'type': 'namespace'})
skipping: [node2] => (item={'name': 'sa', 'file': 'sa-scheduler-plugins.yaml', 'type': 'serviceaccount'})
skipping: [node2] => (item={'name': 'rbac', 'file': 'rbac-scheduler-plugins.yaml', 'type': 'rbac'})
skipping: [node2] => (item={'name': 'cm', 'file': 'cm-scheduler-plugins.yaml', 'type': 'configmap'})
skipping: [node2] => (item={'name': 'deploy', 'file': 'deploy-scheduler-plugins.yaml', 'type': 'deployment'})
skipping: [node2]

TASK [kubernetes-apps/scheduler_plugins : Scheduler Plugins | Apply manifests] *********************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'appgroup', 'file': 'appgroup.diktyo.x-k8s.io_appgroups.yaml', 'type': 'crd'}, 'ansible_loop_var': 'item'})
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'networktopology', 'file': 'networktopology.diktyo.x-k8s.io_networktopologies.yaml', 'type': 'crd'}, 'ansible_loop_var': 'item'})
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'elasticquotas', 'file': 'scheduling.x-k8s.io_elasticquotas.yaml', 'type': 'crd'}, 'ansible_loop_var': 'item'})
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'podgroups', 'file': 'scheduling.x-k8s.io_podgroups.yaml', 'type': 'crd'}, 'ansible_loop_var': 'item'})
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'noderesourcetopologies', 'file': 'topology.node.k8s.io_noderesourcetopologies.yaml', 'type': 'crd'}, 'ansible_loop_var': 'item'})
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'namespace', 'file': 'namespace.yaml', 'type': 'namespace'}, 'ansible_loop_var': 'item'})
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'sa', 'file': 'sa-scheduler-plugins.yaml', 'type': 'serviceaccount'}, 'ansible_loop_var': 'item'})
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'rbac', 'file': 'rbac-scheduler-plugins.yaml', 'type': 'rbac'}, 'ansible_loop_var': 'item'})
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'cm', 'file': 'cm-scheduler-plugins.yaml', 'type': 'configmap'}, 'ansible_loop_var': 'item'})
skipping: [node1] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'deploy', 'file': 'deploy-scheduler-plugins.yaml', 'type': 'deployment'}, 'ansible_loop_var': 'item'})
skipping: [node1]
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'appgroup', 'file': 'appgroup.diktyo.x-k8s.io_appgroups.yaml', 'type': 'crd'}, 'ansible_loop_var': 'item'})
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'networktopology', 'file': 'networktopology.diktyo.x-k8s.io_networktopologies.yaml', 'type': 'crd'}, 'ansible_loop_var': 'item'})
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'elasticquotas', 'file': 'scheduling.x-k8s.io_elasticquotas.yaml', 'type': 'crd'}, 'ansible_loop_var': 'item'})
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'podgroups', 'file': 'scheduling.x-k8s.io_podgroups.yaml', 'type': 'crd'}, 'ansible_loop_var': 'item'})
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'noderesourcetopologies', 'file': 'topology.node.k8s.io_noderesourcetopologies.yaml', 'type': 'crd'}, 'ansible_loop_var': 'item'})
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'namespace', 'file': 'namespace.yaml', 'type': 'namespace'}, 'ansible_loop_var': 'item'})
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'sa', 'file': 'sa-scheduler-plugins.yaml', 'type': 'serviceaccount'}, 'ansible_loop_var': 'item'})
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'rbac', 'file': 'rbac-scheduler-plugins.yaml', 'type': 'rbac'}, 'ansible_loop_var': 'item'})
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'cm', 'file': 'cm-scheduler-plugins.yaml', 'type': 'configmap'}, 'ansible_loop_var': 'item'})
skipping: [node2] => (item={'changed': False, 'skipped': True, 'skip_reason': 'Conditional result was False', 'false_condition': 'scheduler_plugins_enabled', 'item': {'name': 'deploy', 'file': 'deploy-scheduler-plugins.yaml', 'type': 'deployment'}, 'ansible_loop_var': 'item'})
skipping: [node2]

TASK [kubernetes-apps/scheduler_plugins : Scheduler Plugins | Wait for controller pods to be ready] ************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes-apps/scheduler_plugins : Scheduler Plugins | Wait for scheduler pods to be ready] *************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

PLAY [Apply resolv.conf changes now that cluster DNS is up] ****************************************************************************************************************************************************************************************************************************************************************

TASK [kubespray-defaults : Gather ansible_default_ipv4 from all hosts] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=node1)
skipping: [node1] => (item=node2)
skipping: [node1]

TASK [kubespray-defaults : Create fallback_ips_base] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Set fallback_ips] *******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubespray-defaults : Set no_proxy to all assigned cluster IPs and hostnames] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubespray-defaults : Populates no_proxy to all hosts] ****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubespray-defaults : Set `etcd_deployment_type` to "kubeadm" if `etcd_kubeadm_enabled` is true] **********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [adduser : User | Create User Group] **********************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [adduser : User | Create User] ****************************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Check if /etc/fstab exists] ******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Remove swapfile from /etc/fstab] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=swap)
skipping: [node1] => (item=none)
skipping: [node1]
skipping: [node2] => (item=swap)
skipping: [node2] => (item=none)
skipping: [node2]

TASK [kubernetes/preinstall : Mask swap.target (persist swapoff)] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Disable swap] ********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Force binaries directory for Flatcar Container Linux by Kinvolk] *****************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Set os_family fact for other redhat-based operating systems] *********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Set os_family fact for other debian-based operating systems] *********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Check if booted with ostree] *****************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Set is_fedora_coreos] ************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Set is_fedora_coreos] ************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Check resolvconf] ****************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Check existence of /etc/resolvconf/resolv.conf.d] ********************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Check status of /etc/resolv.conf] ************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Get content of /etc/resolv.conf] *************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Get currently configured nameservers] ********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Stop if /etc/resolv.conf not configured nameservers] *****************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}
ok: [node2] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [kubernetes/preinstall : NetworkManager | Check if host has NetworkManager] *******************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Check systemd-resolved] **********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Set default dns if remove_default_searchdomains is false] ************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Set dns facts] *******************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Check if kubelet is configured] **************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Check if early DNS configuration stage] ******************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Target resolv.conf files] ********************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Target temporary resolvconf cloud init file (Flatcar Container Linux by Kinvolk / Fedora CoreOS)] ********************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Check if /etc/dhclient.conf exists] **********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Target dhclient conf file for /etc/dhclient.conf] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Check if /etc/dhcp/dhclient.conf exists] *****************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Target dhclient conf file for /etc/dhcp/dhclient.conf] ***************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Target dhclient hook file for Red Hat family] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Target dhclient hook file for Debian family] *************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Generate search domains to resolvconf] *******************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Pick coredns cluster IP or default resolver] *************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Generate nameservers for resolvconf, including cluster DNS] **********************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Generate nameservers for resolvconf, not including cluster DNS] ******************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Gather os specific variables] ****************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/kubernetes/preinstall/vars/../vars/debian.yml)
ok: [node2] => (item=/mnt/c/src/my-study/Artem_Zhivushko/09.Kubernetes/kubespray/playbooks/roles/kubernetes/preinstall/vars/../vars/debian.yml)

TASK [kubernetes/preinstall : Set etcd vars if using kubeadm mode] *********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Check /usr readonly] *************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Set alternate flexvolume path] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if either kube_control_plane or kube_node group is empty] *******************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=kube_control_plane)
skipping: [node1] => (item=kube_node)
skipping: [node1]

TASK [kubernetes/preinstall : Stop if etcd group is empty in external etcd mode] *******************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/preinstall : Stop if non systemd OS type] *****************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if the os does not support] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if unknown network plugin] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if unsupported version of Kubernetes] ***************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if known booleans are set as strings (Use JSON format on CLI: -e "{'key': true }")] *****************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'download_run_once', 'value': False})
skipping: [node1] => (item={'name': 'deploy_netchecker', 'value': False})
skipping: [node1] => (item={'name': 'download_always_pull', 'value': False})
skipping: [node1] => (item={'name': 'helm_enabled', 'value': False})
skipping: [node1] => (item={'name': 'openstack_lbaas_enabled', 'value': False})
skipping: [node1]

TASK [kubernetes/preinstall : Stop if even number of etcd hosts] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if memory is too small for masters] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if memory is too small for nodes] *******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Guarantee that enough network address space is available for all pods] ***********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if ip var does not match local ips] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Ensure ping package] *************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if access_ip is not pingable] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if RBAC is not enabled when dashboard is enabled] ***************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if RBAC is not enabled when OCI cloud controller is enabled] ****************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if kernel version is too low] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if bad hostname] ************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Check cloud_provider value] ******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Check that kube_service_addresses is a network range] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/preinstall : Check that kube_pods_subnet is a network range] **********************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/preinstall : Check that kube_pods_subnet does not collide with kube_service_addresses] ********************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/preinstall : Check that IP range is enough for the nodes] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/preinstall : Stop if unknown dns mode] ********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/preinstall : Stop if unknown kube proxy mode] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/preinstall : Stop if unknown cert_management] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/preinstall : Stop if unknown resolvconf_mode] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/preinstall : Stop if etcd deployment type is not host, docker or kubeadm] *********************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if container manager is not docker, crio or containerd] *********************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/preinstall : Stop if etcd deployment type is not host or kubeadm when container_manager != docker] ********************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Warn the user if they are still using `etcd_kubeadm_enabled`] ********************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/preinstall : Stop if `etcd_kubeadm_enabled` is defined and `etcd_deployment_type` is not `kubeadm` or `host`] *********************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/preinstall : Stop if download_localhost is enabled but download_run_once is not] **************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if kata_containers_enabled is enabled when container_manager is docker] *****************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if gvisor_enabled is enabled when container_manager is not containerd] ******************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if download_localhost is enabled for Flatcar Container Linux] ***************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Ensure minimum containerd version] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [kubernetes/preinstall : Stop if using deprecated containerd_config variable] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if auto_renew_certificates is enabled when certificates are managed externally (kube_external_ca_mode is true)] *************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop if using deprecated comma separated list for admission plugins] *************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Create kubernetes directories] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/etc/kubernetes)
skipping: [node1] => (item=/etc/kubernetes/manifests)
skipping: [node1] => (item=/usr/local/bin/kubernetes-scripts)
skipping: [node1] => (item=/usr/libexec/kubernetes/kubelet-plugins/volume/exec)
skipping: [node1]
skipping: [node2] => (item=/etc/kubernetes)
skipping: [node2] => (item=/etc/kubernetes/manifests)
skipping: [node2] => (item=/usr/local/bin/kubernetes-scripts)
skipping: [node2] => (item=/usr/libexec/kubernetes/kubelet-plugins/volume/exec)
skipping: [node2]

TASK [kubernetes/preinstall : Create other directories of root owner] ******************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/etc/kubernetes/ssl)
skipping: [node1] => (item=/usr/local/bin)
skipping: [node1]
skipping: [node2] => (item=/etc/kubernetes/ssl)
skipping: [node2] => (item=/usr/local/bin)
skipping: [node2]

TASK [kubernetes/preinstall : Check if kubernetes kubeadm compat cert dir exists] ******************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Create kubernetes kubeadm compat cert dir (kubernetes/kubeadm issue 1498)] *******************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Create cni directories] **********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/etc/cni/net.d)
skipping: [node1] => (item=/opt/cni/bin)
skipping: [node1]
skipping: [node2] => (item=/etc/cni/net.d)
skipping: [node2] => (item=/opt/cni/bin)
skipping: [node2]

TASK [kubernetes/preinstall : Create calico cni directories] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=/var/lib/calico)
skipping: [node1]
skipping: [node2] => (item=/var/lib/calico)
skipping: [node2]

TASK [kubernetes/preinstall : Create local volume provisioner directories] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=local-storage)
skipping: [node1]
skipping: [node2] => (item=local-storage)
skipping: [node2]

TASK [kubernetes/preinstall : Create temporary resolveconf cloud init file] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Add domain/search/nameservers/options to resolv.conf] ****************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/preinstall : Remove search/domain/nameserver options before block] ****************************************************************************************************************************************************************************************************************************************
ok: [node1] => (item=['/etc/resolv.conf', 'search\\s'])
ok: [node2] => (item=['/etc/resolv.conf', 'search\\s'])
ok: [node1] => (item=['/etc/resolv.conf', 'nameserver\\s'])
ok: [node2] => (item=['/etc/resolv.conf', 'nameserver\\s'])
ok: [node1] => (item=['/etc/resolv.conf', 'domain\\s'])
ok: [node2] => (item=['/etc/resolv.conf', 'domain\\s'])
ok: [node1] => (item=['/etc/resolv.conf', 'options\\s'])
ok: [node2] => (item=['/etc/resolv.conf', 'options\\s'])

TASK [kubernetes/preinstall : Remove search/domain/nameserver options after block] *****************************************************************************************************************************************************************************************************************************************
ok: [node1] => (item=['/etc/resolv.conf', 'search\\s'])
ok: [node2] => (item=['/etc/resolv.conf', 'search\\s'])
ok: [node2] => (item=['/etc/resolv.conf', 'nameserver\\s'])
ok: [node1] => (item=['/etc/resolv.conf', 'nameserver\\s'])
ok: [node2] => (item=['/etc/resolv.conf', 'domain\\s'])
ok: [node1] => (item=['/etc/resolv.conf', 'domain\\s'])
ok: [node2] => (item=['/etc/resolv.conf', 'options\\s'])
ok: [node1] => (item=['/etc/resolv.conf', 'options\\s'])

TASK [kubernetes/preinstall : Get temporary resolveconf cloud init file content] *******************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Persist resolvconf cloud init file] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Create systemd-resolved drop-in directory] ***************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Write Kubespray DNS settings to systemd-resolved] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : NetworkManager | Ensure NetworkManager conf.d dir] *******************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : NetworkManager | Prevent NetworkManager from managing Calico interfaces (cali*/tunl*/vxlan.calico)] ******************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : NetworkManager | Prevent NetworkManager from managing K8S interfaces (kube-ipvs0/nodelocaldns)] **********************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : NetworkManager | Add nameservers to NM configuration] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Set default dns if remove_default_searchdomains is false] ************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : NetworkManager | Add DNS search to NM configuration] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : NetworkManager | Add DNS options to NM configuration] ****************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Update package management cache (zypper) - SUSE] *********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Add Debian Backports apt repo] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Set libseccomp2 pin priority to apt_preferences on Debian buster] ****************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Update package management cache (APT)] *******************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Remove legacy docker repo file] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Install python3-dnf for latest RedHat versions] **********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Install epel-release on RHEL derivatives] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Update common_required_pkgs with ipvsadm when kube_proxy_mode is ipvs] ***********************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Install packages requirements] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Install ipvsadm for ClearLinux] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Confirm selinux deployed] ********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Set selinux policy] **************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Disable IPv6 DNS lookup] *********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Clean previously used sysctl file locations] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item=ipv4-ip_forward.conf)
skipping: [node1] => (item=bridge-nf-call.conf)
skipping: [node1]
skipping: [node2] => (item=ipv4-ip_forward.conf)
skipping: [node2] => (item=bridge-nf-call.conf)
skipping: [node2]

TASK [kubernetes/preinstall : Stat sysctl file configuration] **************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Change sysctl file path to link source if linked] ********************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Make sure sysctl file path folder exists] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Enable ip forwarding] ************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Enable ipv6 forwarding] **********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Check if we need to set fs.may_detach_mounts] ************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Set fs.may_detach_mounts if needed] **********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Ensure kube-bench parameters are set] ********************************************************************************************************************************************************************************************************************************************************
skipping: [node1] => (item={'name': 'kernel.keys.root_maxbytes', 'value': 25000000})
skipping: [node1] => (item={'name': 'kernel.keys.root_maxkeys', 'value': 1000000})
skipping: [node1] => (item={'name': 'kernel.panic', 'value': 10})
skipping: [node1] => (item={'name': 'kernel.panic_on_oops', 'value': 1})
skipping: [node1] => (item={'name': 'vm.overcommit_memory', 'value': 1})
skipping: [node1] => (item={'name': 'vm.panic_on_oom', 'value': 0})
skipping: [node1]
skipping: [node2] => (item={'name': 'kernel.keys.root_maxbytes', 'value': 25000000})
skipping: [node2] => (item={'name': 'kernel.keys.root_maxkeys', 'value': 1000000})
skipping: [node2] => (item={'name': 'kernel.panic', 'value': 10})
skipping: [node2] => (item={'name': 'kernel.panic_on_oops', 'value': 1})
skipping: [node2] => (item={'name': 'vm.overcommit_memory', 'value': 1})
skipping: [node2] => (item={'name': 'vm.panic_on_oom', 'value': 0})
skipping: [node2]

TASK [kubernetes/preinstall : Check dummy module] **************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Set additional sysctl variables] *************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Disable fapolicyd service] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Ensure NTP package] **************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Disable systemd-timesyncd] *******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Set fact NTP settings] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Generate NTP configuration file.] ************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Stop the NTP Deamon For Sync Immediately] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Force Sync NTP Immediately] ******************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Ensure NTP service is started and enabled] ***************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Ensure tzdata package] ***********************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Set timezone] ********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Hosts | create hosts list from inventory] ****************************************************************************************************************************************************************************************************************************************************
ok: [node1 -> localhost]

TASK [kubernetes/preinstall : Hosts | populate inventory into hosts file] **************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Hosts | populate kubernetes loadbalancer address into hosts file] ****************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Hosts | Retrieve hosts file content] *********************************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Hosts | Extract existing entries for localhost from hosts file] ******************************************************************************************************************************************************************************************************************************
ok: [node1] => (item=127.0.0.1 localhost localhost.localdomain)
skipping: [node1] => (item=127.0.1.1    debian10.it-academy.by  debian10)
skipping: [node1] => (item=)
skipping: [node1] => (item=# The following lines are desirable for IPv6 capable hosts)
ok: [node1] => (item=::1 ip6-localhost ip6-loopback localhost6 localhost6.localdomain)
skipping: [node1] => (item=ff02::1 ip6-allnodes)
ok: [node2] => (item=127.0.0.1 localhost localhost.localdomain)
skipping: [node1] => (item=ff02::2 ip6-allrouters)
skipping: [node2] => (item=127.0.1.1    debian10.it-academy.by  debian10)
skipping: [node1] => (item=# Ansible inventory hosts BEGIN)
skipping: [node2] => (item=)
skipping: [node2] => (item=# The following lines are desirable for IPv6 capable hosts)
skipping: [node1] => (item=192.168.208.5 node1.cluster.local node1 )
skipping: [node1] => (item=192.168.208.6 node2.cluster.local node2 )
skipping: [node1] => (item=# Ansible inventory hosts END)
ok: [node2] => (item=::1 ip6-localhost ip6-loopback localhost6 localhost6.localdomain)
skipping: [node2] => (item=ff02::1 ip6-allnodes)
skipping: [node2] => (item=ff02::2 ip6-allrouters)
skipping: [node2] => (item=# Ansible inventory hosts BEGIN)
skipping: [node2] => (item=192.168.208.5 node1.cluster.local node1 )
skipping: [node2] => (item=192.168.208.6 node2.cluster.local node2 )
skipping: [node2] => (item=# Ansible inventory hosts END)

TASK [kubernetes/preinstall : Hosts | Update target hosts file entries dict with required entries] *************************************************************************************************************************************************************************************************************************
ok: [node1] => (item={'key': '127.0.0.1', 'value': {'expected': ['localhost', 'localhost.localdomain']}})
ok: [node1] => (item={'key': '::1', 'value': {'expected': ['localhost6', 'localhost6.localdomain'], 'unexpected': ['localhost', 'localhost.localdomain']}})
ok: [node2] => (item={'key': '127.0.0.1', 'value': {'expected': ['localhost', 'localhost.localdomain']}})
ok: [node2] => (item={'key': '::1', 'value': {'expected': ['localhost6', 'localhost6.localdomain'], 'unexpected': ['localhost', 'localhost.localdomain']}})

TASK [kubernetes/preinstall : Hosts | Update (if necessary) hosts file] ****************************************************************************************************************************************************************************************************************************************************
ok: [node1] => (item={'key': '127.0.0.1', 'value': ['localhost', 'localhost.localdomain']})
ok: [node2] => (item={'key': '127.0.0.1', 'value': ['localhost', 'localhost.localdomain']})
ok: [node1] => (item={'key': '::1', 'value': ['ip6-localhost', 'ip6-loopback', 'localhost6', 'localhost6.localdomain']})
ok: [node2] => (item={'key': '::1', 'value': ['ip6-localhost', 'ip6-loopback', 'localhost6', 'localhost6.localdomain']})

TASK [kubernetes/preinstall : Update facts] ********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Configure dhclient to supersede search/domain/nameservers] ***********************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

TASK [kubernetes/preinstall : Configure dhclient hooks for resolv.conf (non-RH)] *******************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Configure dhclient hooks for resolv.conf (RH-only)] ******************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Remove kubespray specific config from dhclient config] ***************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Remove kubespray specific dhclient hook] *****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Flush handlers] ******************************************************************************************************************************************************************************************************************************************************************************

TASK [kubernetes/preinstall : Flush handlers] ******************************************************************************************************************************************************************************************************************************************************************************

RUNNING HANDLER [kubernetes/preinstall : Preinstall | reload kubelet] ******************************************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

RUNNING HANDLER [kubernetes/preinstall : Preinstall | kube-apiserver configured] *******************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

RUNNING HANDLER [kubernetes/preinstall : Preinstall | kube-controller configured] ******************************************************************************************************************************************************************************************************************************************
ok: [node1]
ok: [node2]

RUNNING HANDLER [kubernetes/preinstall : Preinstall | restart kube-controller-manager docker] ******************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

RUNNING HANDLER [kubernetes/preinstall : Preinstall | restart kube-controller-manager crio/containerd] *********************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

RUNNING HANDLER [kubernetes/preinstall : Preinstall | restart kube-apiserver docker] ***************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

RUNNING HANDLER [kubernetes/preinstall : Preinstall | restart kube-apiserver crio/containerd] ******************************************************************************************************************************************************************************************************************************
changed: [node1]
changed: [node2]

RUNNING HANDLER [kubernetes/preinstall : Preinstall | wait for the apiserver to be running] ********************************************************************************************************************************************************************************************************************************
FAILED - RETRYING: [node1]: Preinstall | wait for the apiserver to be running (60 retries left).
FAILED - RETRYING: [node2]: Preinstall | wait for the apiserver to be running (60 retries left).
ok: [node1]
ok: [node2]

TASK [kubernetes/preinstall : Check if we are running inside a Azure VM] ***************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Install growpart] ****************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Gather mounts facts] *************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Search root filesystem device] ***************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Check if growpart needs to be run] ***********************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Check fs type] *******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Run growpart] ********************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [kubernetes/preinstall : Run xfs_growfs] ******************************************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
skipping: [node2]

TASK [Run calico checks] ***************************************************************************************************************************************************************************************************************************************************************************************************

TASK [network_plugin/calico : Stop if legacy encapsulation variables are detected (ipip)] **********************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [network_plugin/calico : Stop if legacy encapsulation variables are detected (ipip_mode)] *****************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [network_plugin/calico : Stop if legacy encapsulation variables are detected (calcio_ipam_autoallocateblocks)] ********************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [network_plugin/calico : Stop if incompatible network plugin and cloudprovider] ***************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Stop if supported Calico versions] ***********************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [network_plugin/calico : Check if calicoctl.sh exists] ****************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [network_plugin/calico : Check if calico ready] ***********************************************************************************************************************************************************************************************************************************************************************
changed: [node1]

TASK [network_plugin/calico : Get current calico version] ******************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [network_plugin/calico : Assert that current calico version is enough for upgrade] ************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [network_plugin/calico : Check that cluster_id is set if calico_rr enabled] *******************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Check that calico_rr nodes are in k8s_cluster group] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Check vars defined correctly] ****************************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [network_plugin/calico : Check calico network backend defined correctly] **********************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [network_plugin/calico : Check ipip and vxlan mode defined correctly] *************************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [network_plugin/calico : Check ipip and vxlan mode if simultaneously enabled] *****************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Check ipip and vxlan mode if simultaneously enabled] *****************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [network_plugin/calico : Get Calico default-pool configuration] *******************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [network_plugin/calico : Set calico_pool_conf] ************************************************************************************************************************************************************************************************************************************************************************
ok: [node1]

TASK [network_plugin/calico : Check if inventory match current cluster configuration] **************************************************************************************************************************************************************************************************************************************
ok: [node1] => {
    "changed": false,
    "msg": "All assertions passed"
}

TASK [network_plugin/calico : Check kdd calico_datastore if calico_apiserver_enabled] **************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Check kdd calico_datastore if typha_enabled] *************************************************************************************************************************************************************************************************************************************************
skipping: [node1]

TASK [network_plugin/calico : Check ipip mode is Never for calico ipv6] ****************************************************************************************************************************************************************************************************************************************************
skipping: [node1]
```

```bash
PLAY RECAP *****************************************************************************************************************************************************************************************************************************************************************************************************************
node1                      : ok=716  changed=142  unreachable=0    failed=0    skipped=1179 rescued=0    ignored=6
node2                      : ok=585  changed=116  unreachable=0    failed=0    skipped=1042 rescued=0    ignored=2
```

## Homework Assignment 1: KinD Kubernetes Cluster Setup

1. Install Docker and KinD on your local machine.

```bash
╭─a.zhivushko at DESKTOP-NGTG70N in /home/a.zhivushko/.ssh
╰─λ go install sigs.k8s.io/kind@v0.21.0
```

```bash
╭─a.zhivushko at DESKTOP-NGTG70N in /home/a.zhivushko/.ssh
╰─λ export PATH=$PATH:/home/a.zhivushko/go/bin/ 
```

```bash
╭─a.zhivushko at DESKTOP-NGTG70N in /home/a.zhivushko/.ssh
╰─λ kind version                                                                                                                                                                           0 (0.638s)
kind v0.21.0 go1.21.6 linux/amd64
```

1. Create a KinD cluster with a single control plane node.

```bash
# without RUN Docker

╭─a.zhivushko@DESKTOP-NGTG70N /mnt/c/src/my-study ‹ZhivArt-work●›
╰─$ kind create cluster
ERROR: failed to create cluster: failed to get docker info: command "docker info --format '{{json .}}'" failed with error: exit status 1
Command Output:
The command 'docker' could not be found in this WSL 2 distro.
We recommend to activate the WSL integration in Docker Desktop settings.

For details about using Docker Desktop with WSL 2, visit:

https://docs.docker.com/go/wsl2/
```

```bash
╭─a.zhivushko@DESKTOP-NGTG70N /mnt/c/src/my-study ‹ZhivArt-work●›
╰─$ kind create cluster                                                                                                                                                                                                                                                                                                 1 ↵
Creating cluster "kind" ...
 ✓ Ensuring node image (kindest/node:v1.29.1) 🖼
 ✓ Preparing nodes 📦
 ✓ Writing configuration 📜
 ✓ Starting control-plane 🕹️
 ✓ Installing CNI 🔌
 ✓ Installing StorageClass 💾
Set kubectl context to "kind-kind"
You can now use your cluster with:

kubectl cluster-info --context kind-kind

Have a nice day! 👋
```

1. Verify that the cluster is up and running using `kubectl`.

```bash
╭─a.zhivushko@DESKTOP-NGTG70N /mnt/c/src/my-study ‹ZhivArt-work●›
╰─$ kubectl get node -A
NAME                 STATUS   ROLES           AGE     VERSION
kind-control-plane   Ready    control-plane   2m15s   v1.29.1
```

```bash
╭─a.zhivushko@DESKTOP-NGTG70N /mnt/c/src/my-study ‹ZhivArt-work●›
╰─$ kind get clusters
kind
```

```bash
╭─a.zhivushko@DESKTOP-NGTG70N /mnt/c/src/my-study ‹ZhivArt-work●›
╰─$ kubectl cluster-info --context kind-kind
Kubernetes control plane is running at https://127.0.0.1:36585
CoreDNS is running at https://127.0.0.1:36585/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy

To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.
```

```json
{
    "kind": "Status",
    "apiVersion": "v1",
    "metadata": {},
    "status": "Failure",
    "message": "forbidden: User \"system:anonymous\" cannot get path \"/\"",
    "reason": "Forbidden",
    "details": {},
    "code": 403
}
```

```bash
╭─a.zhivushko@DESKTOP-NGTG70N /mnt/c/src/my-study ‹ZhivArt-work●›
╰─$ kind delete cluster
Deleting cluster "kind" ...
Deleted nodes: ["kind-control-plane"]
```

```bash
╭─a.zhivushko@DESKTOP-NGTG70N /mnt/c/src/my-study ‹ZhivArt-work●›
╰─$ kubectl get node -A
E0218 12:37:00.100249    3146 memcache.go:265] couldn't get current server API group list: Get "http://localhost:8080/api?timeout=32s": dial tcp 127.0.0.1:8080: connect: connection refused
E0218 12:37:00.100471    3146 memcache.go:265] couldn't get current server API group list: Get "http://localhost:8080/api?timeout=32s": dial tcp 127.0.0.1:8080: connect: connection refused
E0218 12:37:00.101864    3146 memcache.go:265] couldn't get current server API group list: Get "http://localhost:8080/api?timeout=32s": dial tcp 127.0.0.1:8080: connect: connection refused
E0218 12:37:00.102085    3146 memcache.go:265] couldn't get current server API group list: Get "http://localhost:8080/api?timeout=32s": dial tcp 127.0.0.1:8080: connect: connection refused
E0218 12:37:00.103466    3146 memcache.go:265] couldn't get current server API group list: Get "http://localhost:8080/api?timeout=32s": dial tcp 127.0.0.1:8080: connect: connection refused
The connection to the server localhost:8080 was refused - did you specify the right host or port?
```

```bash
╭─a.zhivushko@DESKTOP-NGTG70N /mnt/c/src/my-study ‹ZhivArt-work●›
╰─$ kind get clusters                                                                                                                                                                                                                                                                                                   1 ↵
No kind clusters found.
```

## Homework Assignment 2: Minikube Kubernetes Cluster Setup

1. Install Minikube and a hypervisor (e.g., VirtualBox) on your local machine.

```bash
╭─a.zhivushko at DESKTOP-NGTG70N in /home/a.zhivushko/.ssh
╰─λ zypper se minikube                                                                                                                                                                     0 (0.265s)
Repository 'Update repository with updates from SUSE Linux Enterprise 15' is out-of-date. You can run 'zypper refresh' as root to update it.
Loading repository data...
Reading installed packages...

S  | Name                     | Summary                        | Type
---+--------------------------+--------------------------------+--------
i+ | minikube                 | Tool to run Kubernetes locally | package
   | minikube-bash-completion | Minikube bash completion       | package
╭─a.zhivushko at DESKTOP-NGTG70N in /home/a.zhivushko/.ssh
╰─λ sudo zypper in minikube                                                                                                                                                                0 (2.682s)
[sudo] password for root:
Retrieving repository 'Update repository with updates from SUSE Linux Enterprise 15' metadata ........................................................................................................................................................................................................................[done]
Building repository 'Update repository with updates from SUSE Linux Enterprise 15' cache .............................................................................................................................................................................................................................[done]
Loading repository data...
Reading installed packages...
'minikube' is already installed.
No update candidate for 'minikube-1.29.0-bp155.1.8.x86_64'. The highest available version is already installed.
Resolving package dependencies...
Nothing to do.
```

```bash
╭─a.zhivushko at DESKTOP-NGTG70N in /home/a.zhivushko/.ssh
╰─λ minikube version                                                                                                                                                                     127 (0.790s)
minikube version: v1.29.0
commit: 281bbdc4401eccd0ad22f70e4e3b84b081680999
```

1. Start a Minikube cluster with a single node.

```bash
╭─a.zhivushko@DESKTOP-NGTG70N /mnt/c/src/my-study ‹ZhivArt-work●›
╰─$ minikube start
😄  minikube v1.29.0 on Opensuse-Leap 15.5 (amd64)
✨  Automatically selected the docker driver
📌  Using Docker driver with root privileges
❗  For an improved experience it's recommended to use Docker Engine instead of Docker Desktop.
Docker Engine installation instructions: https://docs.docker.com/engine/install/#server
👍  Starting control plane node minikube in cluster minikube
🚜  Pulling base image ...
🎉  minikube 1.32.0 is available! Download it: https://github.com/kubernetes/minikube/releases/tag/v1.32.0
💡  To disable this notice, run: 'minikube config set WantUpdateNotification false'

💾  Downloading Kubernetes v1.26.1 preload ...
    > preloaded-images-k8s-v18-v1...:  397.05 MiB / 397.05 MiB  100.00% 320.51
    > gcr.io/k8s-minikube/kicbase...:  407.19 MiB / 407.19 MiB  100.00% 305.00
🔥  Creating docker container (CPUs=2, Memory=2200MB) ...
🐳  Preparing Kubernetes v1.26.1 on Docker 20.10.23 ...
    ▪ Generating certificates and keys ...
    ▪ Booting up control plane ...
    ▪ Configuring RBAC rules ...
🔗  Configuring bridge CNI (Container Networking Interface) ...
    ▪ Using image gcr.io/k8s-minikube/storage-provisioner:v5
🔎  Verifying Kubernetes components...
🌟  Enabled addons: default-storageclass

❗  /usr/local/bin/kubectl is version 1.29.1, which may have incompatibilities with Kubernetes 1.26.1.
    ▪ Want kubectl v1.26.1? Try 'minikube kubectl -- get pods -A'
🏄  Done! kubectl is now configured to use "minikube" cluster and "default" namespace by default
```

1. Confirm that the cluster is operational using `kubectl`.

```bash
╭─a.zhivushko@DESKTOP-NGTG70N /mnt/c/src/my-study ‹ZhivArt-work●›
╰─$ kubectl get node -A
NAME       STATUS   ROLES           AGE   VERSION
minikube   Ready    control-plane   25m   v1.26.1
```

```bash
╭─a.zhivushko@DESKTOP-NGTG70N /mnt/c/src/my-study ‹ZhivArt-work●›
╰─$ kubectl get po -A
NAMESPACE     NAME                               READY   STATUS    RESTARTS   AGE
kube-system   coredns-787d4945fb-6n2gw           1/1     Running   0          28m
kube-system   etcd-minikube                      1/1     Running   0          28m
kube-system   kube-apiserver-minikube            1/1     Running   0          28m
kube-system   kube-controller-manager-minikube   1/1     Running   0          28m
kube-system   kube-proxy-8wsn6                   1/1     Running   0          28m
kube-system   kube-scheduler-minikube            1/1     Running   0          28m
kube-system   storage-provisioner                1/1     Running   0          28m
```

```bash
╭─a.zhivushko@DESKTOP-NGTG70N /mnt/c/src/my-study ‹ZhivArt-work●›
╰─$ minikube kubectl -- get po -A
    > kubectl.sha256:  64 B / 64 B [-------------------------] 100.00% ? p/s 0s
    > kubectl:  45.80 MiB / 45.80 MiB [-----------] 100.00% 734.57 KiB p/s 1m4s
NAMESPACE     NAME                               READY   STATUS    RESTARTS   AGE
kube-system   coredns-787d4945fb-6n2gw           1/1     Running   0          29m
kube-system   etcd-minikube                      1/1     Running   0          30m
kube-system   kube-apiserver-minikube            1/1     Running   0          30m
kube-system   kube-controller-manager-minikube   1/1     Running   0          30m
kube-system   kube-proxy-8wsn6                   1/1     Running   0          29m
kube-system   kube-scheduler-minikube            1/1     Running   0          30m
kube-system   storage-provisioner                1/1     Running   0          29m
```

```bash
╭─a.zhivushko@DESKTOP-NGTG70N /mnt/c/src/my-study ‹ZhivArt-work●›
╰─$ minikube dashboard
🔌  Enabling dashboard ...
    ▪ Using image docker.io/kubernetesui/dashboard:v2.7.0
    ▪ Using image docker.io/kubernetesui/metrics-scraper:v1.0.8
💡  Some dashboard features require the metrics-server addon. To enable all features please run:

        minikube addons enable metrics-server


🤔  Verifying dashboard health ...
🚀  Launching proxy ...
🤔  Verifying proxy health ...
🎉  Opening http://127.0.0.1:34023/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/ in your default browser...
👉  http://127.0.0.1:34023/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/
```

```bash
╭─a.zhivushko@DESKTOP-NGTG70N /mnt/c/src/my-study ‹ZhivArt-work●›
╰─$ minikube kubectl -- get po -A                                                                                                                                                                                                                                                                                     130 ↵
NAMESPACE              NAME                                        READY   STATUS    RESTARTS   AGE
kube-system            coredns-787d4945fb-6n2gw                    1/1     Running   0          36m
kube-system            etcd-minikube                               1/1     Running   0          36m
kube-system            kube-apiserver-minikube                     1/1     Running   0          36m
kube-system            kube-controller-manager-minikube            1/1     Running   0          36m
kube-system            kube-proxy-8wsn6                            1/1     Running   0          36m
kube-system            kube-scheduler-minikube                     1/1     Running   0          36m
kube-system            storage-provisioner                         1/1     Running   0          36m
kubernetes-dashboard   dashboard-metrics-scraper-5c6664855-xxh8f   1/1     Running   0          5m7s
kubernetes-dashboard   kubernetes-dashboard-55c4cbbc7c-5tdrd       1/1     Running   0          5m7s
```

```bash
╭─a.zhivushko@DESKTOP-NGTG70N /mnt/c/src/my-study ‹ZhivArt-work●›
╰─$ minikube stop
✋  Stopping node "minikube"  ...
🛑  Powering off "minikube" via SSH ...
🛑  1 node stopped.
```

```bash
╭─a.zhivushko@DESKTOP-NGTG70N /mnt/c/src/my-study ‹ZhivArt-work●›
╰─$ minikube delete --all
🔥  Deleting "minikube" in docker ...
🔥  Removing /home/a.zhivushko/.minikube/machines/minikube ...
💀  Removed all traces of the "minikube" cluster.
🔥  Successfully deleted all profiles
```

## Homework Assignment 3: GitHub Actions for KinD Cluster Setup

### KinD create cluster 52s

```yaml
name: Installing Prerequisites (KinD Cluster)

on:
  push:
    branches:
      - k8s

jobs:
    kind:
        runs-on: ubuntu-latest
        steps:
        - name: checkout repository
          uses: actions/checkout@master

        - name: Setup Go
          uses: actions/setup-go@v5

        - name: setup-kind
          run: |
            go version
            go install sigs.k8s.io/kind@v0.21.0
            export PATH=$PATH:$HOME/go/bin/
            kind version
            kind create cluster

        - name: Testing-kind
          run: |
            export KUBECONFIG="$(kind get kubeconfig-path)"
            kubectl cluster-info
            kubectl get pods -n kube-system
            echo "current context: " $(kubectl config current-context)
            echo "env kubeconfig: " ${KUBECONFIG}
            kubectl get nodes
            kubectl get pods -A
            kubectl version
            kind version
          shell: bash
```

```bash
Setup go version spec 
Warning: go-version input was not specified. The action will try to use pre-installed version.
/usr/bin/go env GOMODCACHE
/usr/bin/go env GOCACHE
/home/runner/go/pkg/mod
/home/runner/.cache/go-build
Cache is not found
go version go1.20.14 linux/amd64
```

```bash
#setup-kind

Run go version
go version go1.20.14 linux/amd64
go: downloading sigs.k8s.io/kind v0.21.0
go: downloading github.com/spf13/pflag v1.0.5
go: downloading github.com/spf13/cobra v1.4.0
go: downloading github.com/pkg/errors v0.9.1
go: downloading github.com/alessio/shellescape v1.4.1
go: downloading github.com/mattn/go-isatty v0.0.14
go: downloading golang.org/x/sys v0.0.0-20210630005230-0f9fa26af87c
go: downloading github.com/pelletier/go-toml v1.9.4
go: downloading github.com/BurntSushi/toml v1.0.0
go: downloading github.com/evanphx/json-patch/v5 v5.6.0
go: downloading gopkg.in/yaml.v3 v3.0.1
go: downloading sigs.k8s.io/yaml v1.3.0
go: downloading gopkg.in/yaml.v2 v2.4.0
go: downloading github.com/google/safetext v0.0.0-20220905092116-b49f7bc46da2
kind v0.21.0 go1.20.14 linux/amd64
Creating cluster "kind" ...
 • Ensuring node image (kindest/node:v1.29.1) 🖼  ...
 ✓ Ensuring node image (kindest/node:v1.29.1) 🖼
 • Preparing nodes 📦   ...
 ✓ Preparing nodes 📦 
 • Writing configuration 📜  ...
 ✓ Writing configuration 📜
 • Starting control-plane 🕹️  ...
 ✓ Starting control-plane 🕹️
 • Installing CNI 🔌  ...
 ✓ Installing CNI 🔌
 • Installing StorageClass 💾  ...
 ✓ Installing StorageClass 💾
Set kubectl context to "kind-kind"
You can now use your cluster with:

kubectl cluster-info --context kind-kind

Have a nice day! 👋
```

```bash
#test-kind

Run export KUBECONFIG="$(kind get kubeconfig-path)"
ERROR: unknown command "kubeconfig-path" for "kind get"
Kubernetes control plane is running at https://127.0.0.1:37499
CoreDNS is running at https://127.0.0.1:37499/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy

To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.
NAME                                         READY   STATUS    RESTARTS   AGE
etcd-kind-control-plane                      0/1     Running   0          4s
kube-apiserver-kind-control-plane            0/1     Running   0          4s
kube-controller-manager-kind-control-plane   0/1     Running   0          4s
kube-scheduler-kind-control-plane            0/1     Running   0          4s
current context:  kind-kind
env kubeconfig: 
NAME                 STATUS     ROLES           AGE   VERSION
kind-control-plane   NotReady   control-plane   7s    v1.29.1
NAMESPACE     NAME                                         READY   STATUS    RESTARTS   AGE
kube-system   etcd-kind-control-plane                      0/1     Running   0          4s
kube-system   kube-apiserver-kind-control-plane            0/1     Running   0          4s
kube-system   kube-controller-manager-kind-control-plane   0/1     Running   0          4s
kube-system   kube-scheduler-kind-control-plane            0/1     Running   0          4s
Client Version: v1.29.1
Kustomize Version: v5.0.4-0.20230601165947-6ce0bf390ce3
Server Version: v1.29.1
kind v0.21.0 go1.20.14 linux/amd64
```

### Client Version: v1.29.1
### Kustomize Version: v5.0.4-0.20230601165947-6ce0bf390ce3
### Server Version: v1.29.1
### kind v0.21.0 go1.20.14 linux/amd64

## Homework Assignment 4: GitHub Actions for Minikube Cluster Setup

### Minikube create cluster 1m 43s

```yaml
name: Installing Prerequisites (Minikube Cluster)

on:
  push:
    branches:
      - k8s

jobs:
    minikube:
        runs-on: ubuntu-latest
        steps:
        - name: checkout repository
          uses: actions/checkout@master
        
        - name: setup-minikube
          uses: medyagh/setup-minikube@master

        - name: Testing-minikube
          run: |
            export KUBECONFIG="$(minikube get kubeconfig-path)"
            kubectl cluster-info
            kubectl get pods -n kube-system
            echo "current context: " $(kubectl config current-context)
            echo "env kubeconfig: " ${KUBECONFIG}
            kubectl get nodes
            kubectl get pods -A
            kubectl version
            minikube version
          shell: bash
```

```bash
#setup-minikube

Run medyagh/setup-minikube@master
/usr/bin/chmod +x /home/runner/work/_temp/c771fa42-e7f6-4877-84e3-55dbd8d344bb
/home/runner/bin/minikube version --short
v1.32.0
/home/runner/bin/minikube start --wait all
* minikube v1.32.0 on Ubuntu 22.04
* Automatically selected the docker driver. Other choices: podman, none, ssh
* Using Docker driver with root privileges
* Starting control plane node minikube in cluster minikube
* Pulling base image ...
* Downloading Kubernetes v1.28.3 preload ...
    > gcr.io/k8s-minikube/kicbase...:  3.17 MiB / 453.90 MiB [>_] 0.70% ? p/s ?    > gcr.io/k8s-minikube/kicbase...:  38.88 MiB / 453.90 MiB [>] 8.57% ? p/s ?    > gcr.io/k8s-minikube/kicbase...:  66.25 MiB / 453.90 MiB [] 14.60% ? p/s ?    > gcr.io/k8s-minikube/kicbase...:  104.52 MiB / 453.90 MiB  23.03% 168.90 M    > gcr.io/k8s-minikube/kicbase...:  139.77 MiB / 453.90 MiB  30.79% 168.90 M    > gcr.io/k8s-minikube/kicbase...:  179.66 MiB / 453.90 MiB  39.58% 168.90 M    > gcr.io/k8s-minikube/kicbase...:  222.03 MiB / 453.90 MiB  48.92% 170.64 M    > gcr.io/k8s-minikube/kicbase...:  263.25 MiB / 453.90 MiB  58.00% 170.64 M    > gcr.io/k8s-minikube/kicbase...:  304.53 MiB / 453.90 MiB  67.09% 170.64 M    > gcr.io/k8s-minikube/kicbase...:  342.38 MiB / 453.90 MiB  75.43% 172.57 M    > gcr.io/k8s-minikube/kicbase...:  377.31 MiB / 453.90 MiB  83.13% 172.57 M    > gcr.io/k8s-minikube/kicbase...:  418.63 MiB / 453.90 MiB  92.23% 172.57 M    > gcr.io/k8s-minikube/kicbase...:  453.74 MiB / 453.90 MiB  99.96% 192.24 M* Creating docker container (CPUs=2, Memory=3900MB) ...
* Preparing Kubernetes v1.28.3 on Docker 24.0.7 ...
  - Generating certificates and keys ...
  - Booting up control plane ...
  - Configuring RBAC rules ...
* Configuring bridge CNI (Container Networking Interface) ...
  - Using image gcr.io/k8s-minikube/storage-provisioner:v5
* Verifying Kubernetes components...
* Enabled addons: storage-provisioner, default-storageclass
* Done! kubectl is now configured to use "minikube" cluster and "default" namespace by default
/home/runner/bin/minikube version --short
v1.32.0
/usr/bin/tar --posix -cf cache.tzst --exclude cache.tzst -P -C /home/runner/work/my-workflows/my-workflows --files-from manifest.txt --use-compress-program zstdmt
/usr/bin/tar --posix -cf cache.tzst --exclude cache.tzst -P -C /home/runner/work/my-workflows/my-workflows --files-from manifest.txt --use-compress-program zstdmt
Cache Size: ~319 MB (334144680 B)
Cache saved successfully
Cache Size: ~453 MB (475478874 B)
Cache saved successfully
```

```bash
#testing-minikube

Run export KUBECONFIG="$(kind get kubeconfig-path)"
ERROR: unknown command "kubeconfig-path" for "kind get"
Kubernetes control plane is running at https://192.168.49.2:8443
CoreDNS is running at https://192.168.49.2:8443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy

To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.
NAME                               READY   STATUS    RESTARTS   AGE
coredns-5dd5756b68-j7z6r           1/1     Running   0          2m25s
etcd-minikube                      1/1     Running   0          2m38s
kube-apiserver-minikube            1/1     Running   0          2m38s
kube-controller-manager-minikube   1/1     Running   0          2m38s
kube-proxy-xrbdb                   1/1     Running   0          2m25s
kube-scheduler-minikube            1/1     Running   0          2m38s
storage-provisioner                1/1     Running   0          2m25s
current context:  minikube
env kubeconfig: 
NAME       STATUS   ROLES           AGE     VERSION
minikube   Ready    control-plane   2m41s   v1.28.3
NAMESPACE     NAME                               READY   STATUS    RESTARTS   AGE
kube-system   coredns-5dd5756b68-j7z6r           1/1     Running   0          2m25s
kube-system   etcd-minikube                      1/1     Running   0          2m38s
kube-system   kube-apiserver-minikube            1/1     Running   0          2m38s
kube-system   kube-controller-manager-minikube   1/1     Running   0          2m38s
kube-system   kube-proxy-xrbdb                   1/1     Running   0          2m25s
kube-system   kube-scheduler-minikube            1/1     Running   0          2m38s
kube-system   storage-provisioner                1/1     Running   0          2m25s
Client Version: v1.29.1
Kustomize Version: v5.0.4-0.20230601165947-6ce0bf390ce3
Server Version: v1.28.3
minikube version: v1.32.0
commit: 8220a6eb95f0a4d75f7f2d7b14cef975f050512d
```

### Client Version: v1.29.1
### Kustomize Version: v5.0.4-0.20230601165947-6ce0bf390ce3
### Server Version: v1.28.3
### minikube version: v1.32.0
