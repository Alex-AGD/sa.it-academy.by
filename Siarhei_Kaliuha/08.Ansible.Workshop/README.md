# Homework report for 08.Ansible.Workshop by Siarhei Kaliuha

---

### Using virtual host in [IT Academy](https://www.it-academy.by/) lab environment (according list of the group: *redmine_11 - 192.168.201.11*).

## In this lab deployment process devided into two independent roles: **mysql** and **app**.

## Role **mysql**: 
* Provide MySQL deployment/upgrade.
## Role **app**: 
* Provide Redmine application deployment/upgrade.

## Playbook `deploy.yaml` also includes: 
* **pre tasks** (hostname check and default packages installation) 
* testing **post tasks** (content checking and message notification via Slack)


## Output of playing `deploy.yaml`:

```
vagrant@vagrant-ubuntu-20:~/08.Ansible.Workshop$ ansible-playbook -i inventory.yaml deploy.yaml

PLAY [redmine] ******************************************************************************************************************************************************************************************************************************

TASK [Gathering Facts] **********************************************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:53:41 +0300 (0:00:00.037)       0:00:00.037 ***********
ok: [redmine_11]

TASK [Pretask. Hostname validation] *********************************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:53:44 +0300 (0:00:03.472)       0:00:03.510 ***********
ok: [redmine_11] => {
    "msg": "192.168.201.11"
}

TASK [Pretask. Default packages installation] ***********************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:53:44 +0300 (0:00:00.126)       0:00:03.636 ***********
ok: [redmine_11]

TASK [mysql : MYSQL. Install packages] ******************************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:53:48 +0300 (0:00:03.392)       0:00:07.028 ***********
ok: [redmine_11]

TASK [mysql : MYSQL. Create database] *******************************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:53:50 +0300 (0:00:02.515)       0:00:09.544 ***********
ok: [redmine_11]

TASK [mysql : MYSQL. Create user] ***********************************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:53:51 +0300 (0:00:01.283)       0:00:10.828 ***********
ok: [redmine_11]

TASK [app : Redmine. Install packages] ******************************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:53:53 +0300 (0:00:01.298)       0:00:12.127 ***********
ok: [redmine_11]

TASK [app : Redmine. Clone repository] ******************************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:53:55 +0300 (0:00:02.569)       0:00:14.696 ***********
ok: [redmine_11]

TASK [app : Redmine. Change permissions] ****************************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:53:57 +0300 (0:00:01.392)       0:00:16.089 ***********
ok: [redmine_11]

TASK [app : Redmine. Change permissions] ****************************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:53:58 +0300 (0:00:01.130)       0:00:17.219 ***********
ok: [redmine_11]

TASK [app : Config database] ****************************************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:53:59 +0300 (0:00:00.971)       0:00:18.191 ***********
ok: [redmine_11]

TASK [app : Redmine. Setup 01] **************************************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:54:00 +0300 (0:00:01.687)       0:00:19.878 ***********
changed: [redmine_11]

TASK [app : Session store secret generation] ************************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:54:07 +0300 (0:00:06.814)       0:00:26.693 ***********
ok: [redmine_11]

TASK [app : Redmine. Setup 02] **************************************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:54:08 +0300 (0:00:00.978)       0:00:27.672 ***********
changed: [redmine_11]

TASK [app : Configuration files for virtualhost] ********************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:54:22 +0300 (0:00:13.273)       0:00:40.945 ***********
ok: [redmine_11]

TASK [app : meta] ***************************************************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:54:23 +0300 (0:00:01.522)       0:00:42.468 ***********

TASK [Test. Add redmine-11.sa to /etc/hosts file] *******************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:54:23 +0300 (0:00:00.128)       0:00:42.596 ***********
changed: [redmine_11]

TASK [Test. Content check] ******************************************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:54:24 +0300 (0:00:00.959)       0:00:43.556 ***********
ok: [redmine_11]

TASK [Test. Cleanup redmine-11.sa from /etc/hosts file] *************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:54:26 +0300 (0:00:01.400)       0:00:44.956 ***********
changed: [redmine_11]

TASK [Notification. Slack message send] *****************************************************************************************************************************************************************************************************
Sunday 03 July 2022  17:54:27 +0300 (0:00:01.253)       0:00:46.209 ***********
ok: [redmine_11 -> localhost]

PLAY RECAP **********************************************************************************************************************************************************************************************************************************
redmine_11                 : ok=19   changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

Sunday 03 July 2022  17:54:28 +0300 (0:00:01.522)       0:00:47.732 ***********
===============================================================================
app : Redmine. Setup 02 ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 13.27s
app : Redmine. Setup 01 -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 6.81s
Gathering Facts ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 3.47s
Pretask. Default packages installation ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 3.39s
app : Redmine. Install packages ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 2.57s
mysql : MYSQL. Install packages ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 2.52s
app : Config database ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.69s
Notification. Slack message send ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.52s
app : Configuration files for virtualhost -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.52s
Test. Content check ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 1.40s
app : Redmine. Clone repository ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 1.39s
mysql : MYSQL. Create user ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.30s
mysql : MYSQL. Create database ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.28s
Test. Cleanup redmine-11.sa from /etc/hosts file ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.25s
app : Redmine. Change permissions ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 1.13s
app : Session store secret generation ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 0.98s
app : Redmine. Change permissions ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.97s
Test. Add redmine-11.sa to /etc/hosts file ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.96s
app : meta --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.13s
Pretask. Hostname validation --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 0.13s
Playbook run took 0 days, 0 hours, 0 minutes, 47 seconds
```

### Printscreen of test project in Redmine application on host redmine-11.sa

![alt text](https://github.com/s-kalyuga/sa.it-academy.by/blob/md-sa2-20-22/Siarhei_Kaliuha/08.Ansible.Workshop/redmine.jpg)


### Printscreen of Slack notification message

![alt text](https://github.com/s-kalyuga/sa.it-academy.by/blob/md-sa2-20-22/Siarhei_Kaliuha/08.Ansible.Workshop/slack.jpg)

